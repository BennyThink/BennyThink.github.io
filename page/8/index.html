<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>土豆不好吃</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="土豆不好吃">
<meta property="og:url" content="http://example.com/page/8/index.html">
<meta property="og:site_name" content="土豆不好吃">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Benny小土豆">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="土豆不好吃" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">土豆不好吃</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-new-domain-life/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/04/25/new-domain-life/index/" class="article-date">
  <time class="dt-published" datetime="2020-04-25T00:00:00.000Z" itemprop="datePublished">2020-04-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/website/">website</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/04/25/new-domain-life/index/">新的域名与未知的生活</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>太长不看：</p>
<p>我换域名了，新域名dmesg.app，旧的bennythink.com会自动301到dmesg.app。没别的什么事情。就这样</p>
<p>完整版：</p>
<p>你好，抬头看看地址栏，如果发现域名好像有些不对，也不要慌张哦。</p>
<p>也许有人记得，从2020年1月7日起，<a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1214369246324543488">我的博客被墙了</a>，DNS污染。说真的，被墙其实是意料之中的结果，写过很多抨击某些现象的文章，写过一系列翻墙工具集合，曾经成为百度“翻墙”、“科学上网”搜索结果的前几名。难怪被墙了，这都已经很仁慈了吧。</p>
<p>发现被墙之后，自己对博客就开始变得心灰意冷了。到如今，随着一系列正确或者错误的决定，我终于离开了自己熟悉的地方，也决定使用新的域名。</p>
<h2 id="我的故事"><a href="#我的故事" class="headerlink" title="我的故事"></a>我的故事</h2><h3 id="域名的故事"><a href="#域名的故事" class="headerlink" title="域名的故事"></a>域名的故事</h3><p>在本博刚刚开张的之前，考虑到需要找一个code name，那么首先要有Benny，其次还要有另外一个词语。本来我是想叫BennyFight的，可惜这个名字已经在Gmail上被抢注了。参考编程随想，所以只好叫BennyThink了。</p>
<p>既然咱叫BennyThink，再加上那时候还比较傻，于是注册了 bennythink.com 这个很长很不好记的域名，哪里懂域名长短。</p>
<p>然后5年过去了。5年里，我注册了不少有意思的短域名，希望着自己能够成为?赚一笔钱。当然了，由于幸存者偏差的存在，赚钱的终究还是一小部分人，并没有人来找我买。甚至连金将军都没有注意到我的 3fat.kim，于是我的域名们就都过期了……</p>
<p><img src="/images/2020042521575211.png"></p>
<p>最近一次，从namesilo上购入了dmesg.app 。dmesg就是那个我们都知道的命令，可以显示一些Linux内核相关的信息。</p>
<p><img src="/images/2020042521575379.png"></p>
<p>还不是穷，买不起更短的域名。</p>
<h3 id="工作的故事"><a href="#工作的故事" class="headerlink" title="工作的故事"></a>工作的故事</h3><p>同样还是几年前，当我还在读书的时候，偶然拿到了<a target="_blank" rel="noopener" href="https://www.bennythink.com/internship.html">Cisco的实习生</a>的机会。由于家人的因素，在加上自己比较怂，于是便留了下来，成为了Cisco的员工。</p>
<p>在Cisco的工作是非常幸福的，可以说是人生中非常开心的一段时间了。优异的网络环境——今天装作香港人，明天就可以装作日本人，印度人；真正的弹性工作制。很难忘的一段经历。</p>
<p>最终，我离开了Cisco。经过一个短暂的弯路和挫折之后，我离开了自己生活了七八年的城市，离开了熟悉的家人朋友，为了自己的一点点暂时还不切实际的想法，去往远方的城市。感觉就像是很多年前上大学时一样，只不过是放大了十倍的离别。<a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1251422699621978113?s=20">离开所熟悉的一切，在陌生的地方认识陌生人</a>。?</p>
<p>我真的好想念我的小宝贝呀。</p>
<h3 id="赛点"><a href="#赛点" class="headerlink" title="赛点"></a>赛点</h3><p>网球比赛中，如果发出一个球刚好碰在网上，如果球没过网，你输了，如果球过网了，你赢了。这完全取决于运气。</p>
<p>——《赛末点》</p>
<p>还在上学的时候，看过斯嘉丽·约翰逊的这部电影。这就好像我现在的人生，完全取决于运气。</p>
<h2 id="关于新的域名"><a href="#关于新的域名" class="headerlink" title="关于新的域名"></a>关于新的域名</h2><p>和旧域名没什么不同，旧域名依旧可以访问并会自动301跳转；</p>
<p>app域名默认就是https的，本身还在HSTS Preload List中，不用担心SSL降级攻击；</p>
<p>RSS订阅依旧是是全文输出；</p>
<p>任何bennythink.com的域名邮箱都将随时停止使用。</p>
<p>小土豆还是那个小土豆，新垣结衣依旧是我的老婆，只不过变得更加迷茫了而已:-</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/04/2020042522081470.jpg"><img src="/images/2020042522081470.jpg" alt="只要看到老婆在笑，就可以抹平一切不安与浮躁"></a></p>
<p>只要看到老婆在笑，就可以抹平一切不安与浮躁?</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/04/25/new-domain-life/index/" data-id="clhp7rtho005hs2qr7273a7oj" data-title="新的域名与未知的生活" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-no-can-do/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/04/22/no-can-do/index/" class="article-date">
  <time class="dt-published" datetime="2020-04-22T00:00:00.000Z" itemprop="datePublished">2020-04-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/04/22/no-can-do/index/">无法改变的人</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>俺建议：总是尽可能影响身边的人。只要能影响一个，够本啦；影响两个，就赚啦 :)【勿以善小而不为】</p>
</blockquote>
<p>很多年前的一个晚上，看到了这句话。自那时起，我就一直在思考，我能够做些什么？于是，我创建了这个博客，去告诉身边的人，有一本很好看的小说叫做《1984》，有一本很值得思考的书叫做《学会提问》，有几部韩国电影非常不错，有一个很有意思的网站叫做维基百科，手把手的教他们如何翻墙访问真正的互联网。有时，甚至在被问到“如何看待xxxx”的时候，我会告诉他们，先看某部电影，先读几本书，先搜集搜集资料，尝试着进行一些思考，也许那时候你就明白了。</p>
<p>有些时候，甚至是，我会面对面的和他们说，和他们描述一些事实，顺带稍微夹带下自己的观点，和他们解释下，以我所了解的情况来看，为什么会发生某些事情，是什么直接促使某件事情，什么是这件事情的根本原因。他们似懂非懂的点点头，并不知道他们是把我的观点当作反驳别人的理由，还是会自己进一步思考，去查阅资料，与我进行合理的辩论，还是会直接丢到脑后：这个人好像一个精神病啊，真是话多。</p>
<p>然后五年过去了。我开始发现，我越来越无法影响身边的人。即使是一些非常亲密的朋友，也时常会感觉到我们活在不同的平行世界里：我关注的事情他们都不关心，他们关注的事情我毫无兴趣；一旦提到某些事情，就好像自己受到了侵犯一样，如丧考妣，开始变得歇斯底里，没有任何逻辑。连正常的交流都无法进行了，更如何无关对错的探讨彼此的观点与想法？</p>
<p>有的时候就在想，为什么啊？明明都是非常聪明人，接受过高等教育，硕士学历，博士学历，英文水平数一数二，能够解得出来复杂的方程，能够计算求解出复杂的数学公式，能够考过很多的等级认证。</p>
<p>我猜，很大一部分原因，是因为我们所接触到的信息是不同的吧。他们看的是新闻联播，微信公众号，新浪微博。遇到什么事情，首先要去微博里面搜一搜，然后去微信里搜一搜。喂，哥哥姐姐们，搜索引擎是做什么的？有的时候，有些聪明并且勤快的小盆友，会懂的用搜索引擎搜索。行吧，用百度也没办法，条件有限。可但是，搜索到的结果，是需要做cross reference的呀，搜索到的东西，很多时候是要去搜英文的呀。搜到了恶搞新闻网站，摘抄了错误的翻译，那不是很丢脸吗。</p>
<p>你跟他们说自由，他们会认为，自由就是胡作非为，无法无天，烧杀劫掠，他们会说，自由不是绝对的。呵呵，他们以为的自由是原始社会的肆无忌惮吧；你跟他们说墙，他们会说墙保护了我们，他们会用一百个理由说出墙存在的必要，却丝毫意识不到获取信息是基本人权；你跟他们说其他人被xxx，他们会说，被xxx的又不是你；你跟他们说你要走，你要离开这里，他们会说外面并不比里面好，他们会说其他国家疫情怎样怎样，他们会说阶级固化，改变不了什么；你跟他们说你思考了很久，你在内疚，你很难过，你在为历史而流泪，你在想为什么自己不能够做的更多，他们会变得好像很关心你一样，但是他们却并不会去思考你为什么流泪，他们会说：想得太多，活得很累，难得糊涂。可是我想活得明白啊！我不想不明不白的过完这一生啊！</p>
<p>感觉就像是，我们对于“自由”这两字的定义就是不同的。感觉就像是，我们对于很多词语的理解就是不同的。想了想，这不就是“新话的原则”吗？词汇越来越少，字典越来越薄。既然有了good，为什么还需要有bad？</p>
<p>他们不会去在乎其他的什么的，他们只想过好自己的小日子，只想努力赚钱，养家糊口。是啊，我也想这样。谁不想呢？我也很想平静静静地活下去啊，我也喜欢岁月静好啊。可是，沉默是最大的伤害。你的沉默、你的无动于衷，最终会演变成权力肆意扩张的方式，最终会害到自己。</p>
<p>这些都是我的朋友，接受过高等教育、手里有着很多资质证书的年轻人。</p>
<p> </p>
<p><strong>もう やめる、もう疲れた。何もしない、何も求めない。</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/04/22/no-can-do/index/" data-id="clhp7rths005ts2qrachy8peg" data-title="无法改变的人" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-from-pyhon-to-go/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/08/from-pyhon-to-go/index/" class="article-date">
  <time class="dt-published" datetime="2020-03-08T00:00:00.000Z" itemprop="datePublished">2020-03-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/08/from-pyhon-to-go/index/">Python程序员的Golang学习笔记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>之前在Cisco的时候，我是一名披着网络工程师头衔的后端程序员，一直使用的主力语言是Python。然后在春节前后开始学习Go，?了一年多的想法终于付出了行动，也终于努力取得了一些小成果——和<a target="_blank" rel="noopener" href="https://nova.moe/">Nova大佬?‍♂️</a>一起创造了<a target="_blank" rel="noopener" href="https://github.com/webp-sh/webp_server_go">WebP Server Go</a></p>
<p>下面的内容就以一个Python程序员的观点与视角去介绍、了解Golang，某些地方可能描述不准确或有错误，还望纠正。内容可能并无法方方面面的覆盖Golang的各种细节，只是方便从Python过来的程序员迅速上手Go。</p>
<h2 id="为啥要学习Golang，Golang与Python有何不同"><a href="#为啥要学习Golang，Golang与Python有何不同" class="headerlink" title="为啥要学习Golang，Golang与Python有何不同"></a>为啥要学习Golang，Golang与Python有何不同</h2><p>每个人学习某种语言都有自己的一些原因，对于我本人而言，一个非常重要的原因是，如果只会一门语言，那是不是说出去有点太寒碜了？JavaScript的话，其实也算会，但是毕竟是做后端的，NodeJS还真就不太行，各种前端框架也不太熟悉。</p>
<p>那既然想多学一门语言，为什么又偏偏选择Go，而不是Java，C&#x2F;C++等久经沙场的语言呢？</p>
<p>我的一个考量因素是，Golang拥有比较强的交叉编译能力，性能要好一些。尽管它还很年轻，2009年才正式发行，但是看看出身吧。出身豪门，还努力，这真是励志呢。</p>
<p>好吧，废话少说，先说Python吧。Python是一门动态的、强类型的脚本语言；Golang是一门静态的、强类型的编译语言，Golang天生支持并发，没有GIL锁</p>
<p>编程语言的基础都是数据类型，就像人类语言的基础是词汇一样。下面就从数据类型开始说起吧。</p>
<h2 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h2><h3 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h3><p>Python的数值类型就太简单了，直接一个int和float，长度什么的完全看内存。</p>
<p>Gol就有些不同，数字、浮点，包含有符号和无符号两种类型，同时可选不同大小，如int8，int16等，是不是有点回想起了上学时试卷上C语言溢出的问题？</p>
<p>Int32就是rune，rune就是utf-8的code point</p>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p>Python的字符串用单引号、双引号、三单、三双都可以表示，从含义上来说是没有区别的。</p>
<p>Go的字符串要复杂一些，有以下情况：</p>
<p>使用双引号表示，<code>\n</code>等字符会被解释为换行符；</p>
<p>原生字符串，使用反引号``表示，类似Python中的<code>r</code>前缀，其中的<code>\n</code>等字符就是表示该字符，而不是换行符，并且反引号表示的字符串可以任意换行；</p>
<p>单引号表示rune literal，和C语言中的char基本差不多（比如A就是65，还记得吧）</p>
<p>观察以下代码</p>
<p>var eng &#x3D; “abc”<br>var chs &#x3D; “你好吗”</p>
<p>fmt.Println(len(eng))<br>fmt.Println(len(chs))</p>
<p>输出分别为3和9。</p>
<p>不同于Python，python中这两者返回值都会是3，因为一共就3个字符嘛，管你中文英文的；golang中<code>len</code>表示字节数，由于在UTF-8中文使用三子节表示，所以三个汉字对应为9。</p>
<p>如要实现类似Python中的len，那么需要使用<code>utf8.RuneCountInString(eng)</code></p>
<p>由于这一点的不同，在遍历时也会有类似的问题。一个需要注意的事情就是，遍历的核心是要准确的“切割”每个字，所以在<code>chs</code>这个字符串中，要遍历三次。</p>
<p>遍历字符串，用range循环的话</p>
<p>for k, v :&#x3D; range chs {<br>fmt.Println( k, v)<br>}</p>
<p>循环会进行3次，因为一共时三个字；k表示索引，v的值实际上是“一串数字“，而不是我们预期的单个字符“你”。可以用string转换，或者<code>%c</code>量词</p>
<p>用下标的话，按照常规的想法，我们会这样做</p>
<p>for i :&#x3D; 0; i &lt; len(chs); i++ {<br>fmt.Println( chs[i])<br>}</p>
<p>❌❌❌实际上循环会进行9次，这就错了</p>
<p>正确的姿势应该是转换为rune数组</p>
<p>var c &#x3D; []rune(chs)<br>for i :&#x3D; 0; i &lt; len(c); i++ {<br>fmt.Println(c[i])<br>}</p>
<p>这样就是三次循环了。或者这样做切片</p>
<p>for i :&#x3D; 0; i &lt; len(chs); {<br>r, size :&#x3D; utf8.DecodeRuneInString(chs[i:])<br>i +&#x3D; size<br>fmt.Println(string(r))<br>}</p>
<p><code>DecodeRuneInString</code>会把字符串解码成“数字”。</p>
<p>是不是觉得很懵圈，这是什么垃圾玩意！哎，反正用<code>range</code>就没毛病了。</p>
<p>如果要取第一个字“你”，用<code>chs[0]</code>是错误的，用<code>chs[0]</code>实际上访问的是前8个字节，对于ASCII字符来说自然没问题，但是其他字符就有问题了。</p>
<p>所以要取第一个字符咋办啊？转换为rune数组啊</p>
<p>var c &#x3D; []rune(chs)<br>fmt.Println(c[0])</p>
<p>如果要取最后一个字符，不可以像Python一样用-1，要用<code>c[len(c)-1]</code></p>
<p>参考阅读 <a target="_blank" rel="noopener" href="https://berryjam.github.io/2018/03/%E4%BB%8Egolang%E5%AD%97%E7%AC%A6%E4%B8%B2string%E9%81%8D%E5%8E%86%E8%AF%B4%E8%B5%B7/">《从golang字符串string遍历说起：聊聊go语言的Strings、bytes、runes和字符》</a></p>
<p>字符串常见操作，如搜索、替换、比较基本上都包含在了strings包中；</p>
<p>类型转换，包含在<code>strconv</code>中，如：</p>
<p><code>Atoi</code> 字符串转数字，<code>Itoa</code>数字转字符串</p>
<p>或者更通用，用Format数字转字符串、Parse字符串转数字类型，举例如下，注意返回两个制，第二个是err</p>
<p>fmt.Println(strconv.ParseInt(“4567”,10,0))<br>fmt.Println(strconv.ParseInt(“10”,2,0))<br>fmt.Println(strconv.FormatInt(1234,10))</p>
<p>第二个参数<code>base</code>为进制，</p>
<p>一般的，<code>base</code> 的取值为 2~36，如果 <code>base</code> 的值为 0，则会根据字符串的前缀来确定 <code>base</code> 的值：”0x” 表示 16 进制； “0” 表示 8 进制；否则就是 10 进制。</p>
<p>第三个参数<code>bitSize</code> 表示结果的位宽（包括符号位），0 表示最大位宽。8就是int8</p>
<p>转个类型都要这么多参数，记不住咋办！，知道自己在干嘛的话，无脑00吧（(￣◇￣;)既然都无脑了，可能也不知道自己在干嘛……</p>
<p>同理，也有<code>ParseFloat</code>，用法与这个基本一致。</p>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><p>Python中没有常量的概念，我们一般用大写表示“常量”。</p>
<p>Golang中使用<code>const</code>定义常量，如 <code>const pi = 3.14</code>，定义多个常量可以这样</p>
<p>const (<br>  a &#x3D; 1<br>  b<br>  c &#x3D; 3<br>  d<br>)</p>
<p>b和d留空，意味着会取它上面的那个常量的值，也就是1和3</p>
<p>使用常量生成器iota可以生成相关值的常量，如下代码</p>
<p>const (<br>  a &#x3D; iota<br>  b<br>  c<br>  d<br>)</p>
<p>值分别为0123</p>
<p>甚至还可以这么玩，这就是有点神仙操作了</p>
<p>const (<br>  _ &#x3D; 1 &lt;&lt; (iota * 10)<br>  KiB<br>  MiB<br>  GiB<br>)</p>
<p>顺便说一句，定义变量的时候，<code>a:=3</code>,  <code>var a=3</code>, <code>var a int</code>的区别咱就不说了。</p>
<h2 id="复合数据类型"><a href="#复合数据类型" class="headerlink" title="复合数据类型"></a>复合数据类型</h2><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>Python中，其实也是有array这种类型的，类型都是固定的，而且还可变</p>
<p>from array import array</p>
<p>a &#x3D; array(‘l’, [1, 2, 3, 4, 5])<br>a.append(5)<br>a[3] &#x3D; 999</p>
<p>在上述代码中，每一个元素都要是整型。一般来说，我们会用list来表示数组，只不过list的元素可以是不同类型。</p>
<p>Golang中，数组可以这么用，基本上看下就明白</p>
<p>var arr1 &#x3D; [3]int{1, 2, 3}<br>var arr2 &#x3D; […]string{“a”, “b”, “c”}<br>var arr3 &#x3D; [10]int{4: -1, 3: 5}</p>
<p>第三个声明表示，第5个元素，值是-1，第4个元素，值是5，剩下的都是0</p>
<p>注意，数组长度也是类型的一部分，也就是说<code>[3]int</code>和<code>[4]int</code>是不同的类型。数组的长度必须在编译时就可以确定，比如说是常量（不能是变量）</p>
<p>数组长度是不可变的。所以别想着append了，不行的?</p>
<h3 id="切片slice"><a href="#切片slice" class="headerlink" title="切片slice"></a>切片slice</h3><p>如果想要一种长度可变的“数组”，我们就需要slice了。Slice这玩意才有点像Python的列表，只不过Slice的元素类型也要保持一致的。</p>
<p>那么如何创建slice呢？一般来说有这么几种做法：</p>
<ol>
<li>从已有数组做切片，比如说<code>var s1 = arr2[:2]</code> 需要注意的是，创建一个数组的slice，就相当于创建了一个别名，改掉slice，arr也会变。</li>
<li>用make <code>make([]int, 3, 40)</code> 3是len，40是容量。容量这个概念很容易混淆，这个切片难道塞满了40个元素就不能再塞吗？其实是能的，这个40只是为了方便内存分配和优化的。</li>
<li>用定义创建 <code>var slice = []int&#123;1, 2, 3&#125;</code>，空slice可以<code>var sli []int</code></li>
</ol>
<h3 id="Slice的copy"><a href="#Slice的copy" class="headerlink" title="Slice的copy"></a>Slice的copy</h3><p>Slice的copy很魔性，究竟有多魔性呢？我们正常以为的copy，就是取而代之。但是slice的copy不是，copy会<strong>把dst的元素依顺序复制到src中，覆盖src原有元素</strong>（如果长度够的话），<strong>剩下元素保持不变</strong>。</p>
<p>关于slice的容量，如果通过make函数创建Slice的时候指定了容量参数，那内存管理器会根据指定的容量的值先划分一块内存空间，然后才在其中存放有数组元素，多余部分处于空闲状态，在Slice上追加元素的时候，首先会放到这块空闲的内存中，如果添加的参数个数超过了容量值，内存管理器会重新划分一块容量值为原容量值*2大小的内存空间，依次类推。这个机制的好处在能够提升运算性能，因为内存的重新划分会降低性能。</p>
<p>Slice不可以做比较。</p>
<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><p>Python中键值对的结构被称作字典dictionary，类似的数据类型还有PHP中的关联数组，实现方式为散列表，是一种用空间换时间的方便高效率查找的数据结构。</p>
<p>Go中对应的数据结构叫做map。</p>
<p>Python字典的键类型必须是hashable的，但是类型可以不同；值的没有限制，是啥都行。</p>
<p>Go中map的键值需要是同一类型的，我们如下定义，就意味着key是字符串，value是整型数字</p>
<p>var m1 &#x3D; make(map[string]int)</p>
<p>或者直接这么用</p>
<p>var m2 &#x3D; map[string]int{<br>  “test1”: 1,<br>  “test2”: 2,<br>}</p>
<p>可以这么访问<code>m1[&quot;test&quot;] = 3</code>，这个方法是安全的，不会报错。这里和Python的快速失败就不一样了。</p>
<p>如果key不在，那么会返回value的类型的默认值，对于int来说就是0，对于string来说就是””</p>
<p>这就让人纠结了，真是的，如果要看Key在不在map中，就要多值返回，看第二个变量</p>
<p>if _, ok :&#x3D; m2[“key”]; ok {<br>&#x2F;&#x2F;存在<br>}</p>
<p>遍历map可以这么玩</p>
<p>for k, v :&#x3D; range m2 {<br>  fmt.Printf(“%s -&gt; %d\n”, k, v)<br>}</p>
<p>map不可以用&#x3D;&#x3D;做比较</p>
<h3 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h3><p>和C语言的差不多，不过遵循大写导出的规则。在进行序列话、反序列化的时候要注意</p>
<p>type Emp struct {<br>  ID int<br>  Name string<br>}</p>
<p>这么用</p>
<p>e1 :&#x3D; Emp{<br>  ID: 0,<br>  Name: “11a”,<br>}</p>
<p>结构体也可以嵌套，元素可以匿名（只有类型没有变量名）</p>
<h2 id="JSON序列化、反序列化"><a href="#JSON序列化、反序列化" class="headerlink" title="JSON序列化、反序列化"></a>JSON序列化、反序列化</h2><p>Python中，将object转换成字符串的使用<code>json.dumps</code>，称作序列化；将字符串转换为object的使用<code>json.loads</code>，称作反序列化。另外，Python还提供了两个类似的方法，分别为<code>json.dump</code>和json.load，只不过操作对象是文件。</p>
<p>Go中，如果想要序列化、反序列化，对应的操作分别为<code>json.Marshal()</code>和<code>json.Unmarshal()</code></p>
<p>另外，struct中只有大写的列才可以被序列化，也就是大写导出的原则</p>
<p>type Message struct {<br>  Name string<br>  Body string<br>  Time int64<br>}<br>m :&#x3D; Message{“Alice”, “Hello”, 1294706395881547000}<br>b, _ :&#x3D; json.Marshal(m)<br>fmt.Println(b)</p>
<p>反序列化，需要先根据json的格式，定义好相应的struct</p>
<p>json_str :&#x3D; `{“Name”:”Alice”,”Body”:”Hello”,”Time”:123}`<br>j :&#x3D; []byte(json_str)<br>var m Message<br>err :&#x3D; json.Unmarshal(j, &amp;m)<br>fmt.Println(m)</p>
<p>但是序列化和反序列化，要求struct为大写，那到json里的key就大写了，有的时候我们不希望这样，这时可以使用struct tags</p>
<p>type Message struct {<br>  Name string `json:”name”` &#x2F;&#x2F;自定义字段名称<br>  Body string `json:”body,omitempty”` &#x2F;&#x2F;当值为空时，不序列化这个字段<br>  Time int64 `json:”-“` &#x2F;&#x2F;跳过这个字段<br>}</p>
<p>m :&#x3D; Message{“Alice”, “Hello”, 1234}<br>b, _ :&#x3D; json.Marshal(m)<br>fmt.Println(string(b))</p>
<p>假如想反序列化任意数据，那么只能用接口了。毕竟是静态语言，不能在运行时才确定嘛。</p>
<p>b :&#x3D; []byte(`{“Name”:”Wednesday”,”Age”:6,”Parents”:[“Gomez”,”Morticia”]}`)<br>var f interface{}<br>err :&#x3D; json.Unmarshal(b, &amp;f)<br>m :&#x3D; f.(map[string]interface{})<br>k :&#x3D; m[“Parents”].([]interface{})<br>fmt.Println(m)<br>fmt.Println(k[0])</p>
<p>同样的，如果要用文件进行序列化、反序列化操作，需要用<code>Decoder</code>和<code>Encoder</code></p>
<p>type Post struct {<br>  Name string `json:”name”`<br>  Age int `json:”age”`<br>}<br>jsonFile, err :&#x3D; os.Open(“post.json”)<br>if err !&#x3D; nil {<br>  fmt.Println(“Error opening json file:”, err)<br>  return<br>}</p>
<p>defer jsonFile.Close()<br>decoder :&#x3D; json.NewDecoder(jsonFile)</p>
<p>var post Post<br>err &#x3D; decoder.Decode(&amp;post)</p>
<p>fmt.Println(post)</p>
<p>参考阅读</p>
<p><a target="_blank" rel="noopener" href="https://sanyuesha.com/2018/05/07/go-json/">https://sanyuesha.com/2018/05/07/go-json/</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5d2eb9ae518825451f65f751">https://juejin.im/post/5d2eb9ae518825451f65f751</a></p>
<h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><p>Python的cli输入输出用的是<code>input</code>和<code>print</code>，golang用输出用的是<code>fmt.Print</code>等系列，输入要复杂点，有这些方法</p>
<p>reader :&#x3D; bufio.NewReader(os.Stdin)<br>line, _, _ :&#x3D; reader.ReadLine()<br>&#x2F;&#x2F;或者ReadString<br>text, _ :&#x3D; reader.ReadString(‘\n’)</p>
<p>简单点直接用<code>fmt.Scan</code>也可以。</p>
<p>读取单个字符可以用<code>reader.ReadRune()</code></p>
<p>或者可以用scanner</p>
<p>scanner :&#x3D; bufio.NewScanner(os.Stdin)<br>scanner.Scan()<br>fmt.Println(scanner.Text())</p>
<p>哎妈呀太多了，反正我是记不住……估计是用的少吧</p>
<h2 id="第三方扩展的使用"><a href="#第三方扩展的使用" class="headerlink" title="第三方扩展的使用"></a>第三方扩展的使用</h2><h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><p>在Python中，使用pip来安装标准库中没有的扩展，基本语法就是<code>pip install package_name</code>，基本上不需要操心什么。就这么一句话，就完事，就够了，嗯，简单……</p>
<h3 id="Golang"><a href="#Golang" class="headerlink" title="Golang"></a>Golang</h3><p>在golang中，使用go get来安装第三方扩展，但是情况要特殊一些。</p>
<p>Golang依赖一个名为<code>GOPATH</code>的环境变量，默认<code>GOPATH</code>是<code>~/go</code>。</p>
<ul>
<li>未使用go module</li>
</ul>
<p>在未使用go module的情况下，go get会把扩展下载到<code>~/go/src</code>下</p>
<ul>
<li>使用go module</li>
</ul>
<p>在1.11之后才开始支持gomodule，同时需要设置<code>GO111MODULE=on</code>或<code>auto</code></p>
<p>在开启并使用gomodule的情况下，扩展会被下载到<code>~/go/pkg/mod</code>下；</p>
<p>同时，你的项目需要一个<code>go.mod</code>文件来指明需要哪些扩展。</p>
<p>如果使用GoLand的话，preferences-go-go modules即可开启。</p>
<p>与Python类似，golang的import查找路径也是系统标准库-<code>GOPATH/src</code>或<code>pkg/mod</code>，当前工作目录。</p>
<p>使用的话</p>
<p>go get <a target="_blank" rel="noopener" href="https://github.com/360EntSecGroup-Skylar/excelize">https://github.com/360EntSecGroup-Skylar/excelize</a></p>
<p>#如果需要特定版本<br>go get <a target="_blank" rel="noopener" href="https://github.com/360EntSecGroup-Skylar/excelize/v2">https://github.com/360EntSecGroup-Skylar/excelize/v2</a><br>go get <a target="_blank" rel="noopener" href="https://github.com/360EntSecGroup-Skylar/excelize@v1.1.1">https://github.com/360EntSecGroup-Skylar/excelize@v1.1.1</a></p>
<p>#甚至可以特定commit<br>go get <a target="_blank" rel="noopener" href="https://github.com/360EntSecGroup-Skylar/excelize@v1.1.1@e3702bed2">https://github.com/360EntSecGroup-Skylar/excelize@v1.1.1@e3702bed2</a></p>
<p>前几天GO发布了1.14，go module终于被扶正了。</p>
<p>另外，对于中国程序员来说，弄个Go Proxy还是很有必要的，毕竟都是折翼天使啊</p>
<p>export GOPROXY&#x3D;<a target="_blank" rel="noopener" href="https://goproxy.cn/">https://goproxy.cn</a></p>
<h2 id="包的概念"><a href="#包的概念" class="headerlink" title="包的概念"></a>包的概念</h2><h3 id="Python-1"><a href="#Python-1" class="headerlink" title="Python"></a>Python</h3><p>Python中，一个目录就是一个包，Python 3的导入使用absolute import，基本语法如下</p>
<p>import os, platform<br>import os as myos<br>from os import *<br>from os import uname, path as path2</p>
<p>Python中，包的名字就是目录+文件名，按照层级依次导入。比较无脑，不用思考，就是和常识相符的</p>
<h3 id="Golang-1"><a href="#Golang-1" class="headerlink" title="Golang"></a>Golang</h3><p>import “fmt”<br>import “os”<br>import mybytes “bytes”</p>
<p>import (<br>  “strings”<br>  “strconv”<br>)</p>
<p>能被import的必须是可导出的，换句话说，首字母为大写</p>
<p>Golang中，包的名字是由package关键字声明的，与文件名、路径名无关。</p>
<p>目录的名字只与import时相关，package的名字与调用时有关。文件名与什么都无关。</p>
<p>同一个包的话，直接写里面大写的函数就能导入进来了，不需要傻乎乎的再<code>import xxx</code></p>
<p>另外，注意下<code>go run xxx.go</code> 、<code>go run a.go b.go</code>和<code>go run .</code>哦</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>由于Python是动态语言，所以函数参数可以不指定类型，返回值也可以不指定类型。想怎么返回就怎么返回，Type Annotation也只是警告，实际上并没有强制报错的机制。</p>
<p>Golang是静态语言，变量的类型要在编译时就确认，因此参数和返回值是要写在原型中的，错了直接编译都过不去。</p>
<p>最简单的示例</p>
<p>func fun(p1, p2 int, p3 string) (string, bool) {<br>  fmt.Println(p1, p2, p3)<br>  return p3, true<br>}</p>
<p>p1和p2都是int，p3是string，返回值为string和bool。无参和无返回值自己脑补吧。另外返回值也可以带参数哦，直接空return就行了</p>
<p>func fun(p1, p2 int) (r1, r2 int) {<br>  r1 &#x3D; p1 * 10<br>  r2 &#x3D; p2*10 + r1<br>  return<br>}</p>
<p>golang的函数参数既不支持默认参数，也不支持位置参数。但是可以用变长参数</p>
<p>func fun(p1 int, p2 …int)</p>
<p>调用时形如<code>fun(1, 2, 3, 4, 5)</code>，2345都是p2的，p2是个int的slice</p>
<p>Golang的参数都是传值的。</p>
<p>数字、字符串、数组、struct是非引用类型，所以函数中修改不会把原有值给改掉；指针、slice、map、chan是引用类型的，你改了，那就跟着变了。</p>
<p>为了避免slice和map的这个特性，只能想办法做浅拷贝或深拷贝了。当然最好还是避免吧</p>
<h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><h3 id="Python-2"><a href="#Python-2" class="headerlink" title="Python"></a>Python</h3><p>Python的异常机制就是大家都会的<code>try…except…finally</code>，可能有的时候还需要else，里面配合着if-else, for-else,while-else，简直完美啊哈哈哈?。这个很简单，人人都会……</p>
<h3 id="Golang-2"><a href="#Golang-2" class="headerlink" title="Golang"></a>Golang</h3><p>可惜的是，golang中并没有如此明确的异常捕获机制。</p>
<p>在golang中，有很多函数调用都会返回两个值，第一个是期待的结果，第二个是<code>err</code>，如果<code>err==nil</code>，则说明没有发生错误。</p>
<p>类似的，golang中有一个<code>defer</code>、<code>panic</code>、<code>recover</code>，倒是有点像传统上的<code>try…except…finally</code>。</p>
<p>go 的 defer 语句是用来延迟执行函数的，而且延迟发生在调用函数 return 之后，比如</p>
<p>func a() int {<br>  defer b()<br>  return 0<br>}</p>
<p><code>return 0</code>执行完了之后，b才执行。</p>
<p><code>defer</code>一般用于清理资源，功能上Python里的<code>with</code></p>
<p><code>recover</code>则更像是Python中的<code>except</code>，<code>panic</code>则是<code>raise</code></p>
<p>func fun() {<br>  if ok :&#x3D; recover(); ok !&#x3D; nil {<br>    fmt.Println(“recover”)<br>  }<br>}</p>
<p>func main() {<br>  defer fun()<br>  panic(“error”)<br>}</p>
<p>多个defer，defer从下到上执行。</p>
<p>这玩意到底咋用，反正记住了，defer是这个函数执行完了，再走的它。recover举一个例子</p>
<p><img src="/images/2020030819595467.png"></p>
<p>Panic就不说了。</p>
<h2 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h2><p>Python中如果要进行并发操作，我们一般会根据情况应用多进程、多线程，甚至会用上celery这类。Golang中，我们用go routine，用起来很简单，函数前加一个go关键字就可以了。</p>
<p>func compute(value int) {<br>  for i :&#x3D; 0; i &lt; value; i++ {<br>    time.Sleep(time.Second)<br>    fmt.Println(i)<br>  }<br>}</p>
<p>func main() {<br>  fmt.Println(“Goroutine Tutorial”)</p>
<p>  go compute(3)<br>  go compute(3)</p>
<p>  fmt.Scanln()<br>}</p>
<p>当然，并发之后的这些goroutine如何控制，那就是context的事情了。咱也暂时不明白</p>
<h3 id="通道channel"><a href="#通道channel" class="headerlink" title="通道channel"></a>通道channel</h3><p>如果goroutine想要通信，那么就要用channel啦。</p>
<p>func CalculateValue(values chan int) {<br>  value :&#x3D; rand.Intn(10)<br>  fmt.Println(“Calculated Random Value: {}”, value)<br>  values &lt;- value<br>}</p>
<p>func main() {<br>  fmt.Println(“Go Channel Tutorial”)</p>
<p>  values :&#x3D; make(chan int)<br>  defer close(values)</p>
<p>  go CalculateValue(values)</p>
<p>  value :&#x3D; &lt;-values<br>  fmt.Println(value)<br>}</p>
<p>总结下</p>
<p>&#x2F;&#x2F; 创建int类型的通道<br>myChannel :&#x3D; make(chan int)</p>
<p>&#x2F;&#x2F;把通道作为参数调用<br>go CalculateValue(myChannel)</p>
<p>&#x2F;&#x2F; 把value变量的值送给chan<br>channel &lt;- value</p>
<p>&#x2F;&#x2F;取值，复制给value变量<br>value :&#x3D; &lt;- channel</p>
<p>需要注意的是，这种channel是阻塞的，被称作“无缓冲通道”。解释一下，默认的无缓冲通道，一个go routine向通道中发送了数据，那么这个goroutine就会被阻塞，下面的代码都会等待执行，直到另外一个goroutine从通道中取值为止。同理，如果一方先收了，那么也会阻塞直到另外的goroutine发送，因此无缓冲通道也可以称作同步通道。</p>
<p>那咋办啊，假如还想射后不理，那就需要用到缓冲通道。</p>
<p>bufferedChannel :&#x3D; make(chan int, 3)</p>
<p>满了之后，当然就是继续阻塞啦。</p>
<p>巧妙的，我利用了通道的阻塞的这个特性，为WebP Server增加Prefetch使用CPU核心数的限制，注意看23、24和42行，也不知道这算不算是正经的用法</p>
<p><img src="/images/2020030819595599.png"></p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>Go 语言提供了另外一种数据类型即接口，它把所有的具有共性的方法定义在一起，任何其他类型只要实现了这些方法就是实现了这个接口。</p>
<p>反正我是没怎么看懂……</p>
<p>package main</p>
<p>import “fmt”</p>
<p>&#x2F;&#x2F; 实现一个鸭子<br>type Duck interface {<br>  Swim() &#x2F;&#x2F; 游泳<br>  Feathers() &#x2F;&#x2F; 羽毛<br>}</p>
<p>&#x2F;&#x2F; 实现一个会叫的鸭子，因为嵌入了Duck，所以也有swim和feathers方法<br>type QuackDuck interface {<br>  Quack() &#x2F;&#x2F; 嘎嘎叫<br>  Duck &#x2F;&#x2F; 嵌入接口<br>}</p>
<p>&#x2F;&#x2F;真实鸭子的实现<br>type RealDuck struct{}</p>
<p>func (RealDuck) Swim() {<br>  fmt.Println(“用鸭璞向后划水”)<br>}</p>
<p>func (RealDuck) Feathers() {<br>  fmt.Println(“遇到水也不会湿的羽毛”)<br>}</p>
<p>func (RealDuck) Quack() {<br>  fmt.Println(“嘎~ 嘎~ 嘎~”)<br>}</p>
<p>&#x2F;&#x2F; 玩具鸭的实现<br>type ToyDuck struct{}</p>
<p>func (ToyDuck) Swim() {<br>  fmt.Println(“以固定的速度向前移动”)<br>}</p>
<p>func (ToyDuck) Feathers() {<br>  fmt.Println(“白色的固定的塑料羽毛”)<br>}</p>
<p>func main() {<br>var duck1 Duck<br>duck1 &#x3D; RealDuck{}<br>duck1.Swim()<br>duck1.Feathers()</p>
<p>&#x2F;&#x2F;duck1.Quack() &#x2F;&#x2F;报错，Duck没有Quack方法</p>
<p>var duck2 Duck<br>duck2 &#x3D; ToyDuck{}<br>duck2.Swim()<br>duck2.Feathers()<br>&#x2F;&#x2F;duck2.Quack() &#x2F;&#x2F;报错，Duck没有Quack方法</p>
<p>var duck3 QuackDuck<br>duck3 &#x3D; RealDuck{}<br>duck3.Swim()<br>duck3.Feathers()<br>duck3.Quack()</p>
<p>var duck4 QuackDuck<br>duck4 &#x3D; ToyDuck{} &#x2F;&#x2F;类型错误<br>duck4.Swim()<br>duck4.Feathers()<br>duck4.Quack()<br>}</p>
<p><a target="_blank" rel="noopener" href="https://blog.biezhi.me/2019/01/learn-golang-interfaces.html">https://blog.biezhi.me/2019/01/learn-golang-interfaces.html</a></p>
<h2 id="OOP"><a href="#OOP" class="headerlink" title="OOP"></a>OOP</h2><p>Golang其实并不是那么严格的面向对象的语言，不过struct中嵌入其他struct，就很接近class这个概念了。准确的来说，这种特性是组合，而不是继承。</p>
<p>定义方法时，格式是这样的 func (结构体名) 方法名{}，比如<code>func (c Cat) sleep()</code></p>
<p>package main</p>
<p>import (<br>  “fmt”<br>  “strconv”<br>)</p>
<p>&#x2F;&#x2F; 动物类<br>type Animal struct {<br>  name string<br>  subject string<br>}</p>
<p>&#x2F;&#x2F; 动物的公共方法<br>func (a *Animal) eat(food string) {<br>  fmt.Println(a.name + “喜欢吃：” + food + “,它属于:” + a.subject)<br>}</p>
<p>&#x2F;&#x2F; 猫类，继承动物类<br>type Cat struct {<br>  &#x2F;&#x2F; 继承动物的属性和方法<br>  Animal<br>  &#x2F;&#x2F; 猫自己的属性<br>  age int<br>}</p>
<p>&#x2F;&#x2F; 猫类独有的方法<br>func (c Cat) sleep() {<br>  fmt.Println(c.name + “ 今年” + strconv.Itoa(c.age) + “岁了,特别喜欢睡觉”)<br>}</p>
<p>func main() {<br>  &#x2F;&#x2F; 创建一个动物类<br>  animal :&#x3D; Animal{name: “动物”, subject: “动物科”}<br>  animal.eat(“肉”)</p>
<p>  &#x2F;&#x2F; 创建一个猫类<br>  cat :&#x3D; Cat{Animal: Animal{name: “咪咪”, subject: “猫科”}, age: 1}<br>  cat.eat(“鱼”)<br>  cat.sleep()<br>}</p>
<p>反正我也没咋弄明白……参考阅读</p>
<p><a target="_blank" rel="noopener" href="https://learnku.com/articles/32295">https://learnku.com/articles/32295</a></p>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p>Python中，对文件进行操作，使用open打开，配合不同的操作模式，然后使用read、write方法进行读写。</p>
<p>Golang中，对文件操作最简单的可以使用io&#x2F;ioutil</p>
<p>&#x2F;&#x2F;读：<br>data, _ :&#x3D; ioutil.ReadFile(“test.txt”)<br>&#x2F;&#x2F;写：<br>content :&#x3D; []byte(“hello word 你好真好”)<br>err :&#x3D; ioutil.WriteFile(“test.txt”, content, 0755)<br>if err !&#x3D; nil {<br>  fmt.Println(err)<br>}</p>
<p>文件不存在，会创建；存在，覆盖。</p>
<p>如果我们想追加的话，可以这样</p>
<p>f, _ :&#x3D; os.OpenFile(“test.txt”, os.O_APPEND|os.O_WRONLY, 0777)<br>f.WriteString(“hello1234”)<br>f.Close()</p>
<p>第二个参数指定文件模式。想要一行一行的读，那么用bufio里的Read系列（<code>ReadBytes</code>、<code>ReadString</code> 和 <code>ReadLine</code>）就可以了，不过要特别注意换行符的问题</p>
<p>f, _ :&#x3D; os.Open(“test.txt”)<br>b:&#x3D;bufio.NewReader(f)<br>for {<br>  a, _, c :&#x3D; b.ReadLine()<br>  if c &#x3D;&#x3D; io.EOF {<br>    break<br>  }<br>fmt.Println(string(a))<br>}</p>
<p>当然了， 有一个非常严重的问题：golang假定所读的文件都是UTF-8编码的，所以在windows下如果这么读一个记事本创建的文本文档，那自然就乱码了。</p>
<p>需要这几个库</p>
<p>golang.org&#x2F;x&#x2F;text&#x2F;transform</p>
<p>golang.org&#x2F;x&#x2F;text&#x2F;encoding&#x2F;simplifiedchines</p>
<p>可以用<code>transform.NewReader</code>进行操作</p>
<p>f, _ :&#x3D; os.Open(“test.txt”)<br>r :&#x3D; transform.NewReader(f, simplifiedchinese.GBK.NewDecoder())<br>d, _ :&#x3D; ioutil.ReadAll(r)<br>fmt.Println(string(d))</p>
<p>也可以这样先读成bytes，然后再转</p>
<p>b, _ :&#x3D; ioutil.ReadFile(“test.txt”)<br>reader :&#x3D; transform.NewReader(bytes.NewReader(b), simplifiedchinese.GBK.NewDecoder())<br>d, _ :&#x3D; ioutil.ReadAll(reader)<br>fmt.Println(string(d))</p>
<h2 id="目录操作"><a href="#目录操作" class="headerlink" title="目录操作"></a>目录操作</h2><p>Python中，目录操作，包括创建，重命名，改变权限等可以用os模块，路径相关操作可以用<code>os.path</code>或者是<code>pathlib</code>。</p>
<p>Golang中，对目录操作，基本上也可以应用os模块。</p>
<p>对路径操作，基本上用<code>path/filepath</code>就差不多了</p>
<p>基本上看到就能猜到什么意思。</p>
<p><code>Dir</code>获取目录名，<code>base</code>获取文件名，<code>Join</code>拼接路径，<code>filepath.Separator</code>是换行符，<code>Split</code>把路径分割成文件和目录，<code>Clean</code>规范化路径，去掉多余的&#x2F;什么的</p>
<p>咋获取当前目录啊？<code>os.Args</code>里就有啦。f<code>ilepath.Abs(filepath.Dir(os.Args[0]))</code>就成。</p>
<h2 id="时间日期标准库"><a href="#时间日期标准库" class="headerlink" title="时间日期标准库"></a>时间日期标准库</h2><p>Python中，如果要进行时间相关的操作，一般会应用time标准库。基本上常用的操作就是字符串-时间互相转换，获取当前时间戳，把时间戳转换成日期，把日期转换为时间戳。</p>
<p>Golang中也有一个time库，基本用法总结下</p>
<p>&#x2F;&#x2F;显示当前时间戳<br>time.Now().Unix()</p>
<p>&#x2F;&#x2F;时间戳转换成time结构<br>time.Unix(10,0)</p>
<p>&#x2F;&#x2F;字符串转日期，需要注意Parse在缺少时区信息时，会默认0时区，所以会差8小时<br>time.Parse(“2006-01-02 15:04:05”, “2020-02-01 14:08:00”)</p>
<p>&#x2F;&#x2F;要想不差8小时，那咱就<br>time.ParseInLocation(“2006-01-02 15:04:05”, “2020-02-01 14:08:00”,time.Local)</p>
<p>这就没问题了。<code>2006-01-02 15:04:05</code>是固定格式，类似传统的ymdhms，记不住啊记不住啊！</p>
<p>日期转换为字符串</p>
<p>t.Format(“今天是2006年”)</p>
<p>附带功能</p>
<p><code>time.Now()</code>附带了<code>After</code>、<code>Before</code>、<code>Sub</code>、<code>Add</code>等方法，方便时间运算</p>
<h2 id="执行系统命令"><a href="#执行系统命令" class="headerlink" title="执行系统命令"></a>执行系统命令</h2><p>Python里这个方法很多，<code>os.system()</code>，<code>subprocess</code>等等。Golang有一个<code>exec</code></p>
<p>out, _ :&#x3D; exec.Command(“ls”).Output()<br>fmt.Println(string(out))</p>
<h2 id="Web框架"><a href="#Web框架" class="headerlink" title="Web框架"></a>Web框架</h2><p>在用Python的时候，我一般会选择tornado作为web框架，主要原因就是tornado的性能比较好，支持异步非阻塞，并且可以很方便的通过self来进行各种操作。Golang的web框架也很多，比如说beego，echo，gin。</p>
<p>当然了，golang自带的<code>net/http</code>模块本身本身提供了很多功能，我们可以应用它创建一个web服务器，如下代码即可</p>
<p>func IndexHandler(w http.ResponseWriter, r *http.Request) {<br>  fmt.Fprintln(w, “hello world”)<br>}</p>
<p>func main() {<br>  http.HandleFunc(“&#x2F;“, IndexHandler)<br>  err :&#x3D; http.ListenAndServe(“127.0.0.1:8000”, nil)<br>  fmt.Println(err)<br>}</p>
<p>经过一些纠结，我选择了gin……</p>
<h3 id="基础用法"><a href="#基础用法" class="headerlink" title="基础用法"></a>基础用法</h3><p>package main</p>
<p>import “github.com&#x2F;gin-gonic&#x2F;gin”</p>
<p>func main() {<br>  r :&#x3D; gin.Default()<br>  r.GET(“&#x2F;ping”, func(c *gin.Context) {<br>    c.JSON(200, gin.H{<br>        “message”: “pong”,<br>  })<br> })</p>
<p>  r.Run() &#x2F;&#x2F; listen and serve on 0.0.0.0:8080 (for windows “localhost:8080”)<br>}</p>
<p>这里r.GET就是路由，后面这里用了匿名函数，当然不想用匿名函数也成。</p>
<p>如果要支持其他http方法，那就这样</p>
<p>r.POST(“&#x2F;ping”,ping)</p>
<h3 id="返回数据"><a href="#返回数据" class="headerlink" title="返回数据"></a>返回数据</h3><p><code>c.String, c.JSON等</code></p>
<h3 id="获取url参数"><a href="#获取url参数" class="headerlink" title="获取url参数"></a>获取url参数</h3><ul>
<li>Get参数</li>
</ul>
<p>c.Query(key)</p>
<ul>
<li>post参数</li>
</ul>
<p>c.PostForm(“name”)</p>
<ul>
<li>上传文件</li>
</ul>
<p>file, _ :&#x3D; c.FormFile(“file”)<br>err :&#x3D; c.SaveUploadedFile(file, file.Filename)</p>
<ul>
<li>获取raw body</li>
</ul>
<p>c.GetRawData()</p>
<ul>
<li>静态文件</li>
</ul>
<p>router.Static(“&#x2F;assets”, “.&#x2F;assets”)<br>router.StaticFS(“&#x2F;more_static”, http.Dir(“my_file_system”))<br>router.StaticFile(“&#x2F;favicon.ico”, “.&#x2F;resources&#x2F;favicon.ico”)</p>
<ul>
<li>http重定向</li>
</ul>
<p>c.Redirect(http.StatusMovedPermanently, “<a target="_blank" rel="noopener" href="http://www.google.com/">http://www.google.com/</a>“)</p>
<ul>
<li>路由重定向</li>
</ul>
<p>c.Request.URL.Path &#x3D; “&#x2F;test2”<br>r.HandleContext(c)</p>
<ul>
<li>cookie</li>
</ul>
<p>cookie, err :&#x3D; c.Cookie(“gin_cookie”)<br>c.SetCookie(“gin_cookie”, “test”, 3600, “&#x2F;“, “localhost”, http.SameSiteLaxMode, false, true)</p>
<h2 id="Requests"><a href="#Requests" class="headerlink" title="Requests"></a>Requests</h2><p>Python中，我们一般使用requests获取http资源，当然用urllib也可以，只不过稍微有些繁琐</p>
<p>同理，golang的net&#x2F;http库已经提供了最基础的操作。</p>
<p>resp, _ :&#x3D; http.Get(“<a href="http://example.com/">http://example.com/</a>“)<br>data, _ :&#x3D; ioutil.ReadAll(resp.Body)<br>fmt.Println(string(data))<br>resp.Body.Close()</p>
<p>啊对了，如果返回的是json的话，<code>resp.Body</code>可以直接被<code>Unmarshal</code>的哦</p>
<p>还有一个人封装的grequests，用起来也不错</p>
<p>&#x2F;&#x2F;发get<br>resp, err :&#x3D; grequests.Get(“<a target="_blank" rel="noopener" href="http://httpbin.org/get">http://httpbin.org/get</a>“, nil)<br>if err !&#x3D; nil {<br>  log.Fatalln(“Unable to make request: “, err)<br>}</p>
<p>fmt.Println(resp.String())</p>
<p>&#x2F;&#x2F;发post<br>d :&#x3D; grequests.RequestOptions{<br>Data: map[string]string{“hello”: “world”},<br>}<br>resp, err :&#x3D; grequests.Post(“<a target="_blank" rel="noopener" href="http://httpbin.org/post">http://httpbin.org/post</a>“, &amp;d)<br>if err !&#x3D; nil {<br>  log.Fatalln(“Unable to make request: “, err)<br>}</p>
<p>fmt.Println(resp.String())</p>
<p>文档<a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/levigross/grequests">https://pkg.go.dev/github.com/levigross/grequests</a></p>
<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p>Python连接MySQL我们一般用pymysql，建立连接，获取游标，执行查询。Golang也基本差不多，需要提前安装这个模块<code>go get -u github.com/go-sql-driver/mysql</code></p>
<p>import (<br>“database&#x2F;sql”<br>“fmt”</p>
<p>_ “github.com&#x2F;go-sql-driver&#x2F;mysql”<br>)</p>
<p>建立连接，典型的连接是这样的，当然有些参数是可以省略的。</p>
<p>db, _ :&#x3D; sql.Open(“mysql”, “root:root@tcp(127.0.0.1:3306)&#x2F;test?charset&#x3D;utf8mb4”)<br>defer db.Close()</p>
<p>&#x2F;&#x2F;插入，直接这样参数化查询，返回一个result，一个error<br>db.Exec(“INSERT INTO user VALUES (?,?)”, “Benny”, 18)<br>&#x2F;&#x2F;或者下面这这样用prepare，没啥区别<br>stmt, _ :&#x3D; db.Prepare(“INSERT INTO user VALUES (?,?)”)<br>stmt.Exec(“Amy”, 19)</p>
<p>&#x2F;&#x2F; 删除，可以这么玩<br>db.Exec(“DELETE FROM user WHERE name&#x3D;?”, “Amy”)<br>&#x2F;&#x2F; 修改，我猜你已经猜到了吧<br>db.Exec(“UPDATE user SET age&#x3D;? WHERE name&#x3D;?”, 19, “Benny”)</p>
<p>&#x2F;&#x2F; 查询，Query用于返回结果集，上面的Exec就不能在这里用了，可以想象成Python的execute之后再fetch<br>data, _ :&#x3D; db.Query(“select version();”)<br>for data.Next() {<br>  var v string<br>  data.Scan(&amp;v)<br>  fmt.Println(v)<br>}</p>
<p>&#x2F;&#x2F; 再举一个例子?，查询一个表的数据，这个时候我们如果定义struct就更好了是吧<br>type User struct {<br>  name string<br>  age int<br>}<br>data, _ :&#x3D; db.Query(“SELECT * FROM user”)<br>var s []User<br>for data.Next() {<br>  var user User<br>  data.Scan(&amp;user.name, &amp;user.age)<br>  s &#x3D; append(s, user)<br>}<br>fmt.Println(s)</p>
<p>插入的时候想要用类似pymysql的<code>executemany</code>？不好意思，得自己实现了</p>
<p>如果需要事务，那么可以这样</p>
<p>tx, _ :&#x3D; db.Begin()<br>tx.Exec(“INSERT INTO image VALUES (?,?)”, “abc”, “def”)</p>
<p>tx.Commit()<br>tx.Rollback()</p>
<h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><p>MongoDB官方维护了一个mongo-go-driver，使用<code>go get go.mongodb.org/mongo-driver</code>即可安装</p>
<p>Golang毕竟还是静态类型的语言，因此用mongodb还是有点折磨人的?</p>
<h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><p>用起来，这样就建立了到数据库的连接</p>
<p>ctx, _ :&#x3D; context.WithTimeout(context.Background(), 2*time.Second)<br>client, err :&#x3D; mongo.Connect(ctx, options.Client().ApplyURI(“mongodb:&#x2F;&#x2F;localhost:27017”))<br>if err !&#x3D; nil {<br>  fmt.Println(err)<br>}</p>
<p>defer client.Disconnect(ctx)</p>
<p>这个URI，实际上就是mongodb的<a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/reference/connection-string/">连接字符串</a>，定义如下</p>
<p>mongodb:&#x2F;&#x2F;[username:password@]host1[:port1][,…hostN[:portN]][&#x2F;[database][?options]]</p>
<p>举例如下，如果数据库带认证，那么就要选择2和3了。</p>
<p>mongodb:&#x2F;&#x2F;mongodb0.example.com:27017&#x2F;admin<br>mongodb:&#x2F;&#x2F;myDBReader:D1fficultP%<a href="mailto:&#52;&#x30;&#115;&#x73;&#x77;&#x30;&#114;&#100;&#64;&#x6d;&#x6f;&#x6e;&#103;&#111;&#x64;&#x62;&#48;&#46;&#x65;&#120;&#x61;&#x6d;&#112;&#108;&#x65;&#x2e;&#99;&#x6f;&#x6d;">&#52;&#x30;&#115;&#x73;&#x77;&#x30;&#114;&#100;&#64;&#x6d;&#x6f;&#x6e;&#103;&#111;&#x64;&#x62;&#48;&#46;&#x65;&#120;&#x61;&#x6d;&#112;&#108;&#x65;&#x2e;&#99;&#x6f;&#x6d;</a>:27017&#x2F;admin<br>mongodb:&#x2F;&#x2F;user:<a href="mailto:&#x70;&#97;&#115;&#x73;&#x77;&#111;&#x72;&#x64;&#64;&#101;&#x78;&#x61;&#109;&#112;&#x6c;&#101;&#x2e;&#99;&#x6f;&#x6d;">&#x70;&#97;&#115;&#x73;&#x77;&#111;&#x72;&#x64;&#64;&#101;&#x78;&#x61;&#109;&#112;&#x6c;&#101;&#x2e;&#99;&#x6f;&#x6d;</a>&#x2F;?authSource&#x3D;the_database&amp;authMechanism&#x3D;SCRAM-SHA-1”</p>
<p>连接成功之后，我们需要选择数据库，选择集合</p>
<p>db:&#x3D;client.Database(“go”)<br>accountCol:&#x3D;db.Collection(“account”)</p>
<h3 id="bson"><a href="#bson" class="headerlink" title="bson"></a>bson</h3><p>之后这个col就可以让我们操作数据库了，但是我们需要提前熟悉一下golang中的bson</p>
<p>总共有4种类型，分别为DMAE</p>
<p>D表示BSON文档，有序kv</p>
<p>M与D相同，只是无序</p>
<p>A数组</p>
<p>E单个文档，只能有一对kv</p>
<p>d :&#x3D; bson.D{<br>  {“Name”, “mark”},<br>  {“Age”, 12},<br>}<br>fmt.Println(d)</p>
<p>&#x2F;&#x2F; bson.M是一个map 无序的key-value集合，在不要求顺序的情况下可以替代bson.D<br>m :&#x3D; bson.M{<br>  “name”: “mark”,<br>  “age”: 12,<br>}<br>fmt.Println(m)</p>
<p>&#x2F;&#x2F; bson.A 是一个数组<br>a :&#x3D; bson.A{<br>  “jack”, “rose”, “jobs”,<br>}<br>fmt.Println(a)</p>
<p>&#x2F;&#x2F; bson.E是只能包含一个key-value的map<br>e :&#x3D; bson.E{<br>  “name”, “mark”,<br>}<br>fmt.Println(e)</p>
<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><p>查找一个，用<code>FindOne</code>就够了，第二个参数是查询条件，当然了我们要decode给一个定义好的变量</p>
<p>var result Account<br>col.FindOne(ctx, bson.D{}).Decode(&amp;result)<br>fmt.Println(result)</p>
<h3 id="查询多个"><a href="#查询多个" class="headerlink" title="查询多个"></a>查询多个</h3><p>var results []Account<br>cur, _ :&#x3D; col.Find(ctx, bson.D{})<br>for cur.Next(ctx) {<br>  var result Account<br>  cur.Decode(&amp;result)<br>  results &#x3D; append(results, result)<br>}<br>cur.Close(ctx)<br>fmt.Println(results)</p>
<h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><p>var data&#x3D;Account{<br>  Name: “Sally”,<br>  Age: 12,<br>  Gender: “female”,<br>}<br>col.InsertOne(ctx,data)</p>
<h3 id="插入多个"><a href="#插入多个" class="headerlink" title="插入多个"></a>插入多个</h3><p>var data &#x3D; []interface{}{<br>  Account{<br>    Name: “Benny2”,<br>    Age: 10,<br>    Gender: “1”,<br>  },<br>  Account{<br>    Name: “Benny3”,<br>    Age: 40,<br>    Gender: “12”,<br>  },<br>}<br>col.InsertMany(ctx, data)</p>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><p>col.UpdateOne(ctx,<br>  bson.M{“name”: “Benny”},<br>  bson.M{“$set”: bson.M{“name”: “Benny!”}},<br>)</p>
<p>col.UpdateMany(ctx,<br>  bson.M{“name”: “Benny!”},<br> bson.M{“$set”: bson.M{“age”: 14}},<br>)</p>
<h3 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h3><p>col.ReplaceOne(ctx,<br>  bson.M{“name”: “Sally”},<br>  bson.D</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/03/08/from-pyhon-to-go/index/" data-id="clhp7rtgc002zs2qr16t03p0j" data-title="Python程序员的Golang学习笔记" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-flying-webp/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/01/flying-webp/index/" class="article-date">
  <time class="dt-published" datetime="2020-03-01T00:00:00.000Z" itemprop="datePublished">2020-03-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/website/">website</a>►<a class="article-category-link" href="/categories/website/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/01/flying-webp/index/">个人网站无缝切换图片到webp</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>咱都知道，webp是一种非常优秀的图片格式，相比较png&#x2F;jpg，webp的图片体积要小，图像质量却基本没有什么下降。网站如果使用webp，那么自然也会减少图片文件的加载时间。</p>
<p>大部分发行版里都应该有个工具叫做cwebp，咱可以用cwebp转换下看下具体效果</p>
<p>~&#x2F;Downloads&#x2F;test cwebp yui.png -q 80 -o result.webp</p>
<h1 id="省略若干提示信息"><a href="#省略若干提示信息" class="headerlink" title="省略若干提示信息"></a>省略若干提示信息</h1><p>~&#x2F;Downloads&#x2F;test ls -lh<br>total 8160<br>-rw-r–r– 1 benny staff 335K Mar 1 20:06 result.webp<br>-rw-r--r--@ 1 benny staff 3.7M May 2 2019 yui.png</p>
<p>新文件大概是原来的8%左右，是不是很优秀！</p>
<p>但是如果一个一个转……聪明的你可能想要写个脚本递归转换，然后还要相应的修改数据库什么的，这样可是有点麻烦呢。那么有没有什么直接的方式呢？这就好像是，开飞机没油了，只能找个机场落地加油，然后再起飞。能不能像下面这张图这样子?？</p>
<p><img src="/images/2020030120431833.jpeg"></p>
<p>这种技术呢，叫做空中加油。你看，咱都不用落地就能加油。On-the-fly哦</p>
<p>那么我们的……答案当然是有的啦??那就是本文的重点，这个工具就是由<a target="_blank" rel="noopener" href="https://nova.moe/">Nova童鞋</a>、<a target="_blank" rel="noopener" href="https://blog.502.li/">muzi</a>、<a target="_blank" rel="noopener" href="https://blog.0xbbc.com/">cocoa</a>以及Benny小盆友一起鼓捣的webp_server_go啦！</p>
<p>不如先看看这里吧??</p>
<p><a target="_blank" rel="noopener" href="https://webp.sh/#/">https://webp.sh/#/</a> </p>
<p>放心，从[caniuse](<a target="_blank" rel="noopener" href="https://caniuse.com/">https://caniuse.com/</a>“ \l “search&#x3D;webp)的统计来看，主流浏览器都支持webp了，如果遇到Safari这样的奇葩，咱直接返回了原图</p>
<p><img src="/images/2020030120431998.png"></p>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p>使用方法很简单哦，<a target="_blank" rel="noopener" href="https://github.com/webp-sh/webp_server_go/releases">从这里下载binary</a>（或者自己build也行，deb和rpm也会稍后提供），创建如下json配置文件</p>
<p>{<br>“HOST”: “127.0.0.1”,<br>“PORT”: “3333”,<br>“QUALITY”: “80”,<br>“IMG_PATH”: “&#x2F;path&#x2F;to&#x2F;pics”,<br>“ALLOWED_TYPES”: [“jpg”,”png”,”jpeg”]<br>}</p>
<p>每一个配置项都很容易懂懂吧！如果不需要监听公网，那<code>HOST</code>就写127，藏在nginx后面。<code>ALLOWED_TYPES</code>是转换的图片类型，实际上目前最多用的也就是jpg和png了，暂时还未添加对bmp对支持。</p>
<p>我用WordPress，那么IMG_PATH就可以写<code>/var/www/html</code>这种，不用写到<code>wp-content/uploads</code>哦。</p>
<p>然后</p>
<p>.&#x2F;webp-server -config &#x2F;path&#x2F;to&#x2F;config.json</p>
<p>Ok! 你的3333端口已经被我接管了。接下来配置下nginx什么的，比如WordPress可以这么配置，在server段中哦</p>
<p>location ^~ &#x2F;wp-content&#x2F;uploads&#x2F; {<br>    proxy_pass <a target="_blank" rel="noopener" href="http://127.0.0.1:3333/">http://127.0.0.1:3333</a>;<br>}</p>
<p>然后就可以起飞啦！</p>
<p>哦对了，不用担心，一张图片只会被转换一次，除非原图片变了，才会重新转换。</p>
<p>[v_blue]?呃……就是个转换图片的东西……？ ?‍♀️No, it’s more than that.[&#x2F;v_blue]</p>
<h2 id="持久运行"><a href="#持久运行" class="headerlink" title="持久运行"></a>持久运行</h2><p>都知道，session和shell是绑定的，所以总不能一直开着终端吧？那么简单的话，我们可以用screen来解决这个问题</p>
<p>screen -S webp<br>.&#x2F;webp-server –config &#x2F;path&#x2F;to&#x2F;config.json</p>
<p>甚至我们可以使用systemd</p>
<p>cp init&#x2F;webps.service &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;<br>systemctl daemon-reload<br>systemctl enable webps.service<br>systemctl start webps.service</p>
<h2 id="预缓存功能"><a href="#预缓存功能" class="headerlink" title="预缓存功能"></a>预缓存功能</h2><p>咱可能是有很多图片的，如果收到请求的时候去转换，那么其实会慢的，那怎么办！</p>
<p><code>./webp-server --prefetch</code>，这样就会帮你预先转换图片哦！到时候请求来了直接返回，经济方便又实惠。</p>
<p>批量转换进行中</p>
<p><img src="/images/202003012043237.png"></p>
<p>臣妾无法转换php文件为webp呀?️</p>
<p>转换时，你的CPU处于被支配的痛苦中……</p>
<p><img src="/images/2020030120432442.png"></p>
<h2 id="使用效果图"><a href="#使用效果图" class="headerlink" title="使用效果图"></a>使用效果图</h2><p><img src="/images/2020030120432636.png"></p>
<h2 id="benchmark"><a href="#benchmark" class="headerlink" title="benchmark"></a>benchmark</h2><h3 id="用老婆照片做benchmark"><a href="#用老婆照片做benchmark" class="headerlink" title="用老婆照片做benchmark"></a>用老婆照片做benchmark</h3><p>179张，各式各样的壁纸</p>
<p>这个是原图</p>
<p><img src="/images/2020030120432648.png"></p>
<p>这个是转换之后的大小，大概只有原来的13%</p>
<p><img src="/images/2020030120432797.png"></p>
<h3 id="1-4M"><a href="#1-4M" class="headerlink" title="1-4M"></a>1-4M</h3><p>（感谢<a target="_blank" rel="noopener" href="https://blog.502.li/">muzi</a>提供的图片）</p>
<p>压缩比为9.3%</p>
<p><img src="/images/2020030120432897.png"></p>
<h3 id="4-32M"><a href="#4-32M" class="headerlink" title="4-32M"></a>4-32M</h3><p>压缩比为6.7%</p>
<p><img src="/images/2020030120433042.png"></p>
<h3 id="500K-1M"><a href="#500K-1M" class="headerlink" title="500K-1M"></a>500K-1M</h3><p>14.68%</p>
<p><img src="/images/2020030120433161.png"></p>
<h3 id="500K"><a href="#500K" class="headerlink" title="500K"></a>500K</h3><p>23.3%</p>
<p><img src="/images/2020030120433299.png"></p>
<h3 id="手机拍摄的人像"><a href="#手机拍摄的人像" class="headerlink" title="手机拍摄的人像"></a>手机拍摄的人像</h3><p>小部分是Pixel 3拍摄的，剩下是其他手机&#x2F;相机拍摄的人像。</p>
<p>16%</p>
<p><img src="/images/202003012043334.png"></p>
<p>所以基本上，大概图片大小会变为原来的20%左右。</p>
<h2 id="嗯哼？"><a href="#嗯哼？" class="headerlink" title="嗯哼？"></a>嗯哼？</h2><p>欢迎star、fork！欢迎提出建议，功能优化等等，不过建议使用英文哦！</p>
<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><p>开源地址： <a target="_blank" rel="noopener" href="https://github.com/webp-sh/webp_server_go">https://github.com/webp-sh/webp_server_go</a> 官方网站：<a target="_blank" rel="noopener" href="https://webp.sh/">https://webp.sh/</a></p>
<p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/webp-sh/webp/_server/_go'/]%E5%BF%AB%E6%9D%A5%E6%88%B3%E7%AB%A0%E9%B1%BC%E7%8C%AB/[/gt/]">https://github.com/webp-sh/webp\_server\_go&#39;\]快来戳章鱼猫\[/gt\]</a></p>
<h2 id="参考阅读"><a href="#参考阅读" class="headerlink" title="参考阅读"></a>参考阅读</h2><p><a target="_blank" rel="noopener" href="https://nova.moe/re-introduce-webp-server/">让站点图片加载速度更快——引入 WebP Server 无缝转换图片为 WebP</a> ??‍♂️</p>
<p><a target="_blank" rel="noopener" href="https://await.moe/2020/02/webp-server-in-rust/">WebP Server in Rust、</a><a target="_blank" rel="noopener" href="https://await.moe/2020/02/note-about-encountered-memory-changes-for-no-reason-in-golang/">记 Golang 下遇到的一回「毫无由头」的内存更改</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/03/01/flying-webp/index/" data-id="clhp7rtgb002ws2qr19dt6gr9" data-title="个人网站无缝切换图片到webp" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ballon/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/01/30/ballon/index/" class="article-date">
  <time class="dt-published" datetime="2020-01-30T00:00:00.000Z" itemprop="datePublished">2020-01-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/01/30/ballon/index/">自由的气球</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> </p>
<p>1945年，二战结束。根据《波茨坦协定》，德国在战败之后由英、美、法、苏四国占领。由于与苏联理念上的差异，英美法三国所占领土最终合并为一个占领区，组建新政权西德。</p>
<p>随着冷战的加剧，1961年柏林墙修建。至此，德国人开始了十八番武艺穿越柏林墙的故事。</p>
<p>2018年的德国电影《气球》便讲述了穿越柏林墙中的一个真实故事。</p>
<p><img src="/images/2020013013350445.jpeg"></p>
<p>以下内容可能涉及剧透，请谨慎阅读。</p>
<p>影片时长125分钟，情节十分紧张，听我的， 专心看，别玩手机了。</p>
<p>[collapse title&#x3D;”剧情概要”]</p>
<ul>
<li>第一次热气球</li>
</ul>
<p>影片刚开始，皮特一家人就升起了热气球。可惜由于没有考虑到高空温度低等问题，导致失败。</p>
<p>坠落的热气球等被东德当局发现。</p>
<ul>
<li>美国人</li>
</ul>
<p>为了准备热气球，两家人准备了两年。意识到气球可能不行之后，皮特一家人打算去美国大使馆附近寻求美国人的帮助。一家人把写有求救信的烟盒塞到了一个女人的背包里，然而却只是徒劳，美国人以为他想要烟。无奈之下，他们只能再次选择热气球</p>
<ul>
<li>第二次热气球</li>
</ul>
<p>德国当局已经开始进行进一步的调查与抓捕，皮特和冈特两家人只能分秒必争努力打造新的热气球。最终，他们的热气球成功降在了西德。 [&#x2F;collapse]</p>
<h2 id="小人物"><a href="#小人物" class="headerlink" title="小人物"></a>小人物</h2><p>在影片中，冈特的儿子不小心对幼儿园老师说出自己爸爸在没日没夜的缝纫。秘密警察过来调查，问到幼儿园老师大家有没有什么搞什么大件、或者说缝纫什么的打算</p>
<p>女老师思考片刻，回答：有，大家都在努力的缝国旗，庆祝东德建国30年。</p>
<p><img src="/images/2020013013350521.png"></p>
<p>这个情节让我想起了韩国电影《出租车司机》里的一个类似的情节：士兵发现了德国记者的汉城车牌，他似乎明白了什么，然后放他们走了。</p>
<p><img src="/images/2020013013350640.jpeg"></p>
<p>1989年，东欧巨变，苏联也摇摇欲坠。柏林墙拆毁，两德统一。</p>
<p>30年过去了，柏林墙已经不在了，另一堵墙却越来越高。共同点是，两堵“墙”都是用来阻止本国人民对自由的追求。不同点是，德国人用一系列可歌可泣的行动歌颂了有史以来最伟大的逃亡，为了追求自由而进行的前仆后继的逃离——向往自由，是人类与生俱来的本能。柏林墙最终被拆毁了。</p>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>有的时候，可能我们别无选择，甚至连反抗都不敢。可是，如果敢于反抗的人都离开了，那他们就赢了。</p>
<p>环境也许很恶劣，恶劣到连说一句不是赞美的话都会被千夫所指。也许我们不敢坚持自己的立场，不敢说出真话。但是我们至少可以选择沉默，至少要有conscious。就像两部影片中的小人物一样。</p>
<p>想想看，你就是多买了点布，有人就要向上汇报；走在大使馆附近，看到有无数只眼睛在偷瞄着你，酒店中也有人在监视着你；说不准因为看到了什么就会被带走讯问，警察可以随意进你家搜查；对面邻居就是秘密警察，阶级斗争从娃娃抓起，甚至人们以举报为荣。即使是军人，可能也会因为没有抓到人而遭受严厉的讯问。这一切的一切，就仿佛是奥威尔的《1984》中所描述的大洋国一样。你想要这样的生活吗？想要吗？嗯？？摸着自己的良心问下，现在，此时此刻，你应该怎么做？问问自己，谎言的代价是什么？</p>
<p><img src="/images/2020013013350735.jpeg"></p>
<blockquote>
<p>Freedom has many difficulties and democracy is not perfect, but we have never had to put a wall up to keep our people in, to prevent them from leaving us.</p>
<p>自由有许多困难，民主亦非完美，然而我们从未建造一堵墙把我们的人民关在里面，不准他们离开。</p>
<p> </p>
<p>约翰·肯尼迪 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%88%91%E6%98%AF%E6%9F%8F%E6%9E%97%E4%BA%BA">《我是柏林人》</a></p>
</blockquote>
<h2 id="参考阅读"><a href="#参考阅读" class="headerlink" title="参考阅读"></a>参考阅读</h2><p><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2009/07/break-through-berlin-wall.html">《学习一下德国人民的翻墙精神》</a></p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%9F%8F%E6%9E%97%E5%9C%8D%E7%89%86">柏林墙 – 维基百科</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.502.li/archives/thinking-2019.html">《【旧文重写】毕业后的一些思考》</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/01/30/ballon/index/" data-id="clhp7rteh000ms2qrcanq6wjy" data-title="自由的气球" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-wp-tgbot/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/01/19/wp-tgbot/index/" class="article-date">
  <time class="dt-published" datetime="2020-01-19T00:00:00.000Z" itemprop="datePublished">2020-01-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/website/">website</a>►<a class="article-category-link" href="/categories/website/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/01/19/wp-tgbot/index/">使用Telegram Bot接受和回复WordPress评论</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> </p>
<p>当你的博客收到了一条评论的时候，想要回复，应该怎么做呢？打开浏览器，打开后台，等待加载，回复……哦对了，我还有一个步骤，就是不在家的话还得<a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1214369246324543488?s=20">开一个全局代理</a>。</p>
<p>这怎么行，我都要懒死了。生气??</p>
<p>[v_blue] 没错的，历经1958天，我的博客被DNS污染啦。</p>
<p><a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1214369246324543488?s=20">https://twitter.com/BennyThinks/status/1214369246324543488?s=20</a></p>
<p>[&#x2F;v_blue]</p>
<p>假如能够用telegram bot完成这种回复操作就好了！那么是当然的了。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/2020011911361630.png"><img src="/images/2020011911361630.png"></a></p>
<p> </p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/202001191136176.jpeg"><img src="/images/202001191136176.jpeg"></a></p>
<p> </p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><h3 id="Basic-Auth"><a href="#Basic-Auth" class="headerlink" title="Basic Auth"></a>Basic Auth</h3><p>插件会为WordPress开启Basic Auth，因此要用复杂的密码，非常复杂的那种，并且https哦！</p>
<h3 id="WordPress-Hook"><a href="#WordPress-Hook" class="headerlink" title="WordPress Hook"></a>WordPress Hook</h3><p>WordPress博客在新添加一条评论的时候，会触发N多钩子，其中有一个钩子叫comment_post，这个钩子被触发后，就会给调用并给相应的回调函数三个参数<code>$comment_ID, $comment_approved, $comment_obj</code>。<code>$comment_obj</code>就是评论者留下的信息了，大概是如下结构的数组</p>
<p> </p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/2020011911361943.jpeg"><img src="/images/2020011911361943.jpeg"></a></p>
<p>根据post_id comment_id等，使用WordPress自带的函数就能生成完整的评论信息。</p>
<p>之后调用Telegram bot的REST API，就可以发送消息给用户了。</p>
<h3 id="Telegram"><a href="#Telegram" class="headerlink" title="Telegram"></a>Telegram</h3><p>当回复机器人消息时，会直接向WordPress的REST API发起评论添加请求。当然啦，你注意到了机器人消息里的id:123,456了吗？这个就是小小的标识符哦。</p>
<p>这个是用golang实现的机器人，轮询模式。其实我知道这个是可以用Telegram webhook完成的，直接写在插件里用PHP实现。更进一步，可以做到不开启Basic Auth，直接用WordPress的接口甚至是直接插入数据库。不过为了练习嘛……</p>
<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><p>基本可以如下归纳</p>
<ol>
<li>安装插件</li>
<li>创建bot、获取自己的user id</li>
<li>插件中添加相应的设置</li>
<li>编辑配置，并运行bot后端</li>
<li>可以了。</li>
</ol>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><h3 id="服务器在国内"><a href="#服务器在国内" class="headerlink" title="服务器在国内"></a>服务器在国内</h3><p>WordPress的服务器上，想办法开个代理（目前只支持http代理），然后插件设置里加入配置信息；</p>
<p>Telegram的服务器上，也想办法开个代理，然后设置这样两条环境变量</p>
<p>export http_proxy&#x3D;<a href="http://127.0.0.1:1087;export">http://127.0.0.1:1087;export</a> https_proxy&#x3D;<a target="_blank" rel="noopener" href="http://127.0.0.1:1087/">http://127.0.0.1:1087</a>;</p>
<p>或者干脆上<a target="_blank" rel="noopener" href="https://github.com/rofl0r/proxychains-ng">proxychains</a>试试。</p>
<p>[v_error]proxychains貌似只能代理dynamically linked 的程序，golang的二进制是statically linked的哎 [&#x2F;v_error]</p>
<h3 id="Basic-Auth-1"><a href="#Basic-Auth-1" class="headerlink" title="Basic Auth"></a>Basic Auth</h3><p>Basic Auth就是在HTTP请求头里加上base64编码之后的认证信息。优点是简单方便，易于实现，缺点很多。</p>
<p>但是有一点是肯定的，在www这个层面上，不走TLS的登录，都是耍流氓。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/2020011911362066.png"><img src="/images/2020011911362066.png"></a></p>
<p>全程TLS，啥都看不到。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/2020011911362539.png"><img src="/images/2020011911362539.png"></a></p>
<p>未TLS，底裤?都看光了</p>
<h3 id="机器人配置与命令行参数"><a href="#机器人配置与命令行参数" class="headerlink" title="机器人配置与命令行参数"></a>机器人配置与命令行参数</h3><p>{<br>“username”: “admin”,<br>“password”: “admin”,<br>“url”: “<a target="_blank" rel="noopener" href="http://localhost/">http://localhost/</a>“,<br>“token”: “907J6Tw”,<br>“uid”: “23231321”,<br>“admin”: 1,<br>“tail”: “本评论由Telegram Bot回复～❤️”<br>}</p>
<p>-c指定配置文件路径，默认使用当前目录下的config.json</p>
<p>-f强制运行，哪怕是http的……</p>
<p>-c file set configuration file (default “config.json”)<br>-f force to run even on http sites.<br>-h this help<br>-v show version and exit</p>
<h2 id="适配其他博客程序"><a href="#适配其他博客程序" class="headerlink" title="适配其他博客程序"></a>适配其他博客程序</h2><p>其实没啥好适配的……因为基本上要重写的。</p>
<p>只要能够找到相应的hook，在评论之后触发一个事件，那么就可以了。???</p>
<h2 id="开源地址"><a href="#开源地址" class="headerlink" title="开源地址"></a>开源地址</h2><p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/BennyThink/wp-comments-tgbot'/]%E5%BC%80%E6%BA%90%E5%9C%B0%E5%9D%80/[/gt/]">https://github.com/BennyThink/wp-comments-tgbot&#39;\]开源地址\[/gt\]</a></p>
<blockquote>
<p>为了更好的偷懒，付出成倍的精力?</p>
<p>————<a target="_blank" rel="noopener" href="https://www.zuiyu.xyz/">zuiyu</a></p>
</blockquote>
<p>然后就这么水了一波？????</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/01/19/wp-tgbot/index/" data-id="clhp7rtnl00bis2qr4q0a41zb" data-title="使用Telegram Bot接受和回复WordPress评论" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-work-life-balance/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/12/25/work-life-balance/index/" class="article-date">
  <time class="dt-published" datetime="2019-12-25T00:00:00.000Z" itemprop="datePublished">2019-12-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/12/25/work-life-balance/index/">工作与生活</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> </p>
<p>很久之前，看到一个人的博客，副标题中写到：不折腾，怎么对得起好奇害死猫的世界。</p>
<p>现在大概已经找不到这个博客了，但是这句话倒还是记得很清楚的。因为我也很喜欢折腾。为什么这么说呢？</p>
<p>作为以写代码为生的码农，必备的技能自然是以各种有趣的、奇怪的写码姿势完成各式各样的需求，除此之外，外带一些附加技能，跑个代码啦，导个数据库什么的。相信每一位码农，至少也是能够做这些的。</p>
<p>只不过呢，我这个“码农”有点喜欢折腾，我比较喜欢鼓捣各种有意思没意思的东西。比如就从我的过往博文来看吧：</p>
<p>信息安全：一个连高数都学不明白的孩子，竟然如此胆大妄为的说自己写过整整十几篇信息安全相关的文章，真是初生牛犊；</p>
<p>建站运维：ESXi VPS 微软小冰API……；</p>
<p>翻墙：使用trojan……</p>
<p>树莓派、Grafana、iSCSI、TLS1.3、HTTP&#x2F;2、Radius、TimeMachine……</p>
<p>（哦这个是macOS备份的那个，不是你想的时光机，要不我就回到6年前right the wrong了。）</p>
<h2 id="折腾"><a href="#折腾" class="headerlink" title="折腾"></a>折腾</h2><p>所谓折腾，自然也就是说，我在这方面有些成果，尽管可能也只是一些皮毛，不至于有多高深。我写不出来RSA的公式，讲不明白它的算法，但至少我了解什么是非对称加密算法，熟悉GPG的用法。虽说不至于得个奖什么的，但至少技术水平上是有一定提升和拓宽的。</p>
<p>也许正是因为有一个博客，可以把自己折腾的成果分享出来，至少能满足一下虚荣心。所以也是乐在其中吧。</p>
<h2 id="可是这与标题有什么关系呢？"><a href="#可是这与标题有什么关系呢？" class="headerlink" title="可是这与标题有什么关系呢？"></a>可是这与标题有什么关系呢？</h2><p>我觉得是有的，因为这些对于我来说是生活，折腾是我的生活中的一部分。而我已经不再是无忧无虑的学生了，为了活下去，就要有工作。工作与生活之间，必然要有一定的取舍和界限。如果某一天，工作与生活之间的界限越来越不清晰，那么会怎样呢？</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2019/12/20191225153801100.jpg"><img src="/images/20191225153801100.jpg"></a></p>
<p>俗话说，文不可以一篇无图。那么……</p>
<h2 id="一个现象"><a href="#一个现象" class="headerlink" title="一个现象"></a>一个现象</h2><p>先从一个现象说起吧：</p>
<p>2017年，我总计写了三四十篇博文，2018年，总计19篇。到了几年，2019年，总计16篇，一部分还都是简单的感慨，2017年的长篇大论几乎都没有了。可以预见，2020年我大概只能写十篇出头、甚至是个位数博文。希望2020年的这个时候大家能来<strong>使劲打我的脸</strong>。</p>
<p>为啥会这样呢？本人没多少墨水，知识储备量比较少，学习新知识又比较慢，再加上又懒又笨，技术的学习总是有瓶颈期的。这是一方面原因。</p>
<p>另一方面原因，我需要讲一个故事。</p>
<h2 id="一个故事"><a href="#一个故事" class="headerlink" title="一个故事"></a>一个故事</h2><p>这个故事是来源于一位友人。有几次偶然和她聊天，谈到工作，谈到优化自己的基础设施，谈到博客，谈到去北京出差。（其实哪有谈到嘛，就是有一句没一句的聊着。）</p>
<p>我：去北京出差，我要再准备一个手机，怕被查手机</p>
<p>她：你手机有啥见不得人的秘密</p>
<p>我：无论我手机有没有见不得人的秘密，我都拒绝行政机构在没有拿到司法机构的授权前检查我的设备。</p>
<p>（其实这个时候我是想说下面这句话的，谢谢Edward）</p>
<blockquote>
<p>Arguing that you don’t care about the right to privacy because you have nothing to hide is no different than saying you don’t care about free speech because you have nothing to say.</p>
</blockquote>
<p>她：看来你还是太闲，有时间想这些。</p>
<p>几个月之后。</p>
<p>我：zsh插件……博客……</p>
<p>她：忙得要死，没时间弄博客，睡觉都不够。</p>
<p>故事讲完了。</p>
<h3 id="但是关于隐私与自由，关于Nothing-to-hide，我还想再说一句："><a href="#但是关于隐私与自由，关于Nothing-to-hide，我还想再说一句：" class="headerlink" title="但是关于隐私与自由，关于Nothing to hide，我还想再说一句："></a>但是关于隐私与自由，关于Nothing to hide，我还想再说一句：</h3><blockquote>
<p>Ultimately, saying that you don’t care about privacy because you have nothing to hide is no different from saying you don’t care about freedom of speech because you have nothing to say. Or that you don’t care about freedom of the press because you don’t like to read. Or that you don’t care about freedom of religion because you don’t believe in God. Or that you don’t care about the freedom to peaceably assemble because you’re a lazy, antisocial agoraphobe. Just because this or that freedom might not have meaning to you today doesn’t mean that that it doesn’t or won’t have meaning tomorrow, to you, or to your neighbor – or to the crowds of principled dissidents I was following on my phone who were protesting halfway across the planet, hoping to gain just a fraction of the freedom that my country was busily dismantling.</p>
</blockquote>
<p>针针见血，Edward Snowden <em>- Permanent Record</em></p>
<h2 id="另一方面原因"><a href="#另一方面原因" class="headerlink" title="另一方面原因"></a>另一方面原因</h2><p>好吧，我要说，学生时代我是个比较奇怪的孩子。</p>
<p>对于那些我认为的完全没有用、或者对自己并无太大帮助的课，我会去干点别的事情，比如看书、或者研究点什么。《鸟哥Linux》这种技术书籍，《学会提问》这种非技术书籍都有，有时偷懒也会看一些优秀博主的博文。</p>
<p>也正是因为学生嘛，课再多能有多少，以我的智商能够应付考试就够了（?这也是我没拿奖学金的原因吧）。所以空闲时间比较多……我啊，一旦闲下来……就容易折腾，就容易因为<strong>好奇而害死猫</strong>。</p>
<p>所以，这就是我要说的另一方面的原因：有了充足的时间可以让我瞎鼓捣。</p>
<p>工作与生活，更准确的说，工作与折腾中技术的长进。工作，真的能够让我们的技术得到长足的发展吗？</p>
<p>这个问题很难回答，不同的公司，不同的文化，不同的部门，甚至是不同的领导和老板，都会导致这个问题的基准的偏向。</p>
<h2 id="愚以为"><a href="#愚以为" class="headerlink" title="愚以为"></a>愚以为</h2><p>但是，以我个人的短暂的工作经验来看，对于大部分普通人而言：</p>
<ul>
<li>公司规模越大，也就越倾向于分工明确，分工明确也就意味着一个萝卜一个坑，做Web开发的不可能让你去维护官网；</li>
<li>某种工作的初期，需要学习适应新的环境，包括相应的开发框架、语言、数据存储等。在这个阶段，自然会得到一定程度的提升；</li>
<li>之后，随着工作模式的固定，能够应付工作了，自然很容易做着重复的事情；</li>
<li>工作很忙，甚至还要加班，导致没有时间去学习、提升；</li>
<li>更进一步，如果忙得连睡觉都变成了难得的享受，那生活只剩下工作，连思考也会变得局限。</li>
</ul>
<p>如果连思考也会变为局限，那简直是太不幸了。<strong>技术可以一日千里，但是思维能力却不能</strong>。思维能力需要长时间的锻炼，需要长时间的阅读、理解、思考、输出。</p>
<p>工作是工作，生活是生活。人们都说下班后的三个小时会决定你的余生的高度，能不能决定余生的高度这我倒不知道，有人拿来看剧，有人拿来学习。但是有一点我很确定：如果连下班后的三个小时都不是自己的，那还有什么生活，还能有什么长进，拿什么来折腾，拿什么来思考。梦里吗。Guido还不是<a target="_blank" rel="noopener" href="https://www.python.org/doc/essays/foreword/">闲得打发时间</a>才发明了Python。</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>很早以前，在<a target="_blank" rel="noopener" href="https://dmesg.app/silence-is-harmful.html">《沉默是最大的伤害》</a>中就提到了思维能力与技术的观点：</p>
<p>作为IT 从业者应该不只是有技术能力，还应该有更强的<strong>自由思想、独立思考、批判性思维能力</strong>——只有这样才能跳出围墙。</p>
<p>在这堵围墙之内，你的思想只不过是党允许的；在这堵围墙之内，党拥有定义2+2&#x3D;5的权力；在这堵围墙之内，你并不具有任何实质性的自由意志；在这堵围墙之内，你只不过是傻傻被割的韭菜。</p>
<p>这也是3年前，我灌水的一篇<a target="_blank" rel="noopener" href="https://dmesg.app/other-than-tech.html">《除了技术，你还应该会什么》</a>曾经提到过三点非常重要的能力：</p>
<p><strong>自由思想、独立思考、批判性思维</strong>。</p>
<p>人人都知道，越是多样性的生态系统，越是稳定，越是不容易遭到破坏；即使遭到破坏，也较容易恢复过来。</p>
<p>我想，作为程序员，怎么说也是个有点门槛的工作，英文阅读能力更强，更能有机会使用Google，更能有机会了解到外面的世界，更能有机会了解一些除了技术之外的事情吧，更能够<strong>摆脱洗脑教育并形成多元化的自由思想</strong>。看来真的是我想多了。哎。</p>
<p>希望，读到这篇文章的读者们，能够渐渐理解这三点吧。那么我也就没白费口水，我的下班后的三个小时四个小时也就没有白费。</p>
<hr>
<p> </p>
<p>这篇应该是本博客2019年的最后一篇了，希望各位读者们2019年完美收尾，2020年生活工作双加好更加顺利。俺也会再接再厉，争取2020年多写点，打破前面自己的预言:-)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/12/25/work-life-balance/index/" data-id="clhp7rtne00bes2qr36l44db7" data-title="工作与生活" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-akira/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/12/15/akira/index/" class="article-date">
  <time class="dt-published" datetime="2019-12-15T00:00:00.000Z" itemprop="datePublished">2019-12-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/12/15/akira/index/">深海晶好难啊</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>有一句话一定要小点声说?，新垣结衣是我老婆。</p>
<p>一年前，我刚刚参加工作，正好碰到ガッキー老婆主役的《无法成为野兽的我们》，于是便去追了。</p>
<p>直到剧终，我都没怎么理解这部剧究竟在讲什么。阿晶怎么就和京谷分手了，恒星怎么就身败名裂了，我老婆怎么就跟了松田龙平。野木阿姨是不是有点玩脱了。</p>
<p>好吧，我要承认，可能是当初看剧不认真，总是一边玩手机一边看，哎。老婆对不起你，我下次再也不敢玩手机了。</p>
<hr>
<p>一年后的今天，在一个非常阳光明媚的、难得的风平浪静的闲暇的周末下午，我从移动硬盘里找到了这部剧，重新看了起来。</p>
<p>深海晶真的好难啊。生活真的好难啊。阿晶如果能再强势一点就好了。强势一点，把朱里撵走；强势一点，怕他什么99老娘就是要辞职。</p>
<p>阿晶工作能力这么强，公关、接待、写PPT、演示业务，一个人干三四个人的活，带薪假还要被人吵醒工作，不明不白的做了很多本来应该工作职责以外的事情。社长像精神病一样大吼大叫，分不清工作任务。此时应该呼叫一下程序员津崎平匡：指示非常明确。</p>
<p>竟然还要为人擦屁股而土下座，甚至在之后还要被职务骚扰。我的刀已经拔出来了。</p>
<p><img src="/images/2019121513315242.png" alt="《我们无法成为野兽》这部剧火到爆"></p>
<p>周一零点，哦不是周二，地铁站的末班电车，被人撞翻的手机，如果跳下去了一切就都解决了吧。四杯啤酒都无法排遣的艰难。</p>
<p>一切都是生活所迫啊，另一边的根元恒星也被人抓着把柄。恒星说阿晶的笑容恶心，是假笑。是恒星的冷嘲热讽使得深海晶脱下了只会逃避、不会拒绝、只会忍让、总是以虚假的笑容面对一切的面具。</p>
<p>也许，只有到了一定年纪，有了一定的经历，才能体会到吧。</p>
<hr>
<p>日本人这一两年就是不想上班呢……</p>
<p>从《无法成为野兽里的》到《凪的新生活》中就是不想上班的黑木华；</p>
<p>《我要准时下班》里准时下班的东山结衣（吉高由里子）；</p>
<p>《我的事说来话长》家里蹲，话多喜欢和秘书姐姐对着干的生田斗真；</p>
<p>就算上班，《这个不可以报销》里的多部未华子也会让你的报销很痛苦的哦；</p>
<p>那还是不上班了，但是《坡道上的家》带孩子也是很困难的哦！</p>
<hr>
<p>你看，就是要这样贴近生活嘛。</p>
<p>工作一年半之后，再次看这部剧，莫名的觉得感同身受，真的好难啊。我也好难啊。什么时候能够像野兽一样自由自在就好了。????</p>
<p>哦对了，这位冈持三郎，有没有觉得有些好似戏外的我们呢？</p>
<p><img src="/images/2019121513320032.jpeg" alt="https://pic.pimg.tw/ricgrady/1540040590-2364988629_l.jpg"></p>
<p><img src="/images/2019121513320775.jpeg" alt="https://pic.pimg.tw/ricgrady/1540040592-1740601626_l.jpg"></p>
<hr>
<p>不说了，我爱老婆。老婆爱我。</p>
<blockquote>
<p>在这一点上我不接受一切异议和反驳。</p>
</blockquote>
<p><img src="/images/2019121513321127.jpeg" alt="https://2.bp.blogspot.com/-HAbvKir5GTY/WGXhP-Q62zI/AAAAAAAABig/DtBLL9pkEUgAPEsDKs2xEdzZpbj7kgaiACLcB/s1600/snapshot20161230122157.jpg"></p>
<p>我要去赚钱养老婆啦。じゃあね。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/12/15/akira/index/" data-id="clhp7rtds0003s2qr484jemdg" data-title="深海晶好难啊" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-esxi-tutorial/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/11/16/esxi-tutorial/index/" class="article-date">
  <time class="dt-published" datetime="2019-11-16T00:00:00.000Z" itemprop="datePublished">2019-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">it</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/16/esxi-tutorial/index/">ESXi入门指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="什么是ESXi"><a href="#什么是ESXi" class="headerlink" title="什么是ESXi"></a>什么是ESXi</h2><blockquote>
<p>VMware ESXi是由VMware开发的用于部署和服务虚拟计算机的企业级1类管理程序。作为Type-1虚拟机管理程序，ESXi不是操作系统上安装的软件应用程序；相反，它包括并集成了重要的OS组件，例如内核。在4.1版之后，VMware将ESX重命名为ESXi。</p>
</blockquote>
<p>摘自维基百科英文版翻译</p>
<p>简单的说，ESXi就是一个虚拟机。但是与VMware Workstation、VirtualBox等工具却又有些不同。更具体的说，VMware Workstation等工具是运行在操作系统之上的一个软件，如果没有对应的操作系统（Windows、macOS、Linux）等，它自身是无法运行的，操作系统不让它做的事情它也做不了，这种虚拟机我们一般叫“Type 2”虚拟机。</p>
<p>既然有Type 2，那也是有Type 1的，所谓Type 1虚拟机，就是它本身就是一个操作系统，直接运行在裸机上。ESXi就属于这种。</p>
<p> </p>
<p>“人傻钱多戴，美帝良心想”</p>
<p>提到戴尔，我相信绝大部分人的印象都是这家伙不是卖笔记本、卖显示器，还卖服务器的吗？</p>
<p>哦好吧，其实<strong>VMware是DELL的子公司</strong>。是这样的，VMware被EMC收购了，DELL又把EMC收购了。</p>
<h2 id="ESXi硬件要求"><a href="#ESXi硬件要求" class="headerlink" title="ESXi硬件要求"></a>ESXi硬件要求</h2><p>ESXi的硬件要求很低，总结来说大概如下：</p>
<ul>
<li>至少双核CPU</li>
<li>至少4G内存</li>
<li>以太网控制器</li>
</ul>
<p>除此之外，最好再支持硬件虚拟化Intel VT-x 或 AMD RVI</p>
<p>具体详细硬件配置可以查看官网的文档 <a target="_blank" rel="noopener" href="https://docs.vmware.com/cn/VMware-vSphere/6.5/com.vmware.vsphere.install.doc/GUID-DEB8086A-306B-4239-BF76-E354679202FC.html">ESXi硬件要求</a></p>
<p>相信大家的配置绝对足够跑ESXi了，不过有几点需要注意的地方</p>
<ul>
<li>ESXi本身不支持无线网卡，但是我们可以把无线网卡直通给虚拟机</li>
<li>“不支持”Realtek 螃蟹?️网卡，VMware因为商业化原因移除了对Realtek的支持，但是可以找办法添加回去的</li>
</ul>
<h2 id="使用什么设备运行ESXi"><a href="#使用什么设备运行ESXi" class="headerlink" title="使用什么设备运行ESXi"></a>使用什么设备运行ESXi</h2><p>很简单，用旧的笔记本，各种服务器……好吧，对于个人使用来说，服务器还是算了，那个耗电和噪音受不了的。</p>
<p>对于个人使用来说， 淘汰的笔记本（配置足够的话）、各种迷你主机是比较好的选择。</p>
<p>比如说<a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/boards-kits/nuc.html">Intel NUC</a>就是很不错的选择，但是NUC价格又有些贵；所以最终我选择的是占美主机，便宜省电呀……如下图所示</p>
<p><img src="/images/2019111607252622.jpeg" alt="https://gd2.alicdn.com/imgextra/i2/186209729/O1CN01MJP69n2LjvsAbH8Re_!!186209729.jpg"></p>
<p>只不过这个无线网卡，被我拆了卖咸鱼了。</p>
<p>由于NUC这类都是不带内存硬盘的，所以咱要自己买。推荐的话，既然都跑虚拟机了，起步16G为佳。存储的话，自然是M2 NVME或者mSATA的固态了。SATA接口建议还是别插固态，SATA接口留给普通的机械硬盘，做备份存储之类的用途。土豪直接上1T的固态那就不算啦！</p>
<p><img src="/images/2019111607252949.png"></p>
<p>这个功耗很低吧，一个月下来也就是三四块钱的电费</p>
<h2 id="ESXi安装镜像调整（打补丁）"><a href="#ESXi安装镜像调整（打补丁）" class="headerlink" title="ESXi安装镜像调整（打补丁）"></a>ESXi安装镜像调整（打补丁）</h2><h3 id="判断网卡类型"><a href="#判断网卡类型" class="headerlink" title="判断网卡类型"></a>判断网卡类型</h3><p>前面说过，ESXi不支持?️网卡（有好些网卡都是不支持的，所以可以参考上面的硬件要求链接），所以这里需要先判断下自己的机器上什么网卡？如果是螃蟹卡的话，那么需要对安装镜像进行调整。具体判断方法，拆开看芯片，看产品介绍，Live CD下lspci什么的都可以</p>
<h3 id="下载ESXi镜像"><a href="#下载ESXi镜像" class="headerlink" title="下载ESXi镜像"></a>下载ESXi镜像</h3><p>ESXi介绍页面</p>
<p><a target="_blank" rel="noopener" href="https://www.vmware.com/products/vsphere.html">https://www.VMware.com/products/vsphere.html</a></p>
<p>ESXi下载</p>
<p><a target="_blank" rel="noopener" href="https://my.vmware.com/en/web/vmware/info/slug/datacenter_cloud_infrastructure/vmware_vsphere/6_7">https://my.VMware.com/en/web/VMware/info/slug/datacenter_cloud_infrastructure&#x2F;VMware_vsphere&#x2F;6_7</a></p>
<p>我们就点击页面上的 VMware vSphere Hypervisor (ESXi) 6.7U3 下载就可以了。</p>
<p>镜像有两种类型</p>
<p><img src="/images/2019111607252958.png"></p>
<p>第一种的ISO，直接能启动；第二种下载回来说一个zip包，我们可以用它来打补丁。如果你是?️卡，那就选第二种吧</p>
<h3 id="ESXi打补丁"><a href="#ESXi打补丁" class="headerlink" title="ESXi打补丁"></a>ESXi打补丁</h3><p>这个网上文章真的是太多了，基本上就是用ESXi-customer-PS之类的把网卡驱动添加进去</p>
<p>ESXi-customer-ps官网</p>
<p><a target="_blank" rel="noopener" href="https://www.v-front.de/p/esxi-customizer-ps.html">https://www.v-front.de/p/ESXi-customizer-ps.html</a></p>
<p>需要先安装powercli，下载页面</p>
<p><a target="_blank" rel="noopener" href="https://code.vmware.com/web/tool/11.2.0/vmware-powercli">https://code.VMware.com/web/tool/11.2.0/VMware-powercli</a></p>
<p>网卡补丁，根据自己的型号下载offline-bundle，避免网络问题</p>
<p><a target="_blank" rel="noopener" href="https://vibsdepot.v-front.de/wiki/index.php/List_of_currently_available_ESXi_packages">https://vibsdepot.v-front.de/wiki/index.php/List_of_currently_available_ESXi_packages</a></p>
<p>如何打补丁可以自己搜索下，我这里贴上来两篇</p>
<p><a target="_blank" rel="noopener" href="https://www.smbinn.com/vmnetwork.html">https://www.smbinn.com/vmnetwork.html</a></p>
<p><a target="_blank" rel="noopener" href="https://rexzhang.com/post/cf06a796-44d5-11e4-9bb5-f23c9150b910">https://rexzhang.com/post/cf06a796-44d5-11e4-9bb5-f23c9150b910</a></p>
<p>简单描述是这样的，打开powershell，切换到对应的目录</p>
<p># 取消可能的系统限制<br>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned<br>Set-ExecutionPolicy Unrestricted</p>
<h1 id="离线打补丁-official-zip是ESXi的offline-bundle，drivers目录包含了vib文件的目录"><a href="#离线打补丁-official-zip是ESXi的offline-bundle，drivers目录包含了vib文件的目录" class="headerlink" title="离线打补丁  official.zip是ESXi的offline bundle，drivers目录包含了vib文件的目录"></a>离线打补丁  official.zip是ESXi的offline bundle，drivers目录包含了vib文件的目录</h1><p>.\ESXi-Customizer-PS-v2.6.0.ps1 -izip .\official.zip -pkgDir C:\Users\abc\Dropbox\ESXi\drivers</p>
<h1 id="在线打补丁，依赖比较好的网络环境"><a href="#在线打补丁，依赖比较好的网络环境" class="headerlink" title="在线打补丁，依赖比较好的网络环境"></a>在线打补丁，依赖比较好的网络环境</h1><p>.\ESXi-Customizer-PS-v2.6.0.ps1 -v67 -vft -load net55-r8168</p>
<h3 id="支持Realtek-8168-x2F-8111-x2F-8411-x2F-8118的成品"><a href="#支持Realtek-8168-x2F-8111-x2F-8411-x2F-8118的成品" class="headerlink" title="支持Realtek 8168&#x2F;8111&#x2F;8411&#x2F;8118的成品"></a>支持Realtek 8168&#x2F;8111&#x2F;8411&#x2F;8118的成品</h3><p>如果你的网卡也是Realtek 8168&#x2F;8111&#x2F;8411&#x2F;8118的话，并且信任我，可以考虑用我的现成的，<a target="_blank" rel="noopener" href="https://www.dropbox.com/s/aly7y4nrhjdpdmr/ESXi-6.7.0-20190802001-standard-customized.iso?dl=0">戳这里去dropbox</a></p>
<h2 id="ESXi安装"><a href="#ESXi安装" class="headerlink" title="ESXi安装"></a>ESXi安装</h2><p>把iso写到U盘中，比如说使用rufus这种，然后启动插U盘启动电脑，哦对了还要有个显示器和HDMI……</p>
<p>安装过程很简单，接受，输入密码，下一步，下一步……</p>
<p> </p>
<p>小提示：没有显示器怎么办？</p>
<p>靠着虚拟机、网卡指示灯、硬盘灯摸索着来吧。</p>
<p>哦当然了，ESXi要插网线直接连到网络设备（如路由器）的，要不玩什么呀！</p>
<h2 id="ESXi管理"><a href="#ESXi管理" class="headerlink" title="ESXi管理"></a>ESXi管理</h2><p>ESXi安装完成之后，想办法获取到它的IP地址，直接浏览器访问就可以了。</p>
<h3 id="使用ESXi网页端管理虚拟机"><a href="#使用ESXi网页端管理虚拟机" class="headerlink" title="使用ESXi网页端管理虚拟机"></a>使用ESXi网页端管理虚拟机</h3><p>界面很简洁，看着就会用</p>
<p><img src="/images/2019111607253217.png"></p>
<h3 id="使用VMware-Workstation管理虚拟机"><a href="#使用VMware-Workstation管理虚拟机" class="headerlink" title="使用VMware Workstation管理虚拟机"></a>使用VMware Workstation管理虚拟机</h3><p>如果你的电脑上装有VMware Workstation的话，文件-连接到服务器，输入IP用户名（root）、密码也是可以进行简单的管理的</p>
<h3 id="进一步的管理：Vcenter"><a href="#进一步的管理：Vcenter" class="headerlink" title="进一步的管理：Vcenter"></a>进一步的管理：Vcenter</h3><p>ESXi本身的管理功能比较基础，甚至连克隆、迁移等功能都没有。为了做到这点，可以开个虚拟机安装vcenter。</p>
<p>什么是注册虚拟机</p>
<h2 id="ESXi创建虚拟机方法"><a href="#ESXi创建虚拟机方法" class="headerlink" title="ESXi创建虚拟机方法"></a>ESXi创建虚拟机方法</h2><p>ESXi的使用非常简单，只要是用过虚拟机的人应该就是十分清楚的，傻瓜化操作</p>
<h3 id="直接创建虚拟机"><a href="#直接创建虚拟机" class="headerlink" title="直接创建虚拟机"></a>直接创建虚拟机</h3><p><img src="/images/2019111607253436.png"></p>
<h3 id="从ovf部署虚拟机"><a href="#从ovf部署虚拟机" class="headerlink" title="从ovf部署虚拟机"></a>从ovf部署虚拟机</h3><p>从VMware Workstation和virtualbox导出的文件都可以导入进来的</p>
<p><img src="/images/2019111607253765.png"></p>
<h3 id="注册虚拟机"><a href="#注册虚拟机" class="headerlink" title="注册虚拟机"></a>注册虚拟机</h3><p>假如已经有了虚拟机的vmdk文件，并且这个文件在datastore中，那么我们可以直接注册虚拟机的。方法太简单了，不说了。</p>
<h3 id="使用cloud-image"><a href="#使用cloud-image" class="headerlink" title="使用cloud image"></a>使用cloud image</h3><p>作为非常爱惜硬盘的我，如果从Ubuntu Server安装一个服务器版Ubuntu的话，不仅浪费时间，需要手工干预安装，而且还很占用硬盘。所以ubuntu官方维护了一个云镜像，其中包含各种环境使用的镜像，可以直接导入。</p>
<p>下面这个链接是每日构建的，点进去选一个日期，下载对应的ovf&#x2F;ova文件就可以了</p>
<p><a target="_blank" rel="noopener" href="https://cloud-images.ubuntu.com/bionic/">https://cloud-images.ubuntu.com/bionic/</a></p>
<p>这个链接是发布版的，同样下载ovf&#x2F;ova文件</p>
<p><a target="_blank" rel="noopener" href="https://cloud-images.ubuntu.com/releases/">https://cloud-images.ubuntu.com/releases/</a></p>
<p><img src="/images/201911160725385.png"></p>
<p>下载回来直接导入就可以了</p>
<p>但是这个cloud image的root密码是什么呀！别怕，随机密码。开机按shift进grub，选择recovery mode破个密码就好了。然后再parted或者fdisk弄下分区，完美。Cloud image安装完占用硬盘不到1G哦～</p>
<h2 id="ESXi-虚拟机设置"><a href="#ESXi-虚拟机设置" class="headerlink" title="ESXi 虚拟机设置"></a>ESXi 虚拟机设置</h2><h3 id="CPU资源限制"><a href="#CPU资源限制" class="headerlink" title="CPU资源限制"></a>CPU资源限制</h3><p>如下图所示，我们可以为此虚拟机预留一定的CPU资源、限制CPU资源（虚拟机不会使用超过这个频率的CPU）、份额，以及常见的硬件虚拟化、性能计数器等。</p>
<p><img src="/images/2019111607253924.png"></p>
<p>份额这个概念比较特殊，详细解释如下：</p>
<blockquote>
<p>份额指定虚拟机（或资源池）的相对重要性。如果某个虚拟机的资源份额是另一个虚拟机的两倍，则在这两个虚拟机争用资源时，第一个虚拟机有权消耗两倍于第二个虚拟机的资源。</p>
<p>份额通常指定为高、正常或低，这些值将分别按 4:2:1 的比例指定份额值。还可以选择自定义为各虚拟机分配特定的份额值（表示比例权重）。</p>
</blockquote>
<p>举个例子，</p>
<blockquote>
<p>一台聚合 CPU 容量为 8 GHz 的主机上运行着两个受 CPU 约束的虚拟机。它们的 CPU 份额设置为正常，因此各得 4GHz。</p>
<p>现在打开了第三个受 CPU 约束的虚拟机的电源。它的 CPU 份额设置为高，这意味着它拥有的份额值应该是设置为正常的虚拟机的两倍。新的虚拟机获得 4GHz，其他两个虚拟机各自仅获得 2GHz。如果用户为第三个虚拟机指定的自定义份额值为 2000，也会出现相同的结果。</p>
</blockquote>
<h3 id="内存资源限制"><a href="#内存资源限制" class="headerlink" title="内存资源限制"></a>内存资源限制</h3><p>与CPU资源限制类似，内存也是可以进行限制的，道理类似</p>
<p><img src="/images/2019111607254012.png"></p>
<h3 id="硬盘资源限制"><a href="#硬盘资源限制" class="headerlink" title="硬盘资源限制"></a>硬盘资源限制</h3><p>同理，可以限制硬盘写入，所以知道怎么做<strong>石头盘</strong>了吧！</p>
<p><img src="/images/2019111607254134.png"></p>
<h3 id="添加其他设备"><a href="#添加其他设备" class="headerlink" title="添加其他设备"></a>添加其他设备</h3><p>前面提过，ESXi不支持无线网卡，但是我们可以把无线网卡直接分配给虚拟机，那么就要用到网卡直通。具体方法就是编辑虚拟机设置，添加其他设备-PCI设备&#x2F;USB设备</p>
<p><img src="/images/2019111607254256.png"></p>
<h3 id="虚拟机引导选项"><a href="#虚拟机引导选项" class="headerlink" title="虚拟机引导选项"></a>虚拟机引导选项</h3><p>和VMware Workstation的设置基本差不多，一看就懂</p>
<p><img src="/images/2019111607254455.png"></p>
<h2 id="ESXi-控制台连接"><a href="#ESXi-控制台连接" class="headerlink" title="ESXi 控制台连接"></a>ESXi 控制台连接</h2><p>我们可以直接通过网页端访问控制台端口，也可以通过下载VMware Remote Console，或是VMware Workstation访问。</p>
<h2 id="数据存储管理"><a href="#数据存储管理" class="headerlink" title="数据存储管理"></a>数据存储管理</h2><p>要装虚拟机，自然就要用ISO镜像，那ISO镜像自然就要上传到ESXi中……具体就是使用数据存储功能。</p>
<p>左侧导航栏直接点进去存储</p>
<p><img src="/images/2019111607254569.png"></p>
<h3 id="数据存储管理器"><a href="#数据存储管理器" class="headerlink" title="数据存储管理器"></a>数据存储管理器</h3><p>点击数据存储管理器，太简明易懂了……上传就是了。</p>
<p><img src="/images/2019111607254683.png"></p>
<h3 id="添加存储"><a href="#添加存储" class="headerlink" title="添加存储"></a>添加存储</h3><p>ESXi默认会识别接驳的硬盘等设备，但是我们也可以添加网络存储，比如NFS，点击新建数据存储，选择NFS</p>
<p><img src="/images/201911160725471.png"></p>
<p>相应的添加就好了</p>
<h2 id="ESXi网络设置之物理网卡"><a href="#ESXi网络设置之物理网卡" class="headerlink" title="ESXi网络设置之物理网卡"></a>ESXi网络设置之物理网卡</h2><p>熟悉VMware Workstation可能知道，VMware Workstation的网络可以分为桥接、NAT、host only等，那么ESXi呢……对不起，ESXi天生桥接。</p>
<p>在ESXi的网络设置中……</p>
<p>物理网卡的概念很好理解，就是真实接线的网卡，ESXi本身是支持多网卡的，利用多网卡可以玩出很多花样，比如软路由……</p>
<p><img src="/images/2019111607254984.png"></p>
<h2 id="ESXi网络设置之虚拟交换机"><a href="#ESXi网络设置之虚拟交换机" class="headerlink" title="ESXi网络设置之虚拟交换机"></a>ESXi网络设置之虚拟交换机</h2><p>交换机这个概念，对于不是搞网络的人来说，可能很生疏。路由器、交换机、集线器这三者究竟有啥区别啊？这不是本文讨论的重点。</p>
<p>ESXi中的虚拟机交换机的概念很简单，简单的说就是连到虚拟机的那个“设备”，由ESXi的内核提供，只有二层桥接的功能，不像真实的交换机，又能配ACL又能配这配那的。比如我们看下下面的这个图</p>
<p><img src="/images/2019111607255041.png"></p>
<p>这么多台虚拟机都“连接”到了这一虚拟交换机上，然后这个虚拟交换机用两条真实的网线连接到了我的路由器上。</p>
<p>虚拟交换机有啥意义呢？比如我有两块物理网卡，一块是192.168.1.0&#x2F;24，另一块是192.168.2.0&#x2F;24，那么我们就可以通过添加两个vSwitch，然后不同的虚拟机就可以属于不同的网段啦。</p>
<h3 id="添加vSwitch"><a href="#添加vSwitch" class="headerlink" title="添加vSwitch"></a>添加vSwitch</h3><p>虚拟交换机这东西，由于是内核虚拟的，自然也可以自己添加。方法也很简单，直接点击添加，起个名字，选择绑定到哪块物理网卡，确定就可以了。如下图所示</p>
<p><img src="/images/2019111607255231.png"></p>
<p>当然了需要注意的是，一块网卡一旦属于某个虚拟交换机，那它就不能属于其他的虚拟交换机了。</p>
<h3 id="虚拟交换机、添加上行链路"><a href="#虚拟交换机、添加上行链路" class="headerlink" title="虚拟交换机、添加上行链路"></a>虚拟交换机、添加上行链路</h3><p>俗话说，狡兔三窟。一个虚拟交换机，如果增加网线作为备份线路，那也是有备无患的。</p>
<p>所以编辑vSwitch，添加另外一条上行链路作为冗余。这样当你拔掉一条网线，虚拟机们还能无缝切换（真的是无缝，可能连TCP丢包都没有），一点不受影响。</p>
<p>添加方法很简单，直接编辑，添加另一条物理链路就好了</p>
<p>另外，假如你的ESXi不接网线，那么属于同一个vSwitch之间的虚拟机还是能通信的，而且是万兆网卡哦！只是流量不能往外走，要不怎么叫上行链路呢。</p>
<h2 id="虚拟交换机-网卡绑定"><a href="#虚拟交换机-网卡绑定" class="headerlink" title="虚拟交换机 网卡绑定"></a>虚拟交换机 网卡绑定</h2><p>所谓网卡绑定，就是当你为一个虚拟交换机添加多条上行链路的时候，想让ESXi怎么调度啊？类似链路聚合，你是想round-robin，还是active backup，还是load balance呢？网卡绑定就是干这个事情的。</p>
<p><img src="/images/2019111607255418.png"></p>
<p>ESXi的这四种模式，对应的意义如下：</p>
<ul>
<li>基于源端口 ID 的路由（默认）：则根据流量进入虚拟交换机的虚拟端口选择上行链接。</li>
</ul>
<p>基于 IP 哈希的路由：根据每个数据包的源和目标 IP 地址的 Hash 选择上行链接。对于非 IP 数据包，会使用位于这些偏移上的任何内容计算 Hash。</p>
<ul>
<li>基于源 MAC 哈希的路由：根据源以太网的 Hash 选择上行链接。</li>
<li>使用明确故障切换顺序：始终使用“活动适配器”列表中位于最前列的符合故障切换检测标准的上行链路。（本图就是vmnic0）</li>
</ul>
<h3 id="虚拟交换机-流量调整"><a href="#虚拟交换机-流量调整" class="headerlink" title="虚拟交换机 流量调整"></a>虚拟交换机 流量调整</h3><p>买VPS的时候……你这个口不是独享的！好吧，ESXi也能针对虚拟交换机进行流量限制，如下图所示</p>
<p><img src="/images/2019111607255593.png"></p>
<h2 id="ESXi-网络设置-端口组"><a href="#ESXi-网络设置-端口组" class="headerlink" title="ESXi 网络设置 端口组"></a>ESXi 网络设置 端口组</h2><p>实际上呢，虚拟机并不是直接连到vSwitch的。虚拟机上直接连接到端口组上的。不同的虚拟机可以属于不同的端口组。</p>
<p>端口组与虚拟机网络设置</p>
<p><img src="/images/201911160725566.png"></p>
<p>添加端口组</p>
<p><img src="/images/2019111607255657.png"></p>
<h2 id="ESXi-VMkernel网卡"><a href="#ESXi-VMkernel网卡" class="headerlink" title="ESXi VMkernel网卡"></a>ESXi VMkernel网卡</h2><p>ESXi本身是通过网络管理的，那么自然也要有一个对应的“网卡”，这里就是vmk网卡。可以把它理解成一个特殊的端口组，主要就是提供管理相关的访问。</p>
<p><img src="/images/2019111607255838.png"></p>
<p>有的时候，我们可能希望，所有虚拟机使用某一段的IP，但是管理使用另一段IP，这里就可以通过添加VMKernel网卡做到。</p>
<p><img src="/images/2019111607255920.png"></p>
<p>比如我们希望ESXi的管理IP能够有多个，做个备份，那么添加vmkernel也能做到</p>
<p>添加之后的结果</p>
<p><img src="/images/2019111607260117.png"></p>
<p>此时Vmkernel的拓扑</p>
<p><img src="/images/2019111607260113.png"></p>
<h2 id="我的ESXi玩法"><a href="#我的ESXi玩法" class="headerlink" title="我的ESXi玩法"></a>我的ESXi玩法</h2><ul>
<li>kali，还有一个XP，用途你懂的；</li>
<li>Windows 7，用于下载电影电视剧什么的；</li>
<li>Ubuntu Desktop，装了点GUI应用，开了samba服务，默认启动到multi-user。上面的Windows 7下载的文件直接存到了这里，然后电视iPad等直接就能看了；</li>
<li>csr1000v，模拟Cisco IOS网络设备，其实并无卵用，放着吃灰的。</li>
<li>TimeMachine，从Cloud Image导入的，用于macOS的时间机器备份，做了LVM，啥都不怕。</li>
<li>Ubuntu Minimal，从Cloud Image导入的，我也不知道干啥的</li>
<li>Tiny Core，不知道干啥的，玩的吧。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>ESXi真是太强大了，开虚拟机随便玩，部分硬件可以直通到虚拟机中；甚至可以给ESXi主机开ssh，然后可以执行一些ssh命令，甚至可以运行Python，吼。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/11/16/esxi-tutorial/index/" data-id="clhp7rths005vs2qrc9339pvl" data-title="ESXi入门指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-first-mbp/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/11/08/first-mbp/index/" class="article-date">
  <time class="dt-published" datetime="2019-11-08T00:00:00.000Z" itemprop="datePublished">2019-11-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/08/first-mbp/index/">还是早日享乐吧——年轻人的第一台MacBook</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>小时候的梦想是能有一个游戏机，能够开心的玩魂斗罗，大概就像下图这种。</p>
<p><img src="https://pbs.twimg.com/media/EIfnoJdUcAEEL4i?format=png&name=360x360" alt="图像"></p>
<p><a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1191175312043720709?s=20">两年前我实现了这个梦想，买了个Xbox</a>。</p>
<p>上大学的时候呢，希望自己能够有个MacBook……</p>
<p>但是MacBook很贵呀，那时我又没有收入，学费还那么贵，不能花父母的钱呀。</p>
<h2 id="为什么呢？"><a href="#为什么呢？" class="headerlink" title="为什么呢？"></a>为什么呢？</h2><p>工作之后，开始有了收入，周末还会出去做兼职，开始渐渐有了一些积蓄。对于现在的我来说，买房？首付的一半都还没攒到，连个厕所都买不起。我是小有成就，我是有点积蓄，但是这有什么用。</p>
<p>生于穷人家的孩子总是在体验同龄人都在毕业游而我却要<a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1011895319100051456?s=20">为生活而奔波的落差感</a>。</p>
<p>与其这么辛苦，不如早日享受。无论我再怎么勤俭节约，努力工作赚外快，我也买不起房。</p>
<p>全款是别想了，贷款还需要家里的大力支持。但是我既不想贷款，又不想要家里的钱。</p>
<p>我不想牺牲快乐和自由去换一套房。</p>
<p>原本生活中的必需品，此时却变成奢侈品。</p>
<p>反正既然也买不起房，那就不如享受，人生就是这样，在自己的承受范围内，买一些自己喜欢的东西。</p>
<h2 id="怎么买？"><a href="#怎么买？" class="headerlink" title="怎么买？"></a>怎么买？</h2><p>考虑再三，甚至都做了Excel分析哪家卖的便宜，我得出了以下几个结论</p>
<ul>
<li>闲鱼二手不太靠谱，这么贵重的东西，买二手怕是后患无穷吧</li>
<li>13.3寸的MacBook Pro，京东上只有8G内存版的，15.5寸的才有16G</li>
<li>区域版本，国行12967 CNY，港版12073 CNY，日版11789（税前） 12970（税后），美版11864 CNY，台版12785 CNY，</li>
<li>国行教育，12021 CNY</li>
</ul>
<p>所以这么一看，如果能国行教育优惠，其实是非常划算的。日版退税要求短期出入日本的，那只能麻烦出差的同事了，还要等……</p>
<p>那教育优惠，我又不是学生……但是我认识好多学弟学妹们，这真太简单啦！</p>
<h2 id="开箱"><a href="#开箱" class="headerlink" title="开箱?"></a>开箱?</h2><p>周一买，周三审核通过，周五EMS竟然就给送到了，不错不错。</p>
<p>从快递上看，是从成都发货的，我原以为是北京或者上海呢。</p>
<p>送过来的时候，一个纸箱子，拆开就是MacBook的包装啦！</p>
<p><img src="/images/201911081507474.png"></p>
<p>拆开之后，emmm这个包装还很小的嘛，比ThinkPad X1 Carbon的包装小多了</p>
<p><img src="/images/2019110815075314.jpeg"></p>
<p>拆箱～～</p>
<p><img src="/images/201911081507561.jpeg"></p>
<p>开机设置网络</p>
<p><img src="/images/2019110815080168.png"></p>
<h2 id="第N件事……"><a href="#第N件事……" class="headerlink" title="第N件事……"></a>第N件事……</h2><p>第一件事情，毫无疑问，当然是进行科学上网啦！shadowsocks-ng你懂的！</p>
<p>第二件事情，那就是登录一些账号啦，Google GitHub什么的；</p>
<p>第三件事情，把Python和PyCharm、golang、GoLand什么的都请回来，然后把字号调大点；</p>
<p>第四件事情，你看哦！</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2019/11/2019110815131870.png"><img src="/images/2019110815131870.png"></a></p>
<p>第五件事情，ohmyzsh，然后就是配置下iTerm2、用上zsh以及ohmyzsh，咦；</p>
<p>第六件事情，dropbox、telegram等等一大堆工具；</p>
<p>第七件事情，改个壁纸啦～吼吼吼</p>
<h2 id="总体感受"><a href="#总体感受" class="headerlink" title="总体感受"></a>总体感受</h2><p>真好看啊！真是太好看了！</p>
<p>新的键盘有点不适应，目前看来可能得花一段时间去习惯了。</p>
<p>操作系统有些不熟悉，好些快捷键都记不住，目前处于广场舞老大妈的电脑水平。</p>
<p>这个快捷键和手势有点多，对于我这种只有三天记忆的高级的鱼来说，好难啊?</p>
<p>回到家竟然自动连接上了家里的Wi-Fi，看来是因为iPad所以自来熟了嘛！</p>
<p>Touch Bar有点意思呀，有的时候还是挺方便的，比如点确定的时候，再比如：</p>
<p><img src="/images/2019110815081593.jpeg"></p>
<p>Apple ?标志不亮，这个有点不开心。</p>
<p>原彩显示这个功能有点懵哦，总感觉开了它之后，我的屏幕一片黄。</p>
<p>什么，竟然没有电源按钮。好吧，开盖就开机……呃？是不是有这种情况，我在屏幕和键盘之间夹了一张纸，想要拿出来看?</p>
<p>用力按压触摸板好像有个什么功能哎，还没有学会。</p>
<h2 id="与ThinkPad-X1-Carbon的对比"><a href="#与ThinkPad-X1-Carbon的对比" class="headerlink" title="与ThinkPad X1 Carbon的对比"></a>与ThinkPad X1 Carbon的对比</h2><p>明显能感受出来比X1要沉一些，因为是金属的外壳吧，密度要比X1 Carbon的碳纤维低一些?哎呀终于知道为什么叫Carbon了，原来是因为外壳的碳哦！（据说X1的这个碳纤维还是高科技的？）</p>
<p>屏幕不能180度平躺，这是一个遗憾。</p>
<p>显示效果比X1细腻太多啦，因为屏幕尺寸小、分辨率更高，因此像素密度也更高了。</p>
<p>既然分辨率这么高，那字自然也是小一点咯！由于俺眼神不太好，所以开了第二大的缩放，吼吼吼。</p>
<p>我有点困了，以后再说吧?</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/11/08/first-mbp/index/" data-id="clhp7rtht005xs2qrdu3ke1fa" data-title="还是早日享乐吧——年轻人的第一台MacBook" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/7/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/9/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/china/">china</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/china/justsay/">justsay</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloudflare/">cloudflare</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">it</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/">justsay</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/website/">website</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/program/">program</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/program/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/">security</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/security/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/share/">share</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/website/">website</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/website/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/what/">what</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/what/gfw/">gfw</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/09/21/one-api-clickhouse/index/">one-api/new-api性能优化：使用 ClickHouse 作为日志系统</a>
          </li>
        
          <li>
            <a href="/2024/08/03/stripe-fraud/index/">Stripe 如何安全收款并避免盗刷与测卡</a>
          </li>
        
          <li>
            <a href="/2024/07/27/hide-in-cf/index/">隐藏于 Cloudflare 的全球网络之中</a>
          </li>
        
          <li>
            <a href="/2024/07/17/azure-waf/index/">救命！我的 Azure Front Door WAF 规则不生效怎么办！</a>
          </li>
        
          <li>
            <a href="/2024/07/16/azure-fd/index/">使用Azure Front Door 和 Load Balancer</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Benny小土豆<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>